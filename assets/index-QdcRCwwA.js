const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/admin.service-C5Ucx-A9.js","assets/charts-BoanjVzx.js","assets/vendor-BeqUCTS1.js","assets/pdf-S5HbmSVd.js","assets/coupon.service-Bglzh4Rk.js"])))=>i.map(i=>d[i]);
import{r as Iv,a as N,j as h,C as Gm,b as Vm,L as Ym,B as Km,c as Gv,P as Vv,A as Yv,p as Pm,d as Jm,e as Xm,i as Kv,f as Qm,g as Pv,D as Jv}from"./charts-BoanjVzx.js";import{r as Xv}from"./vendor-BeqUCTS1.js";import{_ as Pt}from"./pdf-S5HbmSVd.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function l(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(u){if(u.ep)return;u.ep=!0;const d=l(u);fetch(u.href,d)}})();var zc={exports:{}},di={},Mc={exports:{}},Lc={};var um;function Qv(){return um||(um=1,(function(s){function n(T,q){var J=T.length;T.push(q);e:for(;0<J;){var ie=J-1>>>1,oe=T[ie];if(0<u(oe,q))T[ie]=q,T[J]=oe,J=ie;else break e}}function l(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var q=T[0],J=T.pop();if(J!==q){T[0]=J;e:for(var ie=0,oe=T.length,_e=oe>>>1;ie<_e;){var xe=2*(ie+1)-1,ye=T[xe],De=xe+1,it=T[De];if(0>u(ye,J))De<oe&&0>u(it,ye)?(T[ie]=it,T[De]=J,ie=De):(T[ie]=ye,T[xe]=J,ie=xe);else if(De<oe&&0>u(it,J))T[ie]=it,T[De]=J,ie=De;else break e}}return q}function u(T,q){var J=T.sortIndex-q.sortIndex;return J!==0?J:T.id-q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var g=[],v=[],b=1,w=null,x=3,_=!1,A=!1,E=!1,R=!1,z=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function V(T){for(var q=l(v);q!==null;){if(q.callback===null)r(v);else if(q.startTime<=T)r(v),q.sortIndex=q.expirationTime,n(g,q);else break;q=l(v)}}function F(T){if(E=!1,V(T),!A)if(l(g)!==null)A=!0,Z||(Z=!0,ne());else{var q=l(v);q!==null&&I(F,q.startTime-T)}}var Z=!1,Y=-1,K=5,P=-1;function Q(){return R?!0:!(s.unstable_now()-P<K)}function G(){if(R=!1,Z){var T=s.unstable_now();P=T;var q=!0;try{e:{A=!1,E&&(E=!1,L(Y),Y=-1),_=!0;var J=x;try{t:{for(V(T),w=l(g);w!==null&&!(w.expirationTime>T&&Q());){var ie=w.callback;if(typeof ie=="function"){w.callback=null,x=w.priorityLevel;var oe=ie(w.expirationTime<=T);if(T=s.unstable_now(),typeof oe=="function"){w.callback=oe,V(T),q=!0;break t}w===l(g)&&r(g),V(T)}else r(g);w=l(g)}if(w!==null)q=!0;else{var _e=l(v);_e!==null&&I(F,_e.startTime-T),q=!1}}break e}finally{w=null,x=J,_=!1}q=void 0}}finally{q?ne():Z=!1}}}var ne;if(typeof M=="function")ne=function(){M(G)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,X=Pe.port2;Pe.port1.onmessage=G,ne=function(){X.postMessage(null)}}else ne=function(){z(G,0)};function I(T,q){Y=z(function(){T(s.unstable_now())},q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(T){T.callback=null},s.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<T?Math.floor(1e3/T):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(T){switch(x){case 1:case 2:case 3:var q=3;break;default:q=x}var J=x;x=q;try{return T()}finally{x=J}},s.unstable_requestPaint=function(){R=!0},s.unstable_runWithPriority=function(T,q){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var J=x;x=T;try{return q()}finally{x=J}},s.unstable_scheduleCallback=function(T,q,J){var ie=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ie+J:ie):J=ie,T){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=J+oe,T={id:b++,callback:q,priorityLevel:T,startTime:J,expirationTime:oe,sortIndex:-1},J>ie?(T.sortIndex=J,n(v,T),l(g)===null&&T===l(v)&&(E?(L(Y),Y=-1):E=!0,I(F,J-ie))):(T.sortIndex=oe,n(g,T),A||_||(A=!0,Z||(Z=!0,ne()))),T},s.unstable_shouldYield=Q,s.unstable_wrapCallback=function(T){var q=x;return function(){var J=x;x=q;try{return T.apply(this,arguments)}finally{x=J}}}})(Lc)),Lc}var dm;function Zv(){return dm||(dm=1,Mc.exports=Qv()),Mc.exports}var hm;function Wv(){if(hm)return di;hm=1;var s=Zv(),n=Iv(),l=Xv();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(d(e)!==e)throw Error(r(188))}function v(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,i=t;;){var o=a.return;if(o===null)break;var c=o.alternate;if(c===null){if(i=o.return,i!==null){a=i;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===a)return g(o),e;if(c===i)return g(o),t;c=c.sibling}throw Error(r(188))}if(a.return!==i.return)a=o,i=c;else{for(var p=!1,y=o.child;y;){if(y===a){p=!0,a=o,i=c;break}if(y===i){p=!0,i=o,a=c;break}y=y.sibling}if(!p){for(y=c.child;y;){if(y===a){p=!0,a=c,i=o;break}if(y===i){p=!0,i=c,a=o;break}y=y.sibling}if(!p)throw Error(r(189))}}if(a.alternate!==i)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,x=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),M=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Symbol.for("react.client.reference");function X(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Pe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case z:return"Profiler";case R:return"StrictMode";case F:return"Suspense";case Z:return"SuspenseList";case P:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case M:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return t=e.displayName||null,t!==null?t:X(e.type)||"Memo";case K:t=e._payload,e=e._init;try{return X(e(t))}catch{}}return null}var I=Array.isArray,T=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ie=[],oe=-1;function _e(e){return{current:e}}function xe(e){0>oe||(e.current=ie[oe],ie[oe]=null,oe--)}function ye(e,t){oe++,ie[oe]=e.current,e.current=t}var De=_e(null),it=_e(null),pa=_e(null),ki=_e(null);function Ni(e,t){switch(ye(pa,t),ye(it,e),ye(De,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Df(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Df(t),e=Uf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}xe(De),ye(De,e)}function bn(){xe(De),xe(it),xe(pa)}function pr(e){e.memoizedState!==null&&ye(ki,e);var t=De.current,a=Uf(t,e.type);t!==a&&(ye(it,e),ye(De,a))}function Oi(e){it.current===e&&(xe(De),xe(it)),ki.current===e&&(xe(ki),ri._currentValue=J)}var gr,ou;function Ka(e){if(gr===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);gr=t&&t[1]||"",ou=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gr+e+ou}var vr=!1;function yr(e,t){if(!e||vr)return"";vr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(U){var D=U}Reflect.construct(e,[],H)}else{try{H.call()}catch(U){D=U}e.call(H.prototype)}}else{try{throw Error()}catch(U){D=U}(H=e())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(U){if(U&&D&&typeof U.stack=="string")return[U.stack,D.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=i.DetermineComponentFrameRoot(),p=c[0],y=c[1];if(p&&y){var S=p.split(`
`),O=y.split(`
`);for(o=i=0;i<S.length&&!S[i].includes("DetermineComponentFrameRoot");)i++;for(;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;if(i===S.length||o===O.length)for(i=S.length-1,o=O.length-1;1<=i&&0<=o&&S[i]!==O[o];)o--;for(;1<=i&&0<=o;i--,o--)if(S[i]!==O[o]){if(i!==1||o!==1)do if(i--,o--,0>o||S[i]!==O[o]){var B=`
`+S[i].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=i&&0<=o);break}}}finally{vr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ka(a):""}function bp(e,t){switch(e.tag){case 26:case 27:case 5:return Ka(e.type);case 16:return Ka("Lazy");case 13:return e.child!==t&&t!==null?Ka("Suspense Fallback"):Ka("Suspense");case 19:return Ka("SuspenseList");case 0:case 15:return yr(e.type,!1);case 11:return yr(e.type.render,!1);case 1:return yr(e.type,!0);case 31:return Ka("Activity");default:return""}}function cu(e){try{var t="",a=null;do t+=bp(e,a),a=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var br=Object.prototype.hasOwnProperty,wr=s.unstable_scheduleCallback,Sr=s.unstable_cancelCallback,wp=s.unstable_shouldYield,Sp=s.unstable_requestPaint,ft=s.unstable_now,_p=s.unstable_getCurrentPriorityLevel,uu=s.unstable_ImmediatePriority,du=s.unstable_UserBlockingPriority,Ri=s.unstable_NormalPriority,xp=s.unstable_LowPriority,hu=s.unstable_IdlePriority,Ep=s.log,jp=s.unstable_setDisableYieldValue,bs=null,mt=null;function ga(e){if(typeof Ep=="function"&&jp(e),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(bs,e)}catch{}}var pt=Math.clz32?Math.clz32:Cp,Ap=Math.log,Tp=Math.LN2;function Cp(e){return e>>>=0,e===0?32:31-(Ap(e)/Tp|0)|0}var Di=256,Ui=262144,zi=4194304;function Pa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Mi(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var o=0,c=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var y=i&134217727;return y!==0?(i=y&~c,i!==0?o=Pa(i):(p&=y,p!==0?o=Pa(p):a||(a=y&~e,a!==0&&(o=Pa(a))))):(y=i&~c,y!==0?o=Pa(y):p!==0?o=Pa(p):a||(a=i&~e,a!==0&&(o=Pa(a)))),o===0?0:t!==0&&t!==o&&(t&c)===0&&(c=o&-o,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:o}function ws(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function kp(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fu(){var e=zi;return zi<<=1,(zi&62914560)===0&&(zi=4194304),e}function _r(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ss(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Np(e,t,a,i,o,c){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var y=e.entanglements,S=e.expirationTimes,O=e.hiddenUpdates;for(a=p&~a;0<a;){var B=31-pt(a),H=1<<B;y[B]=0,S[B]=-1;var D=O[B];if(D!==null)for(O[B]=null,B=0;B<D.length;B++){var U=D[B];U!==null&&(U.lane&=-536870913)}a&=~H}i!==0&&mu(e,i,0),c!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=c&~(p&~t))}function mu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-pt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&261930}function pu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-pt(a),o=1<<i;o&t|e[i]&t&&(e[i]|=t),a&=~o}}function gu(e,t){var a=t&-t;return a=(a&42)!==0?1:xr(a),(a&(e.suspendedLanes|t))!==0?0:a}function xr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Er(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function vu(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:nm(e.type))}function yu(e,t){var a=q.p;try{return q.p=e,t()}finally{q.p=a}}var va=Math.random().toString(36).slice(2),Ze="__reactFiber$"+va,lt="__reactProps$"+va,wn="__reactContainer$"+va,jr="__reactEvents$"+va,Op="__reactListeners$"+va,Rp="__reactHandles$"+va,bu="__reactResources$"+va,_s="__reactMarker$"+va;function Ar(e){delete e[Ze],delete e[lt],delete e[jr],delete e[Op],delete e[Rp]}function Sn(e){var t=e[Ze];if(t)return t;for(var a=e.parentNode;a;){if(t=a[wn]||a[Ze]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Hf(e);e!==null;){if(a=e[Ze])return a;e=Hf(e)}return t}e=a,a=e.parentNode}return null}function _n(e){if(e=e[Ze]||e[wn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function xs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function xn(e){var t=e[bu];return t||(t=e[bu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Je(e){e[_s]=!0}var wu=new Set,Su={};function Ja(e,t){En(e,t),En(e+"Capture",t)}function En(e,t){for(Su[e]=t,e=0;e<t.length;e++)wu.add(t[e])}var Dp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_u={},xu={};function Up(e){return br.call(xu,e)?!0:br.call(_u,e)?!1:Dp.test(e)?xu[e]=!0:(_u[e]=!0,!1)}function Li(e,t,a){if(Up(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Bi(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Jt(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}function jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Eu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zp(e,t,a){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,c=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(p){a=""+p,c.call(this,p)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tr(e){if(!e._valueTracker){var t=Eu(e)?"checked":"value";e._valueTracker=zp(e,t,""+e[t])}}function ju(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=Eu(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function qi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Mp=/[\n"\\]/g;function At(e){return e.replace(Mp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Cr(e,t,a,i,o,c,p,y){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+jt(t)):e.value!==""+jt(t)&&(e.value=""+jt(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?kr(e,p,jt(t)):a!=null?kr(e,p,jt(a)):i!=null&&e.removeAttribute("value"),o==null&&c!=null&&(e.defaultChecked=!!c),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+jt(y):e.removeAttribute("name")}function Au(e,t,a,i,o,c,p,y){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){Tr(e);return}a=a!=null?""+jt(a):"",t=t!=null?""+jt(t):a,y||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=y?e.checked:!!i,e.defaultChecked=!!i,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Tr(e)}function kr(e,t,a){t==="number"&&qi(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function jn(e,t,a,i){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&i&&(e[a].defaultSelected=!0)}else{for(a=""+jt(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Tu(e,t,a){if(t!=null&&(t=""+jt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+jt(a):""}function Cu(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(r(92));if(I(i)){if(1<i.length)throw Error(r(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=jt(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i),Tr(e)}function An(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Lp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ku(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||Lp.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Nu(e,t,a){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&a[o]!==i&&ku(e,o,i)}else for(var c in t)t.hasOwnProperty(c)&&ku(e,c,t[c])}function Nr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $i(e){return qp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Xt(){}var Or=null;function Rr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tn=null,Cn=null;function Ou(e){var t=_n(e);if(t&&(e=t.stateNode)){var a=e[lt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Cr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+At(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var o=i[lt]||null;if(!o)throw Error(r(90));Cr(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&ju(i)}break e;case"textarea":Tu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&jn(e,!!a.multiple,t,!1)}}}var Dr=!1;function Ru(e,t,a){if(Dr)return e(t,a);Dr=!0;try{var i=e(t);return i}finally{if(Dr=!1,(Tn!==null||Cn!==null)&&(Tl(),Tn&&(t=Tn,e=Cn,Cn=Tn=null,Ou(t),e)))for(t=0;t<e.length;t++)Ou(e[t])}}function Es(e,t){var a=e.stateNode;if(a===null)return null;var i=a[lt]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,t,typeof a));return a}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ur=!1;if(Qt)try{var js={};Object.defineProperty(js,"passive",{get:function(){Ur=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Ur=!1}var ya=null,zr=null,Hi=null;function Du(){if(Hi)return Hi;var e,t=zr,a=t.length,i,o="value"in ya?ya.value:ya.textContent,c=o.length;for(e=0;e<a&&t[e]===o[e];e++);var p=a-e;for(i=1;i<=p&&t[a-i]===o[c-i];i++);return Hi=o.slice(e,1<i?1-i:void 0)}function Ii(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gi(){return!0}function Uu(){return!1}function rt(e){function t(a,i,o,c,p){this._reactName=a,this._targetInst=o,this.type=i,this.nativeEvent=c,this.target=p,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(c):c[y]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Gi:Uu,this.isPropagationStopped=Uu,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),t}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=rt(Xa),As=w({},Xa,{view:0,detail:0}),$p=rt(As),Mr,Lr,Ts,Yi=w({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ts&&(Ts&&e.type==="mousemove"?(Mr=e.screenX-Ts.screenX,Lr=e.screenY-Ts.screenY):Lr=Mr=0,Ts=e),Mr)},movementY:function(e){return"movementY"in e?e.movementY:Lr}}),zu=rt(Yi),Hp=w({},Yi,{dataTransfer:0}),Ip=rt(Hp),Gp=w({},As,{relatedTarget:0}),Br=rt(Gp),Vp=w({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),Yp=rt(Vp),Kp=w({},Xa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pp=rt(Kp),Jp=w({},Xa,{data:0}),Mu=rt(Jp),Xp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zp[e])?!!t[e]:!1}function qr(){return Wp}var Fp=w({},As,{key:function(e){if(e.key){var t=Xp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(e){return e.type==="keypress"?Ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),eg=rt(Fp),tg=w({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lu=rt(tg),ag=w({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),ng=rt(ag),sg=w({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ig=rt(sg),lg=w({},Yi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rg=rt(lg),og=w({},Xa,{newState:0,oldState:0}),cg=rt(og),ug=[9,13,27,32],$r=Qt&&"CompositionEvent"in window,Cs=null;Qt&&"documentMode"in document&&(Cs=document.documentMode);var dg=Qt&&"TextEvent"in window&&!Cs,Bu=Qt&&(!$r||Cs&&8<Cs&&11>=Cs),qu=" ",$u=!1;function Hu(e,t){switch(e){case"keyup":return ug.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kn=!1;function hg(e,t){switch(e){case"compositionend":return Iu(t);case"keypress":return t.which!==32?null:($u=!0,qu);case"textInput":return e=t.data,e===qu&&$u?null:e;default:return null}}function fg(e,t){if(kn)return e==="compositionend"||!$r&&Hu(e,t)?(e=Du(),Hi=zr=ya=null,kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bu&&t.locale!=="ko"?null:t.data;default:return null}}var mg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mg[e.type]:t==="textarea"}function Vu(e,t,a,i){Tn?Cn?Cn.push(i):Cn=[i]:Tn=i,t=Ul(t,"onChange"),0<t.length&&(a=new Vi("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var ks=null,Ns=null;function pg(e){Tf(e,0)}function Ki(e){var t=xs(e);if(ju(t))return e}function Yu(e,t){if(e==="change")return t}var Ku=!1;if(Qt){var Hr;if(Qt){var Ir="oninput"in document;if(!Ir){var Pu=document.createElement("div");Pu.setAttribute("oninput","return;"),Ir=typeof Pu.oninput=="function"}Hr=Ir}else Hr=!1;Ku=Hr&&(!document.documentMode||9<document.documentMode)}function Ju(){ks&&(ks.detachEvent("onpropertychange",Xu),Ns=ks=null)}function Xu(e){if(e.propertyName==="value"&&Ki(Ns)){var t=[];Vu(t,Ns,e,Rr(e)),Ru(pg,t)}}function gg(e,t,a){e==="focusin"?(Ju(),ks=t,Ns=a,ks.attachEvent("onpropertychange",Xu)):e==="focusout"&&Ju()}function vg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ki(Ns)}function yg(e,t){if(e==="click")return Ki(t)}function bg(e,t){if(e==="input"||e==="change")return Ki(t)}function wg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gt=typeof Object.is=="function"?Object.is:wg;function Os(e,t){if(gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var o=a[i];if(!br.call(t,o)||!gt(e[o],t[o]))return!1}return!0}function Qu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zu(e,t){var a=Qu(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Qu(a)}}function Wu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=qi(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=qi(e.document)}return t}function Gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Sg=Qt&&"documentMode"in document&&11>=document.documentMode,Nn=null,Vr=null,Rs=null,Yr=!1;function ed(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yr||Nn==null||Nn!==qi(i)||(i=Nn,"selectionStart"in i&&Gr(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Rs&&Os(Rs,i)||(Rs=i,i=Ul(Vr,"onSelect"),0<i.length&&(t=new Vi("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=Nn)))}function Qa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var On={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},Kr={},td={};Qt&&(td=document.createElement("div").style,"AnimationEvent"in window||(delete On.animationend.animation,delete On.animationiteration.animation,delete On.animationstart.animation),"TransitionEvent"in window||delete On.transitionend.transition);function Za(e){if(Kr[e])return Kr[e];if(!On[e])return e;var t=On[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in td)return Kr[e]=t[a];return e}var ad=Za("animationend"),nd=Za("animationiteration"),sd=Za("animationstart"),_g=Za("transitionrun"),xg=Za("transitionstart"),Eg=Za("transitioncancel"),id=Za("transitionend"),ld=new Map,Pr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pr.push("scrollEnd");function zt(e,t){ld.set(e,t),Ja(t,[e])}var Pi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Tt=[],Rn=0,Jr=0;function Ji(){for(var e=Rn,t=Jr=Rn=0;t<e;){var a=Tt[t];Tt[t++]=null;var i=Tt[t];Tt[t++]=null;var o=Tt[t];Tt[t++]=null;var c=Tt[t];if(Tt[t++]=null,i!==null&&o!==null){var p=i.pending;p===null?o.next=o:(o.next=p.next,p.next=o),i.pending=o}c!==0&&rd(a,o,c)}}function Xi(e,t,a,i){Tt[Rn++]=e,Tt[Rn++]=t,Tt[Rn++]=a,Tt[Rn++]=i,Jr|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Xr(e,t,a,i){return Xi(e,t,a,i),Qi(e)}function Wa(e,t){return Xi(e,null,null,t),Qi(e)}function rd(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var o=!1,c=e.return;c!==null;)c.childLanes|=a,i=c.alternate,i!==null&&(i.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(o=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,o&&t!==null&&(o=31-pt(a),e=c.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=a|536870912),c):null}function Qi(e){if(50<ei)throw ei=0,ic=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Dn={};function jg(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(e,t,a,i){return new jg(e,t,a,i)}function Qr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zt(e,t){var a=e.alternate;return a===null?(a=vt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function od(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Zi(e,t,a,i,o,c){var p=0;if(i=e,typeof e=="function")Qr(e)&&(p=1);else if(typeof e=="string")p=Nv(e,a,De.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case P:return e=vt(31,a,t,o),e.elementType=P,e.lanes=c,e;case E:return Fa(a.children,o,c,t);case R:p=8,o|=24;break;case z:return e=vt(12,a,t,o|2),e.elementType=z,e.lanes=c,e;case F:return e=vt(13,a,t,o),e.elementType=F,e.lanes=c,e;case Z:return e=vt(19,a,t,o),e.elementType=Z,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:p=10;break e;case L:p=9;break e;case V:p=11;break e;case Y:p=14;break e;case K:p=16,i=null;break e}p=29,a=Error(r(130,e===null?"null":typeof e,"")),i=null}return t=vt(p,a,t,o),t.elementType=e,t.type=i,t.lanes=c,t}function Fa(e,t,a,i){return e=vt(7,e,i,t),e.lanes=a,e}function Zr(e,t,a){return e=vt(6,e,null,t),e.lanes=a,e}function cd(e){var t=vt(18,null,null,0);return t.stateNode=e,t}function Wr(e,t,a){return t=vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ud=new WeakMap;function Ct(e,t){if(typeof e=="object"&&e!==null){var a=ud.get(e);return a!==void 0?a:(t={value:e,source:t,stack:cu(t)},ud.set(e,t),t)}return{value:e,source:t,stack:cu(t)}}var Un=[],zn=0,Wi=null,Ds=0,kt=[],Nt=0,ba=null,Ht=1,It="";function Wt(e,t){Un[zn++]=Ds,Un[zn++]=Wi,Wi=e,Ds=t}function dd(e,t,a){kt[Nt++]=Ht,kt[Nt++]=It,kt[Nt++]=ba,ba=e;var i=Ht;e=It;var o=32-pt(i)-1;i&=~(1<<o),a+=1;var c=32-pt(t)+o;if(30<c){var p=o-o%5;c=(i&(1<<p)-1).toString(32),i>>=p,o-=p,Ht=1<<32-pt(t)+o|a<<o|i,It=c+e}else Ht=1<<c|a<<o|i,It=e}function Fr(e){e.return!==null&&(Wt(e,1),dd(e,1,0))}function eo(e){for(;e===Wi;)Wi=Un[--zn],Un[zn]=null,Ds=Un[--zn],Un[zn]=null;for(;e===ba;)ba=kt[--Nt],kt[Nt]=null,It=kt[--Nt],kt[Nt]=null,Ht=kt[--Nt],kt[Nt]=null}function hd(e,t){kt[Nt++]=Ht,kt[Nt++]=It,kt[Nt++]=ba,Ht=t.id,It=t.overflow,ba=e}var We=null,Oe=null,ve=!1,wa=null,Ot=!1,to=Error(r(519));function Sa(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Us(Ct(t,e)),to}function fd(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[Ze]=e,t[lt]=i,a){case"dialog":he("cancel",t),he("close",t);break;case"iframe":case"object":case"embed":he("load",t);break;case"video":case"audio":for(a=0;a<ai.length;a++)he(ai[a],t);break;case"source":he("error",t);break;case"img":case"image":case"link":he("error",t),he("load",t);break;case"details":he("toggle",t);break;case"input":he("invalid",t),Au(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":he("invalid",t);break;case"textarea":he("invalid",t),Cu(t,i.value,i.defaultValue,i.children)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||Of(t.textContent,a)?(i.popover!=null&&(he("beforetoggle",t),he("toggle",t)),i.onScroll!=null&&he("scroll",t),i.onScrollEnd!=null&&he("scrollend",t),i.onClick!=null&&(t.onclick=Xt),t=!0):t=!1,t||Sa(e,!0)}function md(e){for(We=e.return;We;)switch(We.tag){case 5:case 31:case 13:Ot=!1;return;case 27:case 3:Ot=!0;return;default:We=We.return}}function Mn(e){if(e!==We)return!1;if(!ve)return md(e),ve=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||wc(e.type,e.memoizedProps)),a=!a),a&&Oe&&Sa(e),md(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Oe=$f(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Oe=$f(e)}else t===27?(t=Oe,za(e.type)?(e=jc,jc=null,Oe=e):Oe=t):Oe=We?Dt(e.stateNode.nextSibling):null;return!0}function en(){Oe=We=null,ve=!1}function ao(){var e=wa;return e!==null&&(dt===null?dt=e:dt.push.apply(dt,e),wa=null),e}function Us(e){wa===null?wa=[e]:wa.push(e)}var no=_e(null),tn=null,Ft=null;function _a(e,t,a){ye(no,t._currentValue),t._currentValue=a}function ea(e){e._currentValue=no.current,xe(no)}function so(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function io(e,t,a,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){var p=o.child;c=c.firstContext;e:for(;c!==null;){var y=c;c=o;for(var S=0;S<t.length;S++)if(y.context===t[S]){c.lanes|=a,y=c.alternate,y!==null&&(y.lanes|=a),so(c.return,a,e),i||(p=null);break e}c=y.next}}else if(o.tag===18){if(p=o.return,p===null)throw Error(r(341));p.lanes|=a,c=p.alternate,c!==null&&(c.lanes|=a),so(p,a,e),p=null}else p=o.child;if(p!==null)p.return=o;else for(p=o;p!==null;){if(p===e){p=null;break}if(o=p.sibling,o!==null){o.return=p.return,p=o;break}p=p.return}o=p}}function Ln(e,t,a,i){e=null;for(var o=t,c=!1;o!==null;){if(!c){if((o.flags&524288)!==0)c=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var p=o.alternate;if(p===null)throw Error(r(387));if(p=p.memoizedProps,p!==null){var y=o.type;gt(o.pendingProps.value,p.value)||(e!==null?e.push(y):e=[y])}}else if(o===ki.current){if(p=o.alternate,p===null)throw Error(r(387));p.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(ri):e=[ri])}o=o.return}e!==null&&io(t,e,a,i),t.flags|=262144}function Fi(e){for(e=e.firstContext;e!==null;){if(!gt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function an(e){tn=e,Ft=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Fe(e){return pd(tn,e)}function el(e,t){return tn===null&&an(e),pd(e,t)}function pd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ft===null){if(e===null)throw Error(r(308));Ft=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ft=Ft.next=t;return a}var Ag=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Tg=s.unstable_scheduleCallback,Cg=s.unstable_NormalPriority,$e={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lo(){return{controller:new Ag,data:new Map,refCount:0}}function zs(e){e.refCount--,e.refCount===0&&Tg(Cg,function(){e.controller.abort()})}var Ms=null,ro=0,Bn=0,qn=null;function kg(e,t){if(Ms===null){var a=Ms=[];ro=0,Bn=dc(),qn={status:"pending",value:void 0,then:function(i){a.push(i)}}}return ro++,t.then(gd,gd),t}function gd(){if(--ro===0&&Ms!==null){qn!==null&&(qn.status="fulfilled");var e=Ms;Ms=null,Bn=0,qn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ng(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),i}var vd=T.S;T.S=function(e,t){ef=ft(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&kg(e,t),vd!==null&&vd(e,t)};var nn=_e(null);function oo(){var e=nn.current;return e!==null?e:ke.pooledCache}function tl(e,t){t===null?ye(nn,nn.current):ye(nn,t.pool)}function yd(){var e=oo();return e===null?null:{parent:$e._currentValue,pool:e}}var $n=Error(r(460)),co=Error(r(474)),al=Error(r(542)),nl={then:function(){}};function bd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Xt,Xt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_d(e),e;default:if(typeof t.status=="string")t.then(Xt,Xt);else{if(e=ke,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_d(e),e}throw ln=t,$n}}function sn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ln=a,$n):a}}var ln=null;function Sd(){if(ln===null)throw Error(r(459));var e=ln;return ln=null,e}function _d(e){if(e===$n||e===al)throw Error(r(483))}var Hn=null,Ls=0;function sl(e){var t=Ls;return Ls+=1,Hn===null&&(Hn=[]),wd(Hn,e,t)}function Bs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function il(e,t){throw t.$$typeof===x?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function xd(e){function t(C,j){if(e){var k=C.deletions;k===null?(C.deletions=[j],C.flags|=16):k.push(j)}}function a(C,j){if(!e)return null;for(;j!==null;)t(C,j),j=j.sibling;return null}function i(C){for(var j=new Map;C!==null;)C.key!==null?j.set(C.key,C):j.set(C.index,C),C=C.sibling;return j}function o(C,j){return C=Zt(C,j),C.index=0,C.sibling=null,C}function c(C,j,k){return C.index=k,e?(k=C.alternate,k!==null?(k=k.index,k<j?(C.flags|=67108866,j):k):(C.flags|=67108866,j)):(C.flags|=1048576,j)}function p(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function y(C,j,k,$){return j===null||j.tag!==6?(j=Zr(k,C.mode,$),j.return=C,j):(j=o(j,k),j.return=C,j)}function S(C,j,k,$){var ae=k.type;return ae===E?B(C,j,k.props.children,$,k.key):j!==null&&(j.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===K&&sn(ae)===j.type)?(j=o(j,k.props),Bs(j,k),j.return=C,j):(j=Zi(k.type,k.key,k.props,null,C.mode,$),Bs(j,k),j.return=C,j)}function O(C,j,k,$){return j===null||j.tag!==4||j.stateNode.containerInfo!==k.containerInfo||j.stateNode.implementation!==k.implementation?(j=Wr(k,C.mode,$),j.return=C,j):(j=o(j,k.children||[]),j.return=C,j)}function B(C,j,k,$,ae){return j===null||j.tag!==7?(j=Fa(k,C.mode,$,ae),j.return=C,j):(j=o(j,k),j.return=C,j)}function H(C,j,k){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Zr(""+j,C.mode,k),j.return=C,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case _:return k=Zi(j.type,j.key,j.props,null,C.mode,k),Bs(k,j),k.return=C,k;case A:return j=Wr(j,C.mode,k),j.return=C,j;case K:return j=sn(j),H(C,j,k)}if(I(j)||ne(j))return j=Fa(j,C.mode,k,null),j.return=C,j;if(typeof j.then=="function")return H(C,sl(j),k);if(j.$$typeof===M)return H(C,el(C,j),k);il(C,j)}return null}function D(C,j,k,$){var ae=j!==null?j.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ae!==null?null:y(C,j,""+k,$);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return k.key===ae?S(C,j,k,$):null;case A:return k.key===ae?O(C,j,k,$):null;case K:return k=sn(k),D(C,j,k,$)}if(I(k)||ne(k))return ae!==null?null:B(C,j,k,$,null);if(typeof k.then=="function")return D(C,j,sl(k),$);if(k.$$typeof===M)return D(C,j,el(C,k),$);il(C,k)}return null}function U(C,j,k,$,ae){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return C=C.get(k)||null,y(j,C,""+$,ae);if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return C=C.get($.key===null?k:$.key)||null,S(j,C,$,ae);case A:return C=C.get($.key===null?k:$.key)||null,O(j,C,$,ae);case K:return $=sn($),U(C,j,k,$,ae)}if(I($)||ne($))return C=C.get(k)||null,B(j,C,$,ae,null);if(typeof $.then=="function")return U(C,j,k,sl($),ae);if($.$$typeof===M)return U(C,j,k,el(j,$),ae);il(j,$)}return null}function W(C,j,k,$){for(var ae=null,be=null,ee=j,ue=j=0,pe=null;ee!==null&&ue<k.length;ue++){ee.index>ue?(pe=ee,ee=null):pe=ee.sibling;var we=D(C,ee,k[ue],$);if(we===null){ee===null&&(ee=pe);break}e&&ee&&we.alternate===null&&t(C,ee),j=c(we,j,ue),be===null?ae=we:be.sibling=we,be=we,ee=pe}if(ue===k.length)return a(C,ee),ve&&Wt(C,ue),ae;if(ee===null){for(;ue<k.length;ue++)ee=H(C,k[ue],$),ee!==null&&(j=c(ee,j,ue),be===null?ae=ee:be.sibling=ee,be=ee);return ve&&Wt(C,ue),ae}for(ee=i(ee);ue<k.length;ue++)pe=U(ee,C,ue,k[ue],$),pe!==null&&(e&&pe.alternate!==null&&ee.delete(pe.key===null?ue:pe.key),j=c(pe,j,ue),be===null?ae=pe:be.sibling=pe,be=pe);return e&&ee.forEach(function($a){return t(C,$a)}),ve&&Wt(C,ue),ae}function se(C,j,k,$){if(k==null)throw Error(r(151));for(var ae=null,be=null,ee=j,ue=j=0,pe=null,we=k.next();ee!==null&&!we.done;ue++,we=k.next()){ee.index>ue?(pe=ee,ee=null):pe=ee.sibling;var $a=D(C,ee,we.value,$);if($a===null){ee===null&&(ee=pe);break}e&&ee&&$a.alternate===null&&t(C,ee),j=c($a,j,ue),be===null?ae=$a:be.sibling=$a,be=$a,ee=pe}if(we.done)return a(C,ee),ve&&Wt(C,ue),ae;if(ee===null){for(;!we.done;ue++,we=k.next())we=H(C,we.value,$),we!==null&&(j=c(we,j,ue),be===null?ae=we:be.sibling=we,be=we);return ve&&Wt(C,ue),ae}for(ee=i(ee);!we.done;ue++,we=k.next())we=U(ee,C,ue,we.value,$),we!==null&&(e&&we.alternate!==null&&ee.delete(we.key===null?ue:we.key),j=c(we,j,ue),be===null?ae=we:be.sibling=we,be=we);return e&&ee.forEach(function(Hv){return t(C,Hv)}),ve&&Wt(C,ue),ae}function Ce(C,j,k,$){if(typeof k=="object"&&k!==null&&k.type===E&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case _:e:{for(var ae=k.key;j!==null;){if(j.key===ae){if(ae=k.type,ae===E){if(j.tag===7){a(C,j.sibling),$=o(j,k.props.children),$.return=C,C=$;break e}}else if(j.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===K&&sn(ae)===j.type){a(C,j.sibling),$=o(j,k.props),Bs($,k),$.return=C,C=$;break e}a(C,j);break}else t(C,j);j=j.sibling}k.type===E?($=Fa(k.props.children,C.mode,$,k.key),$.return=C,C=$):($=Zi(k.type,k.key,k.props,null,C.mode,$),Bs($,k),$.return=C,C=$)}return p(C);case A:e:{for(ae=k.key;j!==null;){if(j.key===ae)if(j.tag===4&&j.stateNode.containerInfo===k.containerInfo&&j.stateNode.implementation===k.implementation){a(C,j.sibling),$=o(j,k.children||[]),$.return=C,C=$;break e}else{a(C,j);break}else t(C,j);j=j.sibling}$=Wr(k,C.mode,$),$.return=C,C=$}return p(C);case K:return k=sn(k),Ce(C,j,k,$)}if(I(k))return W(C,j,k,$);if(ne(k)){if(ae=ne(k),typeof ae!="function")throw Error(r(150));return k=ae.call(k),se(C,j,k,$)}if(typeof k.then=="function")return Ce(C,j,sl(k),$);if(k.$$typeof===M)return Ce(C,j,el(C,k),$);il(C,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,j!==null&&j.tag===6?(a(C,j.sibling),$=o(j,k),$.return=C,C=$):(a(C,j),$=Zr(k,C.mode,$),$.return=C,C=$),p(C)):a(C,j)}return function(C,j,k,$){try{Ls=0;var ae=Ce(C,j,k,$);return Hn=null,ae}catch(ee){if(ee===$n||ee===al)throw ee;var be=vt(29,ee,null,C.mode);return be.lanes=$,be.return=C,be}}}var rn=xd(!0),Ed=xd(!1),xa=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ho(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ea(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ja(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Se&2)!==0){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=Qi(e),rd(e,null,a),t}return Xi(e,i,t,a),Qi(e)}function qs(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,pu(e,a)}}function fo(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var o=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?o=c=p:c=c.next=p,a=a.next}while(a!==null);c===null?o=c=t:c=c.next=t}else o=c=t;a={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var mo=!1;function $s(){if(mo){var e=qn;if(e!==null)throw e}}function Hs(e,t,a,i){mo=!1;var o=e.updateQueue;xa=!1;var c=o.firstBaseUpdate,p=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var S=y,O=S.next;S.next=null,p===null?c=O:p.next=O,p=S;var B=e.alternate;B!==null&&(B=B.updateQueue,y=B.lastBaseUpdate,y!==p&&(y===null?B.firstBaseUpdate=O:y.next=O,B.lastBaseUpdate=S))}if(c!==null){var H=o.baseState;p=0,B=O=S=null,y=c;do{var D=y.lane&-536870913,U=D!==y.lane;if(U?(me&D)===D:(i&D)===D){D!==0&&D===Bn&&(mo=!0),B!==null&&(B=B.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var W=e,se=y;D=t;var Ce=a;switch(se.tag){case 1:if(W=se.payload,typeof W=="function"){H=W.call(Ce,H,D);break e}H=W;break e;case 3:W.flags=W.flags&-65537|128;case 0:if(W=se.payload,D=typeof W=="function"?W.call(Ce,H,D):W,D==null)break e;H=w({},H,D);break e;case 2:xa=!0}}D=y.callback,D!==null&&(e.flags|=64,U&&(e.flags|=8192),U=o.callbacks,U===null?o.callbacks=[D]:U.push(D))}else U={lane:D,tag:y.tag,payload:y.payload,callback:y.callback,next:null},B===null?(O=B=U,S=H):B=B.next=U,p|=D;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;U=y,y=U.next,U.next=null,o.lastBaseUpdate=U,o.shared.pending=null}}while(!0);B===null&&(S=H),o.baseState=S,o.firstBaseUpdate=O,o.lastBaseUpdate=B,c===null&&(o.shared.lanes=0),Na|=p,e.lanes=p,e.memoizedState=H}}function jd(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function Ad(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)jd(a[e],t)}var In=_e(null),ll=_e(0);function Td(e,t){e=ca,ye(ll,e),ye(In,t),ca=e|t.baseLanes}function po(){ye(ll,ca),ye(In,In.current)}function go(){ca=ll.current,xe(In),xe(ll)}var yt=_e(null),Rt=null;function Aa(e){var t=e.alternate;ye(Be,Be.current&1),ye(yt,e),Rt===null&&(t===null||In.current!==null||t.memoizedState!==null)&&(Rt=e)}function vo(e){ye(Be,Be.current),ye(yt,e),Rt===null&&(Rt=e)}function Cd(e){e.tag===22?(ye(Be,Be.current),ye(yt,e),Rt===null&&(Rt=e)):Ta()}function Ta(){ye(Be,Be.current),ye(yt,yt.current)}function bt(e){xe(yt),Rt===e&&(Rt=null),xe(Be)}var Be=_e(0);function rl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||xc(a)||Ec(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=0,ce=null,Ae=null,He=null,ol=!1,Gn=!1,on=!1,cl=0,Is=0,Vn=null,Og=0;function ze(){throw Error(r(321))}function yo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!gt(e[a],t[a]))return!1;return!0}function bo(e,t,a,i,o,c){return ta=c,ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T.H=e===null||e.memoizedState===null?dh:Uo,on=!1,c=a(i,o),on=!1,Gn&&(c=Nd(t,a,i,o)),kd(e),c}function kd(e){T.H=Ys;var t=Ae!==null&&Ae.next!==null;if(ta=0,He=Ae=ce=null,ol=!1,Is=0,Vn=null,t)throw Error(r(300));e===null||Ie||(e=e.dependencies,e!==null&&Fi(e)&&(Ie=!0))}function Nd(e,t,a,i){ce=e;var o=0;do{if(Gn&&(Vn=null),Is=0,Gn=!1,25<=o)throw Error(r(301));if(o+=1,He=Ae=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}T.H=hh,c=t(a,i)}while(Gn);return c}function Rg(){var e=T.H,t=e.useState()[0];return t=typeof t.then=="function"?Gs(t):t,e=e.useState()[0],(Ae!==null?Ae.memoizedState:null)!==e&&(ce.flags|=1024),t}function wo(){var e=cl!==0;return cl=0,e}function So(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function _o(e){if(ol){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ol=!1}ta=0,He=Ae=ce=null,Gn=!1,Is=cl=0,Vn=null}function st(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?ce.memoizedState=He=e:He=He.next=e,He}function qe(){if(Ae===null){var e=ce.alternate;e=e!==null?e.memoizedState:null}else e=Ae.next;var t=He===null?ce.memoizedState:He.next;if(t!==null)He=t,Ae=e;else{if(e===null)throw ce.alternate===null?Error(r(467)):Error(r(310));Ae=e,e={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},He===null?ce.memoizedState=He=e:He=He.next=e}return He}function ul(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gs(e){var t=Is;return Is+=1,Vn===null&&(Vn=[]),e=wd(Vn,e,t),t=ce,(He===null?t.memoizedState:He.next)===null&&(t=t.alternate,T.H=t===null||t.memoizedState===null?dh:Uo),e}function dl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Gs(e);if(e.$$typeof===M)return Fe(e)}throw Error(r(438,String(e)))}function xo(e){var t=null,a=ce.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=ce.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=ul(),ce.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=Q;return t.index++,a}function aa(e,t){return typeof t=="function"?t(e):t}function hl(e){var t=qe();return Eo(t,Ae,e)}function Eo(e,t,a){var i=e.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=a;var o=e.baseQueue,c=i.pending;if(c!==null){if(o!==null){var p=o.next;o.next=c.next,c.next=p}t.baseQueue=o=c,i.pending=null}if(c=e.baseState,o===null)e.memoizedState=c;else{t=o.next;var y=p=null,S=null,O=t,B=!1;do{var H=O.lane&-536870913;if(H!==O.lane?(me&H)===H:(ta&H)===H){var D=O.revertLane;if(D===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),H===Bn&&(B=!0);else if((ta&D)===D){O=O.next,D===Bn&&(B=!0);continue}else H={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},S===null?(y=S=H,p=c):S=S.next=H,ce.lanes|=D,Na|=D;H=O.action,on&&a(c,H),c=O.hasEagerState?O.eagerState:a(c,H)}else D={lane:H,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},S===null?(y=S=D,p=c):S=S.next=D,ce.lanes|=H,Na|=H;O=O.next}while(O!==null&&O!==t);if(S===null?p=c:S.next=y,!gt(c,e.memoizedState)&&(Ie=!0,B&&(a=qn,a!==null)))throw a;e.memoizedState=c,e.baseState=p,e.baseQueue=S,i.lastRenderedState=c}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function jo(e){var t=qe(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var i=a.dispatch,o=a.pending,c=t.memoizedState;if(o!==null){a.pending=null;var p=o=o.next;do c=e(c,p.action),p=p.next;while(p!==o);gt(c,t.memoizedState)||(Ie=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,i]}function Od(e,t,a){var i=ce,o=qe(),c=ve;if(c){if(a===void 0)throw Error(r(407));a=a()}else a=t();var p=!gt((Ae||o).memoizedState,a);if(p&&(o.memoizedState=a,Ie=!0),o=o.queue,Co(Ud.bind(null,i,o,e),[e]),o.getSnapshot!==t||p||He!==null&&He.memoizedState.tag&1){if(i.flags|=2048,Yn(9,{destroy:void 0},Dd.bind(null,i,o,a,t),null),ke===null)throw Error(r(349));c||(ta&127)!==0||Rd(i,t,a)}return a}function Rd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ce.updateQueue,t===null?(t=ul(),ce.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Dd(e,t,a,i){t.value=a,t.getSnapshot=i,zd(t)&&Md(e)}function Ud(e,t,a){return a(function(){zd(t)&&Md(e)})}function zd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!gt(e,a)}catch{return!0}}function Md(e){var t=Wa(e,2);t!==null&&ht(t,e,2)}function Ao(e){var t=st();if(typeof e=="function"){var a=e;if(e=a(),on){ga(!0);try{a()}finally{ga(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:e},t}function Ld(e,t,a,i){return e.baseState=a,Eo(e,Ae,typeof i=="function"?i:aa)}function Dg(e,t,a,i,o){if(pl(e))throw Error(r(485));if(e=t.action,e!==null){var c={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){c.listeners.push(p)}};T.T!==null?a(!0):c.isTransition=!1,i(c),a=t.pending,a===null?(c.next=t.pending=c,Bd(t,c)):(c.next=a.next,t.pending=a.next=c)}}function Bd(e,t){var a=t.action,i=t.payload,o=e.state;if(t.isTransition){var c=T.T,p={};T.T=p;try{var y=a(o,i),S=T.S;S!==null&&S(p,y),qd(e,t,y)}catch(O){To(e,t,O)}finally{c!==null&&p.types!==null&&(c.types=p.types),T.T=c}}else try{c=a(o,i),qd(e,t,c)}catch(O){To(e,t,O)}}function qd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){$d(e,t,i)},function(i){return To(e,t,i)}):$d(e,t,a)}function $d(e,t,a){t.status="fulfilled",t.value=a,Hd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Bd(e,a)))}function To(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,Hd(t),t=t.next;while(t!==i)}e.action=null}function Hd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Id(e,t){return t}function Gd(e,t){if(ve){var a=ke.formState;if(a!==null){e:{var i=ce;if(ve){if(Oe){t:{for(var o=Oe,c=Ot;o.nodeType!==8;){if(!c){o=null;break t}if(o=Dt(o.nextSibling),o===null){o=null;break t}}c=o.data,o=c==="F!"||c==="F"?o:null}if(o){Oe=Dt(o.nextSibling),i=o.data==="F!";break e}}Sa(i)}i=!1}i&&(t=a[0])}}return a=st(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:t},a.queue=i,a=oh.bind(null,ce,i),i.dispatch=a,i=Ao(!1),c=Do.bind(null,ce,!1,i.queue),i=st(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,a=Dg.bind(null,ce,o,c,a),o.dispatch=a,i.memoizedState=e,[t,a,!1]}function Vd(e){var t=qe();return Yd(t,Ae,e)}function Yd(e,t,a){if(t=Eo(e,t,Id)[0],e=hl(aa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Gs(t)}catch(p){throw p===$n?al:p}else i=t;t=qe();var o=t.queue,c=o.dispatch;return a!==t.memoizedState&&(ce.flags|=2048,Yn(9,{destroy:void 0},Ug.bind(null,o,a),null)),[i,c,e]}function Ug(e,t){e.action=t}function Kd(e){var t=qe(),a=Ae;if(a!==null)return Yd(t,a,e);qe(),t=t.memoizedState,a=qe();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function Yn(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=ce.updateQueue,t===null&&(t=ul(),ce.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function Pd(){return qe().memoizedState}function fl(e,t,a,i){var o=st();ce.flags|=e,o.memoizedState=Yn(1|t,{destroy:void 0},a,i===void 0?null:i)}function ml(e,t,a,i){var o=qe();i=i===void 0?null:i;var c=o.memoizedState.inst;Ae!==null&&i!==null&&yo(i,Ae.memoizedState.deps)?o.memoizedState=Yn(t,c,a,i):(ce.flags|=e,o.memoizedState=Yn(1|t,c,a,i))}function Jd(e,t){fl(8390656,8,e,t)}function Co(e,t){ml(2048,8,e,t)}function zg(e){ce.flags|=4;var t=ce.updateQueue;if(t===null)t=ul(),ce.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Xd(e){var t=qe().memoizedState;return zg({ref:t,nextImpl:e}),function(){if((Se&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Qd(e,t){return ml(4,2,e,t)}function Zd(e,t){return ml(4,4,e,t)}function Wd(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fd(e,t,a){a=a!=null?a.concat([e]):null,ml(4,4,Wd.bind(null,t,e),a)}function ko(){}function eh(e,t){var a=qe();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&yo(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function th(e,t){var a=qe();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&yo(t,i[1]))return i[0];if(i=e(),on){ga(!0);try{e()}finally{ga(!1)}}return a.memoizedState=[i,t],i}function No(e,t,a){return a===void 0||(ta&1073741824)!==0&&(me&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=af(),ce.lanes|=e,Na|=e,a)}function ah(e,t,a,i){return gt(a,t)?a:In.current!==null?(e=No(e,a,i),gt(e,t)||(Ie=!0),e):(ta&42)===0||(ta&1073741824)!==0&&(me&261930)===0?(Ie=!0,e.memoizedState=a):(e=af(),ce.lanes|=e,Na|=e,t)}function nh(e,t,a,i,o){var c=q.p;q.p=c!==0&&8>c?c:8;var p=T.T,y={};T.T=y,Do(e,!1,t,a);try{var S=o(),O=T.S;if(O!==null&&O(y,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var B=Ng(S,i);Vs(e,t,B,_t(e))}else Vs(e,t,i,_t(e))}catch(H){Vs(e,t,{then:function(){},status:"rejected",reason:H},_t())}finally{q.p=c,p!==null&&y.types!==null&&(p.types=y.types),T.T=p}}function Mg(){}function Oo(e,t,a,i){if(e.tag!==5)throw Error(r(476));var o=sh(e).queue;nh(e,o,t,J,a===null?Mg:function(){return ih(e),a(i)})}function sh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:J},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ih(e){var t=sh(e);t.next===null&&(t=e.alternate.memoizedState),Vs(e,t.next.queue,{},_t())}function Ro(){return Fe(ri)}function lh(){return qe().memoizedState}function rh(){return qe().memoizedState}function Lg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=_t();e=Ea(a);var i=ja(t,e,a);i!==null&&(ht(i,t,a),qs(i,t,a)),t={cache:lo()},e.payload=t;return}t=t.return}}function Bg(e,t,a){var i=_t();a={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},pl(e)?ch(t,a):(a=Xr(e,t,a,i),a!==null&&(ht(a,e,i),uh(a,t,i)))}function oh(e,t,a){var i=_t();Vs(e,t,a,i)}function Vs(e,t,a,i){var o={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(pl(e))ch(t,o);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var p=t.lastRenderedState,y=c(p,a);if(o.hasEagerState=!0,o.eagerState=y,gt(y,p))return Xi(e,t,o,0),ke===null&&Ji(),!1}catch{}if(a=Xr(e,t,o,i),a!==null)return ht(a,e,i),uh(a,t,i),!0}return!1}function Do(e,t,a,i){if(i={lane:2,revertLane:dc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},pl(e)){if(t)throw Error(r(479))}else t=Xr(e,a,i,2),t!==null&&ht(t,e,2)}function pl(e){var t=e.alternate;return e===ce||t!==null&&t===ce}function ch(e,t){Gn=ol=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function uh(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,pu(e,a)}}var Ys={readContext:Fe,use:dl,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze};Ys.useEffectEvent=ze;var dh={readContext:Fe,use:dl,useCallback:function(e,t){return st().memoizedState=[e,t===void 0?null:t],e},useContext:Fe,useEffect:Jd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,fl(4194308,4,Wd.bind(null,t,e),a)},useLayoutEffect:function(e,t){return fl(4194308,4,e,t)},useInsertionEffect:function(e,t){fl(4,2,e,t)},useMemo:function(e,t){var a=st();t=t===void 0?null:t;var i=e();if(on){ga(!0);try{e()}finally{ga(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=st();if(a!==void 0){var o=a(t);if(on){ga(!0);try{a(t)}finally{ga(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=Bg.bind(null,ce,e),[i.memoizedState,e]},useRef:function(e){var t=st();return e={current:e},t.memoizedState=e},useState:function(e){e=Ao(e);var t=e.queue,a=oh.bind(null,ce,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:ko,useDeferredValue:function(e,t){var a=st();return No(a,e,t)},useTransition:function(){var e=Ao(!1);return e=nh.bind(null,ce,e.queue,!0,!1),st().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=ce,o=st();if(ve){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),ke===null)throw Error(r(349));(me&127)!==0||Rd(i,t,a)}o.memoizedState=a;var c={value:a,getSnapshot:t};return o.queue=c,Jd(Ud.bind(null,i,c,e),[e]),i.flags|=2048,Yn(9,{destroy:void 0},Dd.bind(null,i,c,a,t),null),a},useId:function(){var e=st(),t=ke.identifierPrefix;if(ve){var a=It,i=Ht;a=(i&~(1<<32-pt(i)-1)).toString(32)+a,t="_"+t+"R_"+a,a=cl++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Og++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ro,useFormState:Gd,useActionState:Gd,useOptimistic:function(e){var t=st();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Do.bind(null,ce,!0,a),a.dispatch=t,[e,t]},useMemoCache:xo,useCacheRefresh:function(){return st().memoizedState=Lg.bind(null,ce)},useEffectEvent:function(e){var t=st(),a={impl:e};return t.memoizedState=a,function(){if((Se&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Uo={readContext:Fe,use:dl,useCallback:eh,useContext:Fe,useEffect:Co,useImperativeHandle:Fd,useInsertionEffect:Qd,useLayoutEffect:Zd,useMemo:th,useReducer:hl,useRef:Pd,useState:function(){return hl(aa)},useDebugValue:ko,useDeferredValue:function(e,t){var a=qe();return ah(a,Ae.memoizedState,e,t)},useTransition:function(){var e=hl(aa)[0],t=qe().memoizedState;return[typeof e=="boolean"?e:Gs(e),t]},useSyncExternalStore:Od,useId:lh,useHostTransitionStatus:Ro,useFormState:Vd,useActionState:Vd,useOptimistic:function(e,t){var a=qe();return Ld(a,Ae,e,t)},useMemoCache:xo,useCacheRefresh:rh};Uo.useEffectEvent=Xd;var hh={readContext:Fe,use:dl,useCallback:eh,useContext:Fe,useEffect:Co,useImperativeHandle:Fd,useInsertionEffect:Qd,useLayoutEffect:Zd,useMemo:th,useReducer:jo,useRef:Pd,useState:function(){return jo(aa)},useDebugValue:ko,useDeferredValue:function(e,t){var a=qe();return Ae===null?No(a,e,t):ah(a,Ae.memoizedState,e,t)},useTransition:function(){var e=jo(aa)[0],t=qe().memoizedState;return[typeof e=="boolean"?e:Gs(e),t]},useSyncExternalStore:Od,useId:lh,useHostTransitionStatus:Ro,useFormState:Kd,useActionState:Kd,useOptimistic:function(e,t){var a=qe();return Ae!==null?Ld(a,Ae,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:xo,useCacheRefresh:rh};hh.useEffectEvent=Xd;function zo(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Mo={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=_t(),o=Ea(i);o.payload=t,a!=null&&(o.callback=a),t=ja(e,o,i),t!==null&&(ht(t,e,i),qs(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=_t(),o=Ea(i);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=ja(e,o,i),t!==null&&(ht(t,e,i),qs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=_t(),i=Ea(a);i.tag=2,t!=null&&(i.callback=t),t=ja(e,i,a),t!==null&&(ht(t,e,a),qs(t,e,a))}};function fh(e,t,a,i,o,c,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,c,p):t.prototype&&t.prototype.isPureReactComponent?!Os(a,i)||!Os(o,c):!0}function mh(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&Mo.enqueueReplaceState(t,t.state,null)}function cn(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function ph(e){Pi(e)}function gh(e){console.error(e)}function vh(e){Pi(e)}function gl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function yh(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Lo(e,t,a){return a=Ea(a),a.tag=3,a.payload={element:null},a.callback=function(){gl(e,t)},a}function bh(e){return e=Ea(e),e.tag=3,e}function wh(e,t,a,i){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var c=i.value;e.payload=function(){return o(c)},e.callback=function(){yh(t,a,i)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){yh(t,a,i),typeof o!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var y=i.stack;this.componentDidCatch(i.value,{componentStack:y!==null?y:""})})}function qg(e,t,a,i,o){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&Ln(t,a,o,!0),a=yt.current,a!==null){switch(a.tag){case 31:case 13:return Rt===null?Cl():a.alternate===null&&Me===0&&(Me=3),a.flags&=-257,a.flags|=65536,a.lanes=o,i===nl?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),oc(e,i,o)),!1;case 22:return a.flags|=65536,i===nl?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),oc(e,i,o)),!1}throw Error(r(435,a.tag))}return oc(e,i,o),Cl(),!1}if(ve)return t=yt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==to&&(e=Error(r(422),{cause:i}),Us(Ct(e,a)))):(i!==to&&(t=Error(r(423),{cause:i}),Us(Ct(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=Ct(i,a),o=Lo(e.stateNode,i,o),fo(e,o),Me!==4&&(Me=2)),!1;var c=Error(r(520),{cause:i});if(c=Ct(c,a),Fs===null?Fs=[c]:Fs.push(c),Me!==4&&(Me=2),t===null)return!0;i=Ct(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=Lo(a.stateNode,i,e),fo(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Oa===null||!Oa.has(c))))return a.flags|=65536,o&=-o,a.lanes|=o,o=bh(o),wh(o,e,a,i),fo(a,o),!1}a=a.return}while(a!==null);return!1}var Bo=Error(r(461)),Ie=!1;function et(e,t,a,i){t.child=e===null?Ed(t,null,a,i):rn(t,e.child,a,i)}function Sh(e,t,a,i,o){a=a.render;var c=t.ref;if("ref"in i){var p={};for(var y in i)y!=="ref"&&(p[y]=i[y])}else p=i;return an(t),i=bo(e,t,a,p,c,o),y=wo(),e!==null&&!Ie?(So(e,t,o),na(e,t,o)):(ve&&y&&Fr(t),t.flags|=1,et(e,t,i,o),t.child)}function _h(e,t,a,i,o){if(e===null){var c=a.type;return typeof c=="function"&&!Qr(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,xh(e,t,c,i,o)):(e=Zi(a.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Ko(e,o)){var p=c.memoizedProps;if(a=a.compare,a=a!==null?a:Os,a(p,i)&&e.ref===t.ref)return na(e,t,o)}return t.flags|=1,e=Zt(c,i),e.ref=t.ref,e.return=t,t.child=e}function xh(e,t,a,i,o){if(e!==null){var c=e.memoizedProps;if(Os(c,i)&&e.ref===t.ref)if(Ie=!1,t.pendingProps=i=c,Ko(e,o))(e.flags&131072)!==0&&(Ie=!0);else return t.lanes=e.lanes,na(e,t,o)}return qo(e,t,a,i,o)}function Eh(e,t,a,i){var o=i.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|a:a,e!==null){for(i=t.child=e.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~c}else i=0,t.child=null;return jh(e,t,c,a,i)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&tl(t,c!==null?c.cachePool:null),c!==null?Td(t,c):po(),Cd(t);else return i=t.lanes=536870912,jh(e,t,c!==null?c.baseLanes|a:a,a,i)}else c!==null?(tl(t,c.cachePool),Td(t,c),Ta(),t.memoizedState=null):(e!==null&&tl(t,null),po(),Ta());return et(e,t,o,a),t.child}function Ks(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function jh(e,t,a,i,o){var c=oo();return c=c===null?null:{parent:$e._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&tl(t,null),po(),Cd(t),e!==null&&Ln(e,t,i,!0),t.childLanes=o,null}function vl(e,t){return t=bl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ah(e,t,a){return rn(t,e.child,null,a),e=vl(t,t.pendingProps),e.flags|=2,bt(t),t.memoizedState=null,e}function $g(e,t,a){var i=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ve){if(i.mode==="hidden")return e=vl(t,i),t.lanes=536870912,Ks(null,e);if(vo(t),(e=Oe)?(e=qf(e,Ot),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Ht,overflow:It}:null,retryLane:536870912,hydrationErrors:null},a=cd(e),a.return=t,t.child=a,We=t,Oe=null)):e=null,e===null)throw Sa(t);return t.lanes=536870912,null}return vl(t,i)}var c=e.memoizedState;if(c!==null){var p=c.dehydrated;if(vo(t),o)if(t.flags&256)t.flags&=-257,t=Ah(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(Ie||Ln(e,t,a,!1),o=(a&e.childLanes)!==0,Ie||o){if(i=ke,i!==null&&(p=gu(i,a),p!==0&&p!==c.retryLane))throw c.retryLane=p,Wa(e,p),ht(i,e,p),Bo;Cl(),t=Ah(e,t,a)}else e=c.treeContext,Oe=Dt(p.nextSibling),We=t,ve=!0,wa=null,Ot=!1,e!==null&&hd(t,e),t=vl(t,i),t.flags|=4096;return t}return e=Zt(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function yl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function qo(e,t,a,i,o){return an(t),a=bo(e,t,a,i,void 0,o),i=wo(),e!==null&&!Ie?(So(e,t,o),na(e,t,o)):(ve&&i&&Fr(t),t.flags|=1,et(e,t,a,o),t.child)}function Th(e,t,a,i,o,c){return an(t),t.updateQueue=null,a=Nd(t,i,a,o),kd(e),i=wo(),e!==null&&!Ie?(So(e,t,c),na(e,t,c)):(ve&&i&&Fr(t),t.flags|=1,et(e,t,a,c),t.child)}function Ch(e,t,a,i,o){if(an(t),t.stateNode===null){var c=Dn,p=a.contextType;typeof p=="object"&&p!==null&&(c=Fe(p)),c=new a(i,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Mo,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=i,c.state=t.memoizedState,c.refs={},uo(t),p=a.contextType,c.context=typeof p=="object"&&p!==null?Fe(p):Dn,c.state=t.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(zo(t,a,p,i),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(p=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),p!==c.state&&Mo.enqueueReplaceState(c,c.state,null),Hs(t,i,c,o),$s(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){c=t.stateNode;var y=t.memoizedProps,S=cn(a,y);c.props=S;var O=c.context,B=a.contextType;p=Dn,typeof B=="object"&&B!==null&&(p=Fe(B));var H=a.getDerivedStateFromProps;B=typeof H=="function"||typeof c.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,B||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(y||O!==p)&&mh(t,c,i,p),xa=!1;var D=t.memoizedState;c.state=D,Hs(t,i,c,o),$s(),O=t.memoizedState,y||D!==O||xa?(typeof H=="function"&&(zo(t,a,H,i),O=t.memoizedState),(S=xa||fh(t,a,S,i,D,O,p))?(B||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=O),c.props=i,c.state=O,c.context=p,i=S):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{c=t.stateNode,ho(e,t),p=t.memoizedProps,B=cn(a,p),c.props=B,H=t.pendingProps,D=c.context,O=a.contextType,S=Dn,typeof O=="object"&&O!==null&&(S=Fe(O)),y=a.getDerivedStateFromProps,(O=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p!==H||D!==S)&&mh(t,c,i,S),xa=!1,D=t.memoizedState,c.state=D,Hs(t,i,c,o),$s();var U=t.memoizedState;p!==H||D!==U||xa||e!==null&&e.dependencies!==null&&Fi(e.dependencies)?(typeof y=="function"&&(zo(t,a,y,i),U=t.memoizedState),(B=xa||fh(t,a,B,i,D,U,S)||e!==null&&e.dependencies!==null&&Fi(e.dependencies))?(O||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(i,U,S),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(i,U,S)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=U),c.props=i,c.state=U,c.context=S,i=B):(typeof c.componentDidUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),i=!1)}return c=i,yl(e,t),i=(t.flags&128)!==0,c||i?(c=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&i?(t.child=rn(t,e.child,null,o),t.child=rn(t,null,a,o)):et(e,t,a,o),t.memoizedState=c.state,e=t.child):e=na(e,t,o),e}function kh(e,t,a,i){return en(),t.flags|=256,et(e,t,a,i),t.child}var $o={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ho(e){return{baseLanes:e,cachePool:yd()}}function Io(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=St),e}function Nh(e,t,a){var i=t.pendingProps,o=!1,c=(t.flags&128)!==0,p;if((p=c)||(p=e!==null&&e.memoizedState===null?!1:(Be.current&2)!==0),p&&(o=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(ve){if(o?Aa(t):Ta(),(e=Oe)?(e=qf(e,Ot),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Ht,overflow:It}:null,retryLane:536870912,hydrationErrors:null},a=cd(e),a.return=t,t.child=a,We=t,Oe=null)):e=null,e===null)throw Sa(t);return Ec(e)?t.lanes=32:t.lanes=536870912,null}var y=i.children;return i=i.fallback,o?(Ta(),o=t.mode,y=bl({mode:"hidden",children:y},o),i=Fa(i,o,a,null),y.return=t,i.return=t,y.sibling=i,t.child=y,i=t.child,i.memoizedState=Ho(a),i.childLanes=Io(e,p,a),t.memoizedState=$o,Ks(null,i)):(Aa(t),Go(t,y))}var S=e.memoizedState;if(S!==null&&(y=S.dehydrated,y!==null)){if(c)t.flags&256?(Aa(t),t.flags&=-257,t=Vo(e,t,a)):t.memoizedState!==null?(Ta(),t.child=e.child,t.flags|=128,t=null):(Ta(),y=i.fallback,o=t.mode,i=bl({mode:"visible",children:i.children},o),y=Fa(y,o,a,null),y.flags|=2,i.return=t,y.return=t,i.sibling=y,t.child=i,rn(t,e.child,null,a),i=t.child,i.memoizedState=Ho(a),i.childLanes=Io(e,p,a),t.memoizedState=$o,t=Ks(null,i));else if(Aa(t),Ec(y)){if(p=y.nextSibling&&y.nextSibling.dataset,p)var O=p.dgst;p=O,i=Error(r(419)),i.stack="",i.digest=p,Us({value:i,source:null,stack:null}),t=Vo(e,t,a)}else if(Ie||Ln(e,t,a,!1),p=(a&e.childLanes)!==0,Ie||p){if(p=ke,p!==null&&(i=gu(p,a),i!==0&&i!==S.retryLane))throw S.retryLane=i,Wa(e,i),ht(p,e,i),Bo;xc(y)||Cl(),t=Vo(e,t,a)}else xc(y)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Oe=Dt(y.nextSibling),We=t,ve=!0,wa=null,Ot=!1,e!==null&&hd(t,e),t=Go(t,i.children),t.flags|=4096);return t}return o?(Ta(),y=i.fallback,o=t.mode,S=e.child,O=S.sibling,i=Zt(S,{mode:"hidden",children:i.children}),i.subtreeFlags=S.subtreeFlags&65011712,O!==null?y=Zt(O,y):(y=Fa(y,o,a,null),y.flags|=2),y.return=t,i.return=t,i.sibling=y,t.child=i,Ks(null,i),i=t.child,y=e.child.memoizedState,y===null?y=Ho(a):(o=y.cachePool,o!==null?(S=$e._currentValue,o=o.parent!==S?{parent:S,pool:S}:o):o=yd(),y={baseLanes:y.baseLanes|a,cachePool:o}),i.memoizedState=y,i.childLanes=Io(e,p,a),t.memoizedState=$o,Ks(e.child,i)):(Aa(t),a=e.child,e=a.sibling,a=Zt(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=a,t.memoizedState=null,a)}function Go(e,t){return t=bl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function bl(e,t){return e=vt(22,e,null,t),e.lanes=0,e}function Vo(e,t,a){return rn(t,e.child,null,a),e=Go(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Oh(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),so(e.return,t,a)}function Yo(e,t,a,i,o,c){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:o,treeForkCount:c}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=i,p.tail=a,p.tailMode=o,p.treeForkCount=c)}function Rh(e,t,a){var i=t.pendingProps,o=i.revealOrder,c=i.tail;i=i.children;var p=Be.current,y=(p&2)!==0;if(y?(p=p&1|2,t.flags|=128):p&=1,ye(Be,p),et(e,t,i,a),i=ve?Ds:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oh(e,a,t);else if(e.tag===19)Oh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&rl(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),Yo(t,!1,o,a,c,i);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&rl(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}Yo(t,!0,a,null,c,i);break;case"together":Yo(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function na(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Na|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Ln(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=Zt(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Zt(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Ko(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Fi(e)))}function Hg(e,t,a){switch(t.tag){case 3:Ni(t,t.stateNode.containerInfo),_a(t,$e,e.memoizedState.cache),en();break;case 27:case 5:pr(t);break;case 4:Ni(t,t.stateNode.containerInfo);break;case 10:_a(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,vo(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Aa(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Nh(e,t,a):(Aa(t),e=na(e,t,a),e!==null?e.sibling:null);Aa(t);break;case 19:var o=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(Ln(e,t,a,!1),i=(a&t.childLanes)!==0),o){if(i)return Rh(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ye(Be,Be.current),i)break;return null;case 22:return t.lanes=0,Eh(e,t,a,t.pendingProps);case 24:_a(t,$e,e.memoizedState.cache)}return na(e,t,a)}function Dh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ie=!0;else{if(!Ko(e,a)&&(t.flags&128)===0)return Ie=!1,Hg(e,t,a);Ie=(e.flags&131072)!==0}else Ie=!1,ve&&(t.flags&1048576)!==0&&dd(t,Ds,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=sn(t.elementType),t.type=e,typeof e=="function")Qr(e)?(i=cn(e,i),t.tag=1,t=Ch(null,t,e,i,a)):(t.tag=0,t=qo(null,t,e,i,a));else{if(e!=null){var o=e.$$typeof;if(o===V){t.tag=11,t=Sh(null,t,e,i,a);break e}else if(o===Y){t.tag=14,t=_h(null,t,e,i,a);break e}}throw t=X(e)||e,Error(r(306,t,""))}}return t;case 0:return qo(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,o=cn(i,t.pendingProps),Ch(e,t,i,o,a);case 3:e:{if(Ni(t,t.stateNode.containerInfo),e===null)throw Error(r(387));i=t.pendingProps;var c=t.memoizedState;o=c.element,ho(e,t),Hs(t,i,null,a);var p=t.memoizedState;if(i=p.cache,_a(t,$e,i),i!==c.cache&&io(t,[$e],a,!0),$s(),i=p.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=kh(e,t,i,a);break e}else if(i!==o){o=Ct(Error(r(424)),t),Us(o),t=kh(e,t,i,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Oe=Dt(e.firstChild),We=t,ve=!0,wa=null,Ot=!0,a=Ed(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(en(),i===o){t=na(e,t,a);break e}et(e,t,i,a)}t=t.child}return t;case 26:return yl(e,t),e===null?(a=Yf(t.type,null,t.pendingProps,null))?t.memoizedState=a:ve||(a=t.type,e=t.pendingProps,i=zl(pa.current).createElement(a),i[Ze]=t,i[lt]=e,tt(i,a,e),Je(i),t.stateNode=i):t.memoizedState=Yf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return pr(t),e===null&&ve&&(i=t.stateNode=If(t.type,t.pendingProps,pa.current),We=t,Ot=!0,o=Oe,za(t.type)?(jc=o,Oe=Dt(i.firstChild)):Oe=o),et(e,t,t.pendingProps.children,a),yl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ve&&((o=i=Oe)&&(i=vv(i,t.type,t.pendingProps,Ot),i!==null?(t.stateNode=i,We=t,Oe=Dt(i.firstChild),Ot=!1,o=!0):o=!1),o||Sa(t)),pr(t),o=t.type,c=t.pendingProps,p=e!==null?e.memoizedProps:null,i=c.children,wc(o,c)?i=null:p!==null&&wc(o,p)&&(t.flags|=32),t.memoizedState!==null&&(o=bo(e,t,Rg,null,null,a),ri._currentValue=o),yl(e,t),et(e,t,i,a),t.child;case 6:return e===null&&ve&&((e=a=Oe)&&(a=yv(a,t.pendingProps,Ot),a!==null?(t.stateNode=a,We=t,Oe=null,e=!0):e=!1),e||Sa(t)),null;case 13:return Nh(e,t,a);case 4:return Ni(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=rn(t,null,i,a):et(e,t,i,a),t.child;case 11:return Sh(e,t,t.type,t.pendingProps,a);case 7:return et(e,t,t.pendingProps,a),t.child;case 8:return et(e,t,t.pendingProps.children,a),t.child;case 12:return et(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,_a(t,t.type,i.value),et(e,t,i.children,a),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,an(t),o=Fe(o),i=i(o),t.flags|=1,et(e,t,i,a),t.child;case 14:return _h(e,t,t.type,t.pendingProps,a);case 15:return xh(e,t,t.type,t.pendingProps,a);case 19:return Rh(e,t,a);case 31:return $g(e,t,a);case 22:return Eh(e,t,a,t.pendingProps);case 24:return an(t),i=Fe($e),e===null?(o=oo(),o===null&&(o=ke,c=lo(),o.pooledCache=c,c.refCount++,c!==null&&(o.pooledCacheLanes|=a),o=c),t.memoizedState={parent:i,cache:o},uo(t),_a(t,$e,o)):((e.lanes&a)!==0&&(ho(e,t),Hs(t,null,null,a),$s()),o=e.memoizedState,c=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),_a(t,$e,i)):(i=c.cache,_a(t,$e,i),i!==o.cache&&io(t,[$e],a,!0))),et(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function sa(e){e.flags|=4}function Po(e,t,a,i,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(rf())e.flags|=8192;else throw ln=nl,co}else e.flags&=-16777217}function Uh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Qf(t))if(rf())e.flags|=8192;else throw ln=nl,co}function wl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?fu():536870912,e.lanes|=t,Xn|=t)}function Ps(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function Ig(e,t,a){var i=t.pendingProps;switch(eo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return Re(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ea($e),bn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Mn(t)?sa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ao())),Re(t),null;case 26:var o=t.type,c=t.memoizedState;return e===null?(sa(t),c!==null?(Re(t),Uh(t,c)):(Re(t),Po(t,o,null,i,a))):c?c!==e.memoizedState?(sa(t),Re(t),Uh(t,c)):(Re(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&sa(t),Re(t),Po(t,o,e,i,a)),null;case 27:if(Oi(t),a=pa.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&sa(t);else{if(!i){if(t.stateNode===null)throw Error(r(166));return Re(t),null}e=De.current,Mn(t)?fd(t):(e=If(o,i,a),t.stateNode=e,sa(t))}return Re(t),null;case 5:if(Oi(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&sa(t);else{if(!i){if(t.stateNode===null)throw Error(r(166));return Re(t),null}if(c=De.current,Mn(t))fd(t);else{var p=zl(pa.current);switch(c){case 1:c=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:c=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":c=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":c=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":c=p.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof i.is=="string"?p.createElement("select",{is:i.is}):p.createElement("select"),i.multiple?c.multiple=!0:i.size&&(c.size=i.size);break;default:c=typeof i.is=="string"?p.createElement(o,{is:i.is}):p.createElement(o)}}c[Ze]=t,c[lt]=i;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)c.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=c;e:switch(tt(c,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&sa(t)}}return Re(t),Po(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&sa(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(r(166));if(e=pa.current,Mn(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,o=We,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[Ze]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||Of(e.nodeValue,a)),e||Sa(t,!0)}else e=zl(e).createTextNode(i),e[Ze]=t,t.stateNode=e}return Re(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(i=Mn(t),a!==null){if(e===null){if(!i)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Ze]=t}else en(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Re(t),e=!1}else a=ao(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(bt(t),t):(bt(t),null);if((t.flags&128)!==0)throw Error(r(558))}return Re(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Mn(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(r(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));o[Ze]=t}else en(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Re(t),o=!1}else o=ao(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(bt(t),t):(bt(t),null)}return bt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=i!==null,e=e!==null&&e.memoizedState!==null,a&&(i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),wl(t,t.updateQueue),Re(t),null);case 4:return bn(),e===null&&pc(t.stateNode.containerInfo),Re(t),null;case 10:return ea(t.type),Re(t),null;case 19:if(xe(Be),i=t.memoizedState,i===null)return Re(t),null;if(o=(t.flags&128)!==0,c=i.rendering,c===null)if(o)Ps(i,!1);else{if(Me!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=rl(e),c!==null){for(t.flags|=128,Ps(i,!1),e=c.updateQueue,t.updateQueue=e,wl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)od(a,e),a=a.sibling;return ye(Be,Be.current&1|2),ve&&Wt(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&ft()>jl&&(t.flags|=128,o=!0,Ps(i,!1),t.lanes=4194304)}else{if(!o)if(e=rl(c),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,wl(t,e),Ps(i,!0),i.tail===null&&i.tailMode==="hidden"&&!c.alternate&&!ve)return Re(t),null}else 2*ft()-i.renderingStartTime>jl&&a!==536870912&&(t.flags|=128,o=!0,Ps(i,!1),t.lanes=4194304);i.isBackwards?(c.sibling=t.child,t.child=c):(e=i.last,e!==null?e.sibling=c:t.child=c,i.last=c)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ft(),e.sibling=null,a=Be.current,ye(Be,o?a&1|2:a&1),ve&&Wt(t,i.treeForkCount),e):(Re(t),null);case 22:case 23:return bt(t),go(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),a=t.updateQueue,a!==null&&wl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&xe(nn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ea($e),Re(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function Gg(e,t){switch(eo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ea($e),bn(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Oi(t),null;case 31:if(t.memoizedState!==null){if(bt(t),t.alternate===null)throw Error(r(340));en()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(bt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));en()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(Be),null;case 4:return bn(),null;case 10:return ea(t.type),null;case 22:case 23:return bt(t),go(),e!==null&&xe(nn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ea($e),null;case 25:return null;default:return null}}function zh(e,t){switch(eo(t),t.tag){case 3:ea($e),bn();break;case 26:case 27:case 5:Oi(t);break;case 4:bn();break;case 31:t.memoizedState!==null&&bt(t);break;case 13:bt(t);break;case 19:xe(Be);break;case 10:ea(t.type);break;case 22:case 23:bt(t),go(),e!==null&&xe(nn);break;case 24:ea($e)}}function Js(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var o=i.next;a=o;do{if((a.tag&e)===e){i=void 0;var c=a.create,p=a.inst;i=c(),p.destroy=i}a=a.next}while(a!==o)}}catch(y){je(t,t.return,y)}}function Ca(e,t,a){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var c=o.next;i=c;do{if((i.tag&e)===e){var p=i.inst,y=p.destroy;if(y!==void 0){p.destroy=void 0,o=t;var S=a,O=y;try{O()}catch(B){je(o,S,B)}}}i=i.next}while(i!==c)}}catch(B){je(t,t.return,B)}}function Mh(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Ad(t,a)}catch(i){je(e,e.return,i)}}}function Lh(e,t,a){a.props=cn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){je(e,t,i)}}function Xs(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(o){je(e,t,o)}}function Gt(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(o){je(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){je(e,t,o)}else a.current=null}function Bh(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(o){je(e,e.return,o)}}function Jo(e,t,a){try{var i=e.stateNode;dv(i,e.type,a,t),i[lt]=t}catch(o){je(e,e.return,o)}}function qh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&za(e.type)||e.tag===4}function Xo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&za(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qo(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Xt));else if(i!==4&&(i===27&&za(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Qo(e,t,a),e=e.sibling;e!==null;)Qo(e,t,a),e=e.sibling}function Sl(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&za(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Sl(e,t,a),e=e.sibling;e!==null;)Sl(e,t,a),e=e.sibling}function $h(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);tt(t,i,a),t[Ze]=e,t[lt]=a}catch(c){je(e,e.return,c)}}var ia=!1,Ge=!1,Zo=!1,Hh=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Vg(e,t){if(e=e.containerInfo,yc=Il,e=Fu(e),Gr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var o=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var p=0,y=-1,S=-1,O=0,B=0,H=e,D=null;t:for(;;){for(var U;H!==a||o!==0&&H.nodeType!==3||(y=p+o),H!==c||i!==0&&H.nodeType!==3||(S=p+i),H.nodeType===3&&(p+=H.nodeValue.length),(U=H.firstChild)!==null;)D=H,H=U;for(;;){if(H===e)break t;if(D===a&&++O===o&&(y=p),D===c&&++B===i&&(S=p),(U=H.nextSibling)!==null)break;H=D,D=H.parentNode}H=U}a=y===-1||S===-1?null:{start:y,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(bc={focusedElem:e,selectionRange:a},Il=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){switch(t=Xe,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,o=c.memoizedProps,c=c.memoizedState,i=a.stateNode;try{var W=cn(a.type,o);e=i.getSnapshotBeforeUpdate(W,c),i.__reactInternalSnapshotBeforeUpdate=e}catch(se){je(a,a.return,se)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)_c(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_c(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}}function Ih(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:ra(e,a),i&4&&Js(5,a);break;case 1:if(ra(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(p){je(a,a.return,p)}else{var o=cn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){je(a,a.return,p)}}i&64&&Mh(a),i&512&&Xs(a,a.return);break;case 3:if(ra(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ad(e,t)}catch(p){je(a,a.return,p)}}break;case 27:t===null&&i&4&&$h(a);case 26:case 5:ra(e,a),t===null&&i&4&&Bh(a),i&512&&Xs(a,a.return);break;case 12:ra(e,a);break;case 31:ra(e,a),i&4&&Yh(e,a);break;case 13:ra(e,a),i&4&&Kh(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Fg.bind(null,a),bv(e,a))));break;case 22:if(i=a.memoizedState!==null||ia,!i){t=t!==null&&t.memoizedState!==null||Ge,o=ia;var c=Ge;ia=i,(Ge=t)&&!c?oa(e,a,(a.subtreeFlags&8772)!==0):ra(e,a),ia=o,Ge=c}break;case 30:break;default:ra(e,a)}}function Gh(e){var t=e.alternate;t!==null&&(e.alternate=null,Gh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ar(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ue=null,ot=!1;function la(e,t,a){for(a=a.child;a!==null;)Vh(e,t,a),a=a.sibling}function Vh(e,t,a){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(bs,a)}catch{}switch(a.tag){case 26:Ge||Gt(a,t),la(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ge||Gt(a,t);var i=Ue,o=ot;za(a.type)&&(Ue=a.stateNode,ot=!1),la(e,t,a),si(a.stateNode),Ue=i,ot=o;break;case 5:Ge||Gt(a,t);case 6:if(i=Ue,o=ot,Ue=null,la(e,t,a),Ue=i,ot=o,Ue!==null)if(ot)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(a.stateNode)}catch(c){je(a,t,c)}else try{Ue.removeChild(a.stateNode)}catch(c){je(a,t,c)}break;case 18:Ue!==null&&(ot?(e=Ue,Lf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ns(e)):Lf(Ue,a.stateNode));break;case 4:i=Ue,o=ot,Ue=a.stateNode.containerInfo,ot=!0,la(e,t,a),Ue=i,ot=o;break;case 0:case 11:case 14:case 15:Ca(2,a,t),Ge||Ca(4,a,t),la(e,t,a);break;case 1:Ge||(Gt(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&Lh(a,t,i)),la(e,t,a);break;case 21:la(e,t,a);break;case 22:Ge=(i=Ge)||a.memoizedState!==null,la(e,t,a),Ge=i;break;default:la(e,t,a)}}function Yh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ns(e)}catch(a){je(t,t.return,a)}}}function Kh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ns(e)}catch(a){je(t,t.return,a)}}function Yg(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Hh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Hh),t;default:throw Error(r(435,e.tag))}}function _l(e,t){var a=Yg(e);t.forEach(function(i){if(!a.has(i)){a.add(i);var o=ev.bind(null,e,i);i.then(o,o)}})}function ct(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var o=a[i],c=e,p=t,y=p;e:for(;y!==null;){switch(y.tag){case 27:if(za(y.type)){Ue=y.stateNode,ot=!1;break e}break;case 5:Ue=y.stateNode,ot=!1;break e;case 3:case 4:Ue=y.stateNode.containerInfo,ot=!0;break e}y=y.return}if(Ue===null)throw Error(r(160));Vh(c,p,o),Ue=null,ot=!1,c=o.alternate,c!==null&&(c.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ph(t,e),t=t.sibling}var Mt=null;function Ph(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ct(t,e),ut(e),i&4&&(Ca(3,e,e.return),Js(3,e),Ca(5,e,e.return));break;case 1:ct(t,e),ut(e),i&512&&(Ge||a===null||Gt(a,a.return)),i&64&&ia&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var o=Mt;if(ct(t,e),ut(e),i&512&&(Ge||a===null||Gt(a,a.return)),i&4){var c=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":c=o.getElementsByTagName("title")[0],(!c||c[_s]||c[Ze]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=o.createElement(i),o.head.insertBefore(c,o.querySelector("head > title"))),tt(c,i,a),c[Ze]=e,Je(c),i=c;break e;case"link":var p=Jf("link","href",o).get(i+(a.href||""));if(p){for(var y=0;y<p.length;y++)if(c=p[y],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(y,1);break t}}c=o.createElement(i),tt(c,i,a),o.head.appendChild(c);break;case"meta":if(p=Jf("meta","content",o).get(i+(a.content||""))){for(y=0;y<p.length;y++)if(c=p[y],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(y,1);break t}}c=o.createElement(i),tt(c,i,a),o.head.appendChild(c);break;default:throw Error(r(468,i))}c[Ze]=e,Je(c),i=c}e.stateNode=i}else Xf(o,e.type,e.stateNode);else e.stateNode=Pf(o,i,e.memoizedProps);else c!==i?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,i===null?Xf(o,e.type,e.stateNode):Pf(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Jo(e,e.memoizedProps,a.memoizedProps)}break;case 27:ct(t,e),ut(e),i&512&&(Ge||a===null||Gt(a,a.return)),a!==null&&i&4&&Jo(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ct(t,e),ut(e),i&512&&(Ge||a===null||Gt(a,a.return)),e.flags&32){o=e.stateNode;try{An(o,"")}catch(W){je(e,e.return,W)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,Jo(e,o,a!==null?a.memoizedProps:o)),i&1024&&(Zo=!0);break;case 6:if(ct(t,e),ut(e),i&4){if(e.stateNode===null)throw Error(r(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(W){je(e,e.return,W)}}break;case 3:if(Bl=null,o=Mt,Mt=Ml(t.containerInfo),ct(t,e),Mt=o,ut(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{ns(t.containerInfo)}catch(W){je(e,e.return,W)}Zo&&(Zo=!1,Jh(e));break;case 4:i=Mt,Mt=Ml(e.stateNode.containerInfo),ct(t,e),ut(e),Mt=i;break;case 12:ct(t,e),ut(e);break;case 31:ct(t,e),ut(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,_l(e,i)));break;case 13:ct(t,e),ut(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(El=ft()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,_l(e,i)));break;case 22:o=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,O=ia,B=Ge;if(ia=O||o,Ge=B||S,ct(t,e),Ge=B,ia=O,ut(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||S||ia||Ge||un(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(c=S.stateNode,o)p=c.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{y=S.stateNode;var H=S.memoizedProps.style,D=H!=null&&H.hasOwnProperty("display")?H.display:null;y.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(W){je(S,S.return,W)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=o?"":S.memoizedProps}catch(W){je(S,S.return,W)}}}else if(t.tag===18){if(a===null){S=t;try{var U=S.stateNode;o?Bf(U,!0):Bf(S.stateNode,!1)}catch(W){je(S,S.return,W)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,_l(e,a))));break;case 19:ct(t,e),ut(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,_l(e,i)));break;case 30:break;case 21:break;default:ct(t,e),ut(e)}}function ut(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(qh(i)){a=i;break}i=i.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var o=a.stateNode,c=Xo(e);Sl(e,c,o);break;case 5:var p=a.stateNode;a.flags&32&&(An(p,""),a.flags&=-33);var y=Xo(e);Sl(e,y,p);break;case 3:case 4:var S=a.stateNode.containerInfo,O=Xo(e);Qo(e,O,S);break;default:throw Error(r(161))}}catch(B){je(e,e.return,B)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Jh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ra(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ih(e,t.alternate,t),t=t.sibling}function un(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ca(4,t,t.return),un(t);break;case 1:Gt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Lh(t,t.return,a),un(t);break;case 27:si(t.stateNode);case 26:case 5:Gt(t,t.return),un(t);break;case 22:t.memoizedState===null&&un(t);break;case 30:un(t);break;default:un(t)}e=e.sibling}}function oa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,c=t,p=c.flags;switch(c.tag){case 0:case 11:case 15:oa(o,c,a),Js(4,c);break;case 1:if(oa(o,c,a),i=c,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(O){je(i,i.return,O)}if(i=c,o=i.updateQueue,o!==null){var y=i.stateNode;try{var S=o.shared.hiddenCallbacks;if(S!==null)for(o.shared.hiddenCallbacks=null,o=0;o<S.length;o++)jd(S[o],y)}catch(O){je(i,i.return,O)}}a&&p&64&&Mh(c),Xs(c,c.return);break;case 27:$h(c);case 26:case 5:oa(o,c,a),a&&i===null&&p&4&&Bh(c),Xs(c,c.return);break;case 12:oa(o,c,a);break;case 31:oa(o,c,a),a&&p&4&&Yh(o,c);break;case 13:oa(o,c,a),a&&p&4&&Kh(o,c);break;case 22:c.memoizedState===null&&oa(o,c,a),Xs(c,c.return);break;case 30:break;default:oa(o,c,a)}t=t.sibling}}function Wo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&zs(a))}function Fo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zs(e))}function Lt(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xh(e,t,a,i),t=t.sibling}function Xh(e,t,a,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Lt(e,t,a,i),o&2048&&Js(9,t);break;case 1:Lt(e,t,a,i);break;case 3:Lt(e,t,a,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zs(e)));break;case 12:if(o&2048){Lt(e,t,a,i),e=t.stateNode;try{var c=t.memoizedProps,p=c.id,y=c.onPostCommit;typeof y=="function"&&y(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){je(t,t.return,S)}}else Lt(e,t,a,i);break;case 31:Lt(e,t,a,i);break;case 13:Lt(e,t,a,i);break;case 23:break;case 22:c=t.stateNode,p=t.alternate,t.memoizedState!==null?c._visibility&2?Lt(e,t,a,i):Qs(e,t):c._visibility&2?Lt(e,t,a,i):(c._visibility|=2,Kn(e,t,a,i,(t.subtreeFlags&10256)!==0||!1)),o&2048&&Wo(p,t);break;case 24:Lt(e,t,a,i),o&2048&&Fo(t.alternate,t);break;default:Lt(e,t,a,i)}}function Kn(e,t,a,i,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,p=t,y=a,S=i,O=p.flags;switch(p.tag){case 0:case 11:case 15:Kn(c,p,y,S,o),Js(8,p);break;case 23:break;case 22:var B=p.stateNode;p.memoizedState!==null?B._visibility&2?Kn(c,p,y,S,o):Qs(c,p):(B._visibility|=2,Kn(c,p,y,S,o)),o&&O&2048&&Wo(p.alternate,p);break;case 24:Kn(c,p,y,S,o),o&&O&2048&&Fo(p.alternate,p);break;default:Kn(c,p,y,S,o)}t=t.sibling}}function Qs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,o=i.flags;switch(i.tag){case 22:Qs(a,i),o&2048&&Wo(i.alternate,i);break;case 24:Qs(a,i),o&2048&&Fo(i.alternate,i);break;default:Qs(a,i)}t=t.sibling}}var Zs=8192;function Pn(e,t,a){if(e.subtreeFlags&Zs)for(e=e.child;e!==null;)Qh(e,t,a),e=e.sibling}function Qh(e,t,a){switch(e.tag){case 26:Pn(e,t,a),e.flags&Zs&&e.memoizedState!==null&&Ov(a,Mt,e.memoizedState,e.memoizedProps);break;case 5:Pn(e,t,a);break;case 3:case 4:var i=Mt;Mt=Ml(e.stateNode.containerInfo),Pn(e,t,a),Mt=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Zs,Zs=16777216,Pn(e,t,a),Zs=i):Pn(e,t,a));break;default:Pn(e,t,a)}}function Zh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ws(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];Xe=i,Fh(i,e)}Zh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Wh(e),e=e.sibling}function Wh(e){switch(e.tag){case 0:case 11:case 15:Ws(e),e.flags&2048&&Ca(9,e,e.return);break;case 3:Ws(e);break;case 12:Ws(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,xl(e)):Ws(e);break;default:Ws(e)}}function xl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];Xe=i,Fh(i,e)}Zh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ca(8,t,t.return),xl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,xl(t));break;default:xl(t)}e=e.sibling}}function Fh(e,t){for(;Xe!==null;){var a=Xe;switch(a.tag){case 0:case 11:case 15:Ca(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:zs(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,Xe=i;else e:for(a=e;Xe!==null;){i=Xe;var o=i.sibling,c=i.return;if(Gh(i),i===a){Xe=null;break e}if(o!==null){o.return=c,Xe=o;break e}Xe=c}}}var Kg={getCacheForType:function(e){var t=Fe($e),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Fe($e).controller.signal}},Pg=typeof WeakMap=="function"?WeakMap:Map,Se=0,ke=null,de=null,me=0,Ee=0,wt=null,ka=!1,Jn=!1,ec=!1,ca=0,Me=0,Na=0,dn=0,tc=0,St=0,Xn=0,Fs=null,dt=null,ac=!1,El=0,ef=0,jl=1/0,Al=null,Oa=null,Ye=0,Ra=null,Qn=null,ua=0,nc=0,sc=null,tf=null,ei=0,ic=null;function _t(){return(Se&2)!==0&&me!==0?me&-me:T.T!==null?dc():vu()}function af(){if(St===0)if((me&536870912)===0||ve){var e=Ui;Ui<<=1,(Ui&3932160)===0&&(Ui=262144),St=e}else St=536870912;return e=yt.current,e!==null&&(e.flags|=32),St}function ht(e,t,a){(e===ke&&(Ee===2||Ee===9)||e.cancelPendingCommit!==null)&&(Zn(e,0),Da(e,me,St,!1)),Ss(e,a),((Se&2)===0||e!==ke)&&(e===ke&&((Se&2)===0&&(dn|=a),Me===4&&Da(e,me,St,!1)),Vt(e))}function nf(e,t,a){if((Se&6)!==0)throw Error(r(327));var i=!a&&(t&127)===0&&(t&e.expiredLanes)===0||ws(e,t),o=i?Qg(e,t):rc(e,t,!0),c=i;do{if(o===0){Jn&&!i&&Da(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!Jg(a)){o=rc(e,t,!1),c=!1;continue}if(o===2){if(c=t,e.errorRecoveryDisabledLanes&c)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var y=e;o=Fs;var S=y.current.memoizedState.isDehydrated;if(S&&(Zn(y,p).flags|=256),p=rc(y,p,!1),p!==2){if(ec&&!S){y.errorRecoveryDisabledLanes|=c,dn|=c,o=4;break e}c=dt,dt=o,c!==null&&(dt===null?dt=c:dt.push.apply(dt,c))}o=p}if(c=!1,o!==2)continue}}if(o===1){Zn(e,0),Da(e,t,0,!0);break}e:{switch(i=e,c=o,c){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:Da(i,t,St,!ka);break e;case 2:dt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(o=El+300-ft(),10<o)){if(Da(i,t,St,!ka),Mi(i,0,!0)!==0)break e;ua=t,i.timeoutHandle=zf(sf.bind(null,i,a,dt,Al,ac,t,St,dn,Xn,ka,c,"Throttled",-0,0),o);break e}sf(i,a,dt,Al,ac,t,St,dn,Xn,ka,c,null,-0,0)}}break}while(!0);Vt(e)}function sf(e,t,a,i,o,c,p,y,S,O,B,H,D,U){if(e.timeoutHandle=-1,H=t.subtreeFlags,H&8192||(H&16785408)===16785408){H={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xt},Qh(t,c,H);var W=(c&62914560)===c?El-ft():(c&4194048)===c?ef-ft():0;if(W=Rv(H,W),W!==null){ua=c,e.cancelPendingCommit=W(ff.bind(null,e,t,c,a,i,o,p,y,S,B,H,null,D,U)),Da(e,c,p,!O);return}}ff(e,t,c,a,i,o,p,y,S)}function Jg(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var o=a[i],c=o.getSnapshot;o=o.value;try{if(!gt(c(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Da(e,t,a,i){t&=~tc,t&=~dn,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var c=31-pt(o),p=1<<c;i[c]=-1,o&=~p}a!==0&&mu(e,a,t)}function Tl(){return(Se&6)===0?(ti(0),!1):!0}function lc(){if(de!==null){if(Ee===0)var e=de.return;else e=de,Ft=tn=null,_o(e),Hn=null,Ls=0,e=de;for(;e!==null;)zh(e.alternate,e),e=e.return;de=null}}function Zn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,mv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ua=0,lc(),ke=e,de=a=Zt(e.current,null),me=t,Ee=0,wt=null,ka=!1,Jn=ws(e,t),ec=!1,Xn=St=tc=dn=Na=Me=0,dt=Fs=null,ac=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-pt(i),c=1<<o;t|=e[o],i&=~c}return ca=t,Ji(),a}function lf(e,t){ce=null,T.H=Ys,t===$n||t===al?(t=Sd(),Ee=3):t===co?(t=Sd(),Ee=4):Ee=t===Bo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,wt=t,de===null&&(Me=1,gl(e,Ct(t,e.current)))}function rf(){var e=yt.current;return e===null?!0:(me&4194048)===me?Rt===null:(me&62914560)===me||(me&536870912)!==0?e===Rt:!1}function of(){var e=T.H;return T.H=Ys,e===null?Ys:e}function cf(){var e=T.A;return T.A=Kg,e}function Cl(){Me=4,ka||(me&4194048)!==me&&yt.current!==null||(Jn=!0),(Na&134217727)===0&&(dn&134217727)===0||ke===null||Da(ke,me,St,!1)}function rc(e,t,a){var i=Se;Se|=2;var o=of(),c=cf();(ke!==e||me!==t)&&(Al=null,Zn(e,t)),t=!1;var p=Me;e:do try{if(Ee!==0&&de!==null){var y=de,S=wt;switch(Ee){case 8:lc(),p=6;break e;case 3:case 2:case 9:case 6:yt.current===null&&(t=!0);var O=Ee;if(Ee=0,wt=null,Wn(e,y,S,O),a&&Jn){p=0;break e}break;default:O=Ee,Ee=0,wt=null,Wn(e,y,S,O)}}Xg(),p=Me;break}catch(B){lf(e,B)}while(!0);return t&&e.shellSuspendCounter++,Ft=tn=null,Se=i,T.H=o,T.A=c,de===null&&(ke=null,me=0,Ji()),p}function Xg(){for(;de!==null;)uf(de)}function Qg(e,t){var a=Se;Se|=2;var i=of(),o=cf();ke!==e||me!==t?(Al=null,jl=ft()+500,Zn(e,t)):Jn=ws(e,t);e:do try{if(Ee!==0&&de!==null){t=de;var c=wt;t:switch(Ee){case 1:Ee=0,wt=null,Wn(e,t,c,1);break;case 2:case 9:if(bd(c)){Ee=0,wt=null,df(t);break}t=function(){Ee!==2&&Ee!==9||ke!==e||(Ee=7),Vt(e)},c.then(t,t);break e;case 3:Ee=7;break e;case 4:Ee=5;break e;case 7:bd(c)?(Ee=0,wt=null,df(t)):(Ee=0,wt=null,Wn(e,t,c,7));break;case 5:var p=null;switch(de.tag){case 26:p=de.memoizedState;case 5:case 27:var y=de;if(p?Qf(p):y.stateNode.complete){Ee=0,wt=null;var S=y.sibling;if(S!==null)de=S;else{var O=y.return;O!==null?(de=O,kl(O)):de=null}break t}}Ee=0,wt=null,Wn(e,t,c,5);break;case 6:Ee=0,wt=null,Wn(e,t,c,6);break;case 8:lc(),Me=6;break e;default:throw Error(r(462))}}Zg();break}catch(B){lf(e,B)}while(!0);return Ft=tn=null,T.H=i,T.A=o,Se=a,de!==null?0:(ke=null,me=0,Ji(),Me)}function Zg(){for(;de!==null&&!wp();)uf(de)}function uf(e){var t=Dh(e.alternate,e,ca);e.memoizedProps=e.pendingProps,t===null?kl(e):de=t}function df(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Th(a,t,t.pendingProps,t.type,void 0,me);break;case 11:t=Th(a,t,t.pendingProps,t.type.render,t.ref,me);break;case 5:_o(t);default:zh(a,t),t=de=od(t,ca),t=Dh(a,t,ca)}e.memoizedProps=e.pendingProps,t===null?kl(e):de=t}function Wn(e,t,a,i){Ft=tn=null,_o(t),Hn=null,Ls=0;var o=t.return;try{if(qg(e,o,t,a,me)){Me=1,gl(e,Ct(a,e.current)),de=null;return}}catch(c){if(o!==null)throw de=o,c;Me=1,gl(e,Ct(a,e.current)),de=null;return}t.flags&32768?(ve||i===1?e=!0:Jn||(me&536870912)!==0?e=!1:(ka=e=!0,(i===2||i===9||i===3||i===6)&&(i=yt.current,i!==null&&i.tag===13&&(i.flags|=16384))),hf(t,e)):kl(t)}function kl(e){var t=e;do{if((t.flags&32768)!==0){hf(t,ka);return}e=t.return;var a=Ig(t.alternate,t,ca);if(a!==null){de=a;return}if(t=t.sibling,t!==null){de=t;return}de=t=e}while(t!==null);Me===0&&(Me=5)}function hf(e,t){do{var a=Gg(e.alternate,e);if(a!==null){a.flags&=32767,de=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){de=e;return}de=e=a}while(e!==null);Me=6,de=null}function ff(e,t,a,i,o,c,p,y,S){e.cancelPendingCommit=null;do Nl();while(Ye!==0);if((Se&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(c=t.lanes|t.childLanes,c|=Jr,Np(e,a,c,p,y,S),e===ke&&(de=ke=null,me=0),Qn=t,Ra=e,ua=a,nc=c,sc=o,tf=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,tv(Ri,function(){return yf(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=T.T,T.T=null,o=q.p,q.p=2,p=Se,Se|=4;try{Vg(e,t,a)}finally{Se=p,q.p=o,T.T=i}}Ye=1,mf(),pf(),gf()}}function mf(){if(Ye===1){Ye=0;var e=Ra,t=Qn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=T.T,T.T=null;var i=q.p;q.p=2;var o=Se;Se|=4;try{Ph(t,e);var c=bc,p=Fu(e.containerInfo),y=c.focusedElem,S=c.selectionRange;if(p!==y&&y&&y.ownerDocument&&Wu(y.ownerDocument.documentElement,y)){if(S!==null&&Gr(y)){var O=S.start,B=S.end;if(B===void 0&&(B=O),"selectionStart"in y)y.selectionStart=O,y.selectionEnd=Math.min(B,y.value.length);else{var H=y.ownerDocument||document,D=H&&H.defaultView||window;if(D.getSelection){var U=D.getSelection(),W=y.textContent.length,se=Math.min(S.start,W),Ce=S.end===void 0?se:Math.min(S.end,W);!U.extend&&se>Ce&&(p=Ce,Ce=se,se=p);var C=Zu(y,se),j=Zu(y,Ce);if(C&&j&&(U.rangeCount!==1||U.anchorNode!==C.node||U.anchorOffset!==C.offset||U.focusNode!==j.node||U.focusOffset!==j.offset)){var k=H.createRange();k.setStart(C.node,C.offset),U.removeAllRanges(),se>Ce?(U.addRange(k),U.extend(j.node,j.offset)):(k.setEnd(j.node,j.offset),U.addRange(k))}}}}for(H=[],U=y;U=U.parentNode;)U.nodeType===1&&H.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<H.length;y++){var $=H[y];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Il=!!yc,bc=yc=null}finally{Se=o,q.p=i,T.T=a}}e.current=t,Ye=2}}function pf(){if(Ye===2){Ye=0;var e=Ra,t=Qn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=T.T,T.T=null;var i=q.p;q.p=2;var o=Se;Se|=4;try{Ih(e,t.alternate,t)}finally{Se=o,q.p=i,T.T=a}}Ye=3}}function gf(){if(Ye===4||Ye===3){Ye=0,Sp();var e=Ra,t=Qn,a=ua,i=tf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ye=5:(Ye=0,Qn=Ra=null,vf(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Oa=null),Er(a),t=t.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(bs,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=T.T,o=q.p,q.p=2,T.T=null;try{for(var c=e.onRecoverableError,p=0;p<i.length;p++){var y=i[p];c(y.value,{componentStack:y.stack})}}finally{T.T=t,q.p=o}}(ua&3)!==0&&Nl(),Vt(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===ic?ei++:(ei=0,ic=e):ei=0,ti(0)}}function vf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,zs(t)))}function Nl(){return mf(),pf(),gf(),yf()}function yf(){if(Ye!==5)return!1;var e=Ra,t=nc;nc=0;var a=Er(ua),i=T.T,o=q.p;try{q.p=32>a?32:a,T.T=null,a=sc,sc=null;var c=Ra,p=ua;if(Ye=0,Qn=Ra=null,ua=0,(Se&6)!==0)throw Error(r(331));var y=Se;if(Se|=4,Wh(c.current),Xh(c,c.current,p,a),Se=y,ti(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(bs,c)}catch{}return!0}finally{q.p=o,T.T=i,vf(e,t)}}function bf(e,t,a){t=Ct(a,t),t=Lo(e.stateNode,t,2),e=ja(e,t,2),e!==null&&(Ss(e,2),Vt(e))}function je(e,t,a){if(e.tag===3)bf(e,e,a);else for(;t!==null;){if(t.tag===3){bf(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Oa===null||!Oa.has(i))){e=Ct(a,e),a=bh(2),i=ja(t,a,2),i!==null&&(wh(a,i,t,e),Ss(i,2),Vt(i));break}}t=t.return}}function oc(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new Pg;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(a)||(ec=!0,o.add(a),e=Wg.bind(null,e,t,a),t.then(e,e))}function Wg(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ke===e&&(me&a)===a&&(Me===4||Me===3&&(me&62914560)===me&&300>ft()-El?(Se&2)===0&&Zn(e,0):tc|=a,Xn===me&&(Xn=0)),Vt(e)}function wf(e,t){t===0&&(t=fu()),e=Wa(e,t),e!==null&&(Ss(e,t),Vt(e))}function Fg(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),wf(e,a)}function ev(e,t){var a=0;switch(e.tag){case 31:case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}i!==null&&i.delete(t),wf(e,a)}function tv(e,t){return wr(e,t)}var Ol=null,Fn=null,cc=!1,Rl=!1,uc=!1,Ua=0;function Vt(e){e!==Fn&&e.next===null&&(Fn===null?Ol=Fn=e:Fn=Fn.next=e),Rl=!0,cc||(cc=!0,nv())}function ti(e,t){if(!uc&&Rl){uc=!0;do for(var a=!1,i=Ol;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var c=0;else{var p=i.suspendedLanes,y=i.pingedLanes;c=(1<<31-pt(42|e)+1)-1,c&=o&~(p&~y),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,Ef(i,c))}else c=me,c=Mi(i,i===ke?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(c&3)===0||ws(i,c)||(a=!0,Ef(i,c));i=i.next}while(a);uc=!1}}function av(){Sf()}function Sf(){Rl=cc=!1;var e=0;Ua!==0&&fv()&&(e=Ua);for(var t=ft(),a=null,i=Ol;i!==null;){var o=i.next,c=_f(i,t);c===0?(i.next=null,a===null?Ol=o:a.next=o,o===null&&(Fn=a)):(a=i,(e!==0||(c&3)!==0)&&(Rl=!0)),i=o}Ye!==0&&Ye!==5||ti(e),Ua!==0&&(Ua=0)}function _f(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var p=31-pt(c),y=1<<p,S=o[p];S===-1?((y&a)===0||(y&i)!==0)&&(o[p]=kp(y,t)):S<=t&&(e.expiredLanes|=y),c&=~y}if(t=ke,a=me,a=Mi(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(Ee===2||Ee===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Sr(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ws(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&Sr(i),Er(a)){case 2:case 8:a=du;break;case 32:a=Ri;break;case 268435456:a=hu;break;default:a=Ri}return i=xf.bind(null,e),a=wr(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&Sr(i),e.callbackPriority=2,e.callbackNode=null,2}function xf(e,t){if(Ye!==0&&Ye!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Nl()&&e.callbackNode!==a)return null;var i=me;return i=Mi(e,e===ke?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(nf(e,i,t),_f(e,ft()),e.callbackNode!=null&&e.callbackNode===a?xf.bind(null,e):null)}function Ef(e,t){if(Nl())return null;nf(e,t,!0)}function nv(){pv(function(){(Se&6)!==0?wr(uu,av):Sf()})}function dc(){if(Ua===0){var e=Bn;e===0&&(e=Di,Di<<=1,(Di&261888)===0&&(Di=256)),Ua=e}return Ua}function jf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$i(""+e)}function Af(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function sv(e,t,a,i,o){if(t==="submit"&&a&&a.stateNode===o){var c=jf((o[lt]||null).action),p=i.submitter;p&&(t=(t=p[lt]||null)?jf(t.formAction):p.getAttribute("formAction"),t!==null&&(c=t,p=null));var y=new Vi("action","action",null,i,o);e.push({event:y,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ua!==0){var S=p?Af(o,p):new FormData(o);Oo(a,{pending:!0,data:S,method:o.method,action:c},null,S)}}else typeof c=="function"&&(y.preventDefault(),S=p?Af(o,p):new FormData(o),Oo(a,{pending:!0,data:S,method:o.method,action:c},c,S))},currentTarget:o}]})}}for(var hc=0;hc<Pr.length;hc++){var fc=Pr[hc],iv=fc.toLowerCase(),lv=fc[0].toUpperCase()+fc.slice(1);zt(iv,"on"+lv)}zt(ad,"onAnimationEnd"),zt(nd,"onAnimationIteration"),zt(sd,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(_g,"onTransitionRun"),zt(xg,"onTransitionStart"),zt(Eg,"onTransitionCancel"),zt(id,"onTransitionEnd"),En("onMouseEnter",["mouseout","mouseover"]),En("onMouseLeave",["mouseout","mouseover"]),En("onPointerEnter",["pointerout","pointerover"]),En("onPointerLeave",["pointerout","pointerover"]),Ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ja("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ai));function Tf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],o=i.event;i=i.listeners;e:{var c=void 0;if(t)for(var p=i.length-1;0<=p;p--){var y=i[p],S=y.instance,O=y.currentTarget;if(y=y.listener,S!==c&&o.isPropagationStopped())break e;c=y,o.currentTarget=O;try{c(o)}catch(B){Pi(B)}o.currentTarget=null,c=S}else for(p=0;p<i.length;p++){if(y=i[p],S=y.instance,O=y.currentTarget,y=y.listener,S!==c&&o.isPropagationStopped())break e;c=y,o.currentTarget=O;try{c(o)}catch(B){Pi(B)}o.currentTarget=null,c=S}}}}function he(e,t){var a=t[jr];a===void 0&&(a=t[jr]=new Set);var i=e+"__bubble";a.has(i)||(Cf(t,e,2,!1),a.add(i))}function mc(e,t,a){var i=0;t&&(i|=4),Cf(a,e,i,t)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function pc(e){if(!e[Dl]){e[Dl]=!0,wu.forEach(function(a){a!=="selectionchange"&&(rv.has(a)||mc(a,!1,e),mc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dl]||(t[Dl]=!0,mc("selectionchange",!1,t))}}function Cf(e,t,a,i){switch(nm(t)){case 2:var o=zv;break;case 8:o=Mv;break;default:o=Nc}a=o.bind(null,t,a,e),o=void 0,!Ur||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function gc(e,t,a,i,o){var c=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var y=i.stateNode.containerInfo;if(y===o)break;if(p===4)for(p=i.return;p!==null;){var S=p.tag;if((S===3||S===4)&&p.stateNode.containerInfo===o)return;p=p.return}for(;y!==null;){if(p=Sn(y),p===null)return;if(S=p.tag,S===5||S===6||S===26||S===27){i=c=p;continue e}y=y.parentNode}}i=i.return}Ru(function(){var O=c,B=Rr(a),H=[];e:{var D=ld.get(e);if(D!==void 0){var U=Vi,W=e;switch(e){case"keypress":if(Ii(a)===0)break e;case"keydown":case"keyup":U=eg;break;case"focusin":W="focus",U=Br;break;case"focusout":W="blur",U=Br;break;case"beforeblur":case"afterblur":U=Br;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=zu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Ip;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=ng;break;case ad:case nd:case sd:U=Yp;break;case id:U=ig;break;case"scroll":case"scrollend":U=$p;break;case"wheel":U=rg;break;case"copy":case"cut":case"paste":U=Pp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Lu;break;case"toggle":case"beforetoggle":U=cg}var se=(t&4)!==0,Ce=!se&&(e==="scroll"||e==="scrollend"),C=se?D!==null?D+"Capture":null:D;se=[];for(var j=O,k;j!==null;){var $=j;if(k=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||k===null||C===null||($=Es(j,C),$!=null&&se.push(ni(j,$,k))),Ce)break;j=j.return}0<se.length&&(D=new U(D,W,null,a,B),H.push({event:D,listeners:se}))}}if((t&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",D&&a!==Or&&(W=a.relatedTarget||a.fromElement)&&(Sn(W)||W[wn]))break e;if((U||D)&&(D=B.window===B?B:(D=B.ownerDocument)?D.defaultView||D.parentWindow:window,U?(W=a.relatedTarget||a.toElement,U=O,W=W?Sn(W):null,W!==null&&(Ce=d(W),se=W.tag,W!==Ce||se!==5&&se!==27&&se!==6)&&(W=null)):(U=null,W=O),U!==W)){if(se=zu,$="onMouseLeave",C="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(se=Lu,$="onPointerLeave",C="onPointerEnter",j="pointer"),Ce=U==null?D:xs(U),k=W==null?D:xs(W),D=new se($,j+"leave",U,a,B),D.target=Ce,D.relatedTarget=k,$=null,Sn(B)===O&&(se=new se(C,j+"enter",W,a,B),se.target=k,se.relatedTarget=Ce,$=se),Ce=$,U&&W)t:{for(se=ov,C=U,j=W,k=0,$=C;$;$=se($))k++;$=0;for(var ae=j;ae;ae=se(ae))$++;for(;0<k-$;)C=se(C),k--;for(;0<$-k;)j=se(j),$--;for(;k--;){if(C===j||j!==null&&C===j.alternate){se=C;break t}C=se(C),j=se(j)}se=null}else se=null;U!==null&&kf(H,D,U,se,!1),W!==null&&Ce!==null&&kf(H,Ce,W,se,!0)}}e:{if(D=O?xs(O):window,U=D.nodeName&&D.nodeName.toLowerCase(),U==="select"||U==="input"&&D.type==="file")var be=Yu;else if(Gu(D))if(Ku)be=bg;else{be=vg;var ee=gg}else U=D.nodeName,!U||U.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?O&&Nr(O.elementType)&&(be=Yu):be=yg;if(be&&(be=be(e,O))){Vu(H,be,a,B);break e}ee&&ee(e,D,O),e==="focusout"&&O&&D.type==="number"&&O.memoizedProps.value!=null&&kr(D,"number",D.value)}switch(ee=O?xs(O):window,e){case"focusin":(Gu(ee)||ee.contentEditable==="true")&&(Nn=ee,Vr=O,Rs=null);break;case"focusout":Rs=Vr=Nn=null;break;case"mousedown":Yr=!0;break;case"contextmenu":case"mouseup":case"dragend":Yr=!1,ed(H,a,B);break;case"selectionchange":if(Sg)break;case"keydown":case"keyup":ed(H,a,B)}var ue;if($r)e:{switch(e){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else kn?Hu(e,a)&&(pe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(pe="onCompositionStart");pe&&(Bu&&a.locale!=="ko"&&(kn||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&kn&&(ue=Du()):(ya=B,zr="value"in ya?ya.value:ya.textContent,kn=!0)),ee=Ul(O,pe),0<ee.length&&(pe=new Mu(pe,e,null,a,B),H.push({event:pe,listeners:ee}),ue?pe.data=ue:(ue=Iu(a),ue!==null&&(pe.data=ue)))),(ue=dg?hg(e,a):fg(e,a))&&(pe=Ul(O,"onBeforeInput"),0<pe.length&&(ee=new Mu("onBeforeInput","beforeinput",null,a,B),H.push({event:ee,listeners:pe}),ee.data=ue)),sv(H,e,O,a,B)}Tf(H,t)})}function ni(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ul(e,t){for(var a=t+"Capture",i=[];e!==null;){var o=e,c=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||c===null||(o=Es(e,a),o!=null&&i.unshift(ni(e,o,c)),o=Es(e,t),o!=null&&i.push(ni(e,o,c))),e.tag===3)return i;e=e.return}return[]}function ov(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function kf(e,t,a,i,o){for(var c=t._reactName,p=[];a!==null&&a!==i;){var y=a,S=y.alternate,O=y.stateNode;if(y=y.tag,S!==null&&S===i)break;y!==5&&y!==26&&y!==27||O===null||(S=O,o?(O=Es(a,c),O!=null&&p.unshift(ni(a,O,S))):o||(O=Es(a,c),O!=null&&p.push(ni(a,O,S)))),a=a.return}p.length!==0&&e.push({event:t,listeners:p})}var cv=/\r\n?/g,uv=/\u0000|\uFFFD/g;function Nf(e){return(typeof e=="string"?e:""+e).replace(cv,`
`).replace(uv,"")}function Of(e,t){return t=Nf(t),Nf(e)===t}function Te(e,t,a,i,o,c){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||An(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&An(e,""+i);break;case"className":Bi(e,"class",i);break;case"tabIndex":Bi(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Bi(e,a,i);break;case"style":Nu(e,i,c);break;case"data":if(t!=="object"){Bi(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=$i(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&Te(e,t,"name",o.name,o,null),Te(e,t,"formEncType",o.formEncType,o,null),Te(e,t,"formMethod",o.formMethod,o,null),Te(e,t,"formTarget",o.formTarget,o,null)):(Te(e,t,"encType",o.encType,o,null),Te(e,t,"method",o.method,o,null),Te(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=$i(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=Xt);break;case"onScroll":i!=null&&he("scroll",e);break;case"onScrollEnd":i!=null&&he("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(r(61));if(a=i.__html,a!=null){if(o.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=$i(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":he("beforetoggle",e),he("toggle",e),Li(e,"popover",i);break;case"xlinkActuate":Jt(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Jt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Jt(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Jt(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Jt(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Jt(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Li(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Bp.get(a)||a,Li(e,a,i))}}function vc(e,t,a,i,o,c){switch(a){case"style":Nu(e,i,c);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(r(61));if(a=i.__html,a!=null){if(o.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof i=="string"?An(e,i):(typeof i=="number"||typeof i=="bigint")&&An(e,""+i);break;case"onScroll":i!=null&&he("scroll",e);break;case"onScrollEnd":i!=null&&he("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Xt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Su.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),c=e[lt]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,o),typeof i=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,o);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):Li(e,a,i)}}}function tt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":he("error",e),he("load",e);var i=!1,o=!1,c;for(c in a)if(a.hasOwnProperty(c)){var p=a[c];if(p!=null)switch(c){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Te(e,t,c,p,a,null)}}o&&Te(e,t,"srcSet",a.srcSet,a,null),i&&Te(e,t,"src",a.src,a,null);return;case"input":he("invalid",e);var y=c=p=o=null,S=null,O=null;for(i in a)if(a.hasOwnProperty(i)){var B=a[i];if(B!=null)switch(i){case"name":o=B;break;case"type":p=B;break;case"checked":S=B;break;case"defaultChecked":O=B;break;case"value":c=B;break;case"defaultValue":y=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,t));break;default:Te(e,t,i,B,a,null)}}Au(e,c,y,S,O,p,o,!1);return;case"select":he("invalid",e),i=p=c=null;for(o in a)if(a.hasOwnProperty(o)&&(y=a[o],y!=null))switch(o){case"value":c=y;break;case"defaultValue":p=y;break;case"multiple":i=y;default:Te(e,t,o,y,a,null)}t=c,a=p,e.multiple=!!i,t!=null?jn(e,!!i,t,!1):a!=null&&jn(e,!!i,a,!0);return;case"textarea":he("invalid",e),c=o=i=null;for(p in a)if(a.hasOwnProperty(p)&&(y=a[p],y!=null))switch(p){case"value":i=y;break;case"defaultValue":o=y;break;case"children":c=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:Te(e,t,p,y,a,null)}Cu(e,i,o,c);return;case"option":for(S in a)a.hasOwnProperty(S)&&(i=a[S],i!=null)&&(S==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":Te(e,t,S,i,a,null));return;case"dialog":he("beforetoggle",e),he("toggle",e),he("cancel",e),he("close",e);break;case"iframe":case"object":he("load",e);break;case"video":case"audio":for(i=0;i<ai.length;i++)he(ai[i],e);break;case"image":he("error",e),he("load",e);break;case"details":he("toggle",e);break;case"embed":case"source":case"link":he("error",e),he("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(i=a[O],i!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Te(e,t,O,i,a,null)}return;default:if(Nr(t)){for(B in a)a.hasOwnProperty(B)&&(i=a[B],i!==void 0&&vc(e,t,B,i,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(i=a[y],i!=null&&Te(e,t,y,i,a,null))}function dv(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,c=null,p=null,y=null,S=null,O=null,B=null;for(U in a){var H=a[U];if(a.hasOwnProperty(U)&&H!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":S=H;default:i.hasOwnProperty(U)||Te(e,t,U,null,i,H)}}for(var D in i){var U=i[D];if(H=a[D],i.hasOwnProperty(D)&&(U!=null||H!=null))switch(D){case"type":c=U;break;case"name":o=U;break;case"checked":O=U;break;case"defaultChecked":B=U;break;case"value":p=U;break;case"defaultValue":y=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(137,t));break;default:U!==H&&Te(e,t,D,U,i,H)}}Cr(e,p,y,S,O,B,c,o);return;case"select":U=p=y=D=null;for(c in a)if(S=a[c],a.hasOwnProperty(c)&&S!=null)switch(c){case"value":break;case"multiple":U=S;default:i.hasOwnProperty(c)||Te(e,t,c,null,i,S)}for(o in i)if(c=i[o],S=a[o],i.hasOwnProperty(o)&&(c!=null||S!=null))switch(o){case"value":D=c;break;case"defaultValue":y=c;break;case"multiple":p=c;default:c!==S&&Te(e,t,o,c,i,S)}t=y,a=p,i=U,D!=null?jn(e,!!a,D,!1):!!i!=!!a&&(t!=null?jn(e,!!a,t,!0):jn(e,!!a,a?[]:"",!1));return;case"textarea":U=D=null;for(y in a)if(o=a[y],a.hasOwnProperty(y)&&o!=null&&!i.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Te(e,t,y,null,i,o)}for(p in i)if(o=i[p],c=a[p],i.hasOwnProperty(p)&&(o!=null||c!=null))switch(p){case"value":D=o;break;case"defaultValue":U=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(r(91));break;default:o!==c&&Te(e,t,p,o,i,c)}Tu(e,D,U);return;case"option":for(var W in a)D=a[W],a.hasOwnProperty(W)&&D!=null&&!i.hasOwnProperty(W)&&(W==="selected"?e.selected=!1:Te(e,t,W,null,i,D));for(S in i)D=i[S],U=a[S],i.hasOwnProperty(S)&&D!==U&&(D!=null||U!=null)&&(S==="selected"?e.selected=D&&typeof D!="function"&&typeof D!="symbol":Te(e,t,S,D,i,U));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in a)D=a[se],a.hasOwnProperty(se)&&D!=null&&!i.hasOwnProperty(se)&&Te(e,t,se,null,i,D);for(O in i)if(D=i[O],U=a[O],i.hasOwnProperty(O)&&D!==U&&(D!=null||U!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(137,t));break;default:Te(e,t,O,D,i,U)}return;default:if(Nr(t)){for(var Ce in a)D=a[Ce],a.hasOwnProperty(Ce)&&D!==void 0&&!i.hasOwnProperty(Ce)&&vc(e,t,Ce,void 0,i,D);for(B in i)D=i[B],U=a[B],!i.hasOwnProperty(B)||D===U||D===void 0&&U===void 0||vc(e,t,B,D,i,U);return}}for(var C in a)D=a[C],a.hasOwnProperty(C)&&D!=null&&!i.hasOwnProperty(C)&&Te(e,t,C,null,i,D);for(H in i)D=i[H],U=a[H],!i.hasOwnProperty(H)||D===U||D==null&&U==null||Te(e,t,H,D,i,U)}function Rf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),i=0;i<a.length;i++){var o=a[i],c=o.transferSize,p=o.initiatorType,y=o.duration;if(c&&y&&Rf(p)){for(p=0,y=o.responseEnd,i+=1;i<a.length;i++){var S=a[i],O=S.startTime;if(O>y)break;var B=S.transferSize,H=S.initiatorType;B&&Rf(H)&&(S=S.responseEnd,p+=B*(S<y?1:(y-O)/(S-O)))}if(--i,t+=8*(c+p)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var yc=null,bc=null;function zl(e){return e.nodeType===9?e:e.ownerDocument}function Df(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function wc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sc=null;function fv(){var e=window.event;return e&&e.type==="popstate"?e===Sc?!1:(Sc=e,!0):(Sc=null,!1)}var zf=typeof setTimeout=="function"?setTimeout:void 0,mv=typeof clearTimeout=="function"?clearTimeout:void 0,Mf=typeof Promise=="function"?Promise:void 0,pv=typeof queueMicrotask=="function"?queueMicrotask:typeof Mf<"u"?function(e){return Mf.resolve(null).then(e).catch(gv)}:zf;function gv(e){setTimeout(function(){throw e})}function za(e){return e==="head"}function Lf(e,t){var a=t,i=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(i===0){e.removeChild(o),ns(t);return}i--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")i++;else if(a==="html")si(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,si(a);for(var c=a.firstChild;c;){var p=c.nextSibling,y=c.nodeName;c[_s]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=p}}else a==="body"&&si(e.ownerDocument.body);a=o}while(a);ns(t)}function Bf(e,t){var a=e;e=0;do{var i=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=i}while(a)}function _c(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_c(a),Ar(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function vv(e,t,a,i){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[_s])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Dt(e.nextSibling),e===null)break}return null}function yv(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Dt(e.nextSibling),e===null))return null;return e}function qf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Dt(e.nextSibling),e===null))return null;return e}function xc(e){return e.data==="$?"||e.data==="$~"}function Ec(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function bv(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Dt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var jc=null;function $f(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Dt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Hf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function If(e,t,a){switch(t=zl(a),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function si(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ar(e)}var Ut=new Map,Gf=new Set;function Ml(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var da=q.d;q.d={f:wv,r:Sv,D:_v,C:xv,L:Ev,m:jv,X:Tv,S:Av,M:Cv};function wv(){var e=da.f(),t=Tl();return e||t}function Sv(e){var t=_n(e);t!==null&&t.tag===5&&t.type==="form"?ih(t):da.r(e)}var es=typeof document>"u"?null:document;function Vf(e,t,a){var i=es;if(i&&typeof t=="string"&&t){var o=At(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),Gf.has(o)||(Gf.add(o),e={rel:e,crossOrigin:a,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),tt(t,"link",e),Je(t),i.head.appendChild(t)))}}function _v(e){da.D(e),Vf("dns-prefetch",e,null)}function xv(e,t){da.C(e,t),Vf("preconnect",e,t)}function Ev(e,t,a){da.L(e,t,a);var i=es;if(i&&e&&t){var o='link[rel="preload"][as="'+At(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+At(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+At(a.imageSizes)+'"]')):o+='[href="'+At(e)+'"]';var c=o;switch(t){case"style":c=ts(e);break;case"script":c=as(e)}Ut.has(c)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ut.set(c,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(ii(c))||t==="script"&&i.querySelector(li(c))||(t=i.createElement("link"),tt(t,"link",e),Je(t),i.head.appendChild(t)))}}function jv(e,t){da.m(e,t);var a=es;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+At(i)+'"][href="'+At(e)+'"]',c=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=as(e)}if(!Ut.has(c)&&(e=w({rel:"modulepreload",href:e},t),Ut.set(c,e),a.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(li(c)))return}i=a.createElement("link"),tt(i,"link",e),Je(i),a.head.appendChild(i)}}}function Av(e,t,a){da.S(e,t,a);var i=es;if(i&&e){var o=xn(i).hoistableStyles,c=ts(e);t=t||"default";var p=o.get(c);if(!p){var y={loading:0,preload:null};if(p=i.querySelector(ii(c)))y.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ut.get(c))&&Ac(e,a);var S=p=i.createElement("link");Je(S),tt(S,"link",e),S._p=new Promise(function(O,B){S.onload=O,S.onerror=B}),S.addEventListener("load",function(){y.loading|=1}),S.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Ll(p,t,i)}p={type:"stylesheet",instance:p,count:1,state:y},o.set(c,p)}}}function Tv(e,t){da.X(e,t);var a=es;if(a&&e){var i=xn(a).hoistableScripts,o=as(e),c=i.get(o);c||(c=a.querySelector(li(o)),c||(e=w({src:e,async:!0},t),(t=Ut.get(o))&&Tc(e,t),c=a.createElement("script"),Je(c),tt(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},i.set(o,c))}}function Cv(e,t){da.M(e,t);var a=es;if(a&&e){var i=xn(a).hoistableScripts,o=as(e),c=i.get(o);c||(c=a.querySelector(li(o)),c||(e=w({src:e,async:!0,type:"module"},t),(t=Ut.get(o))&&Tc(e,t),c=a.createElement("script"),Je(c),tt(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},i.set(o,c))}}function Yf(e,t,a,i){var o=(o=pa.current)?Ml(o):null;if(!o)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=ts(a.href),a=xn(o).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ts(a.href);var c=xn(o).hoistableStyles,p=c.get(e);if(p||(o=o.ownerDocument||o,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,p),(c=o.querySelector(ii(e)))&&!c._p&&(p.instance=c,p.state.loading=5),Ut.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ut.set(e,a),c||kv(o,e,a,p.state))),t&&i===null)throw Error(r(528,""));return p}if(t&&i!==null)throw Error(r(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=as(a),a=xn(o).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function ts(e){return'href="'+At(e)+'"'}function ii(e){return'link[rel="stylesheet"]['+e+"]"}function Kf(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function kv(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),tt(t,"link",a),Je(t),e.head.appendChild(t))}function as(e){return'[src="'+At(e)+'"]'}function li(e){return"script[async]"+e}function Pf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+At(a.href)+'"]');if(i)return t.instance=i,Je(i),i;var o=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Je(i),tt(i,"style",o),Ll(i,a.precedence,e),t.instance=i;case"stylesheet":o=ts(a.href);var c=e.querySelector(ii(o));if(c)return t.state.loading|=4,t.instance=c,Je(c),c;i=Kf(a),(o=Ut.get(o))&&Ac(i,o),c=(e.ownerDocument||e).createElement("link"),Je(c);var p=c;return p._p=new Promise(function(y,S){p.onload=y,p.onerror=S}),tt(c,"link",i),t.state.loading|=4,Ll(c,a.precedence,e),t.instance=c;case"script":return c=as(a.src),(o=e.querySelector(li(c)))?(t.instance=o,Je(o),o):(i=a,(o=Ut.get(c))&&(i=w({},a),Tc(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),Je(o),tt(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Ll(i,a.precedence,e));return t.instance}function Ll(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,c=o,p=0;p<i.length;p++){var y=i[p];if(y.dataset.precedence===t)c=y;else if(c!==o)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Ac(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Tc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Bl=null;function Jf(e,t,a){if(Bl===null){var i=new Map,o=Bl=new Map;o.set(a,i)}else o=Bl,i=o.get(a),i||(i=new Map,o.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var c=a[o];if(!(c[_s]||c[Ze]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var p=c.getAttribute(t)||"";p=e+p;var y=i.get(p);y?y.push(c):i.set(p,[c])}}return i}function Xf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Nv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Qf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ov(e,t,a,i){if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=ts(i.href),c=t.querySelector(ii(o));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ql.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=c,Je(c);return}c=t.ownerDocument||t,i=Kf(i),(o=Ut.get(o))&&Ac(i,o),c=c.createElement("link"),Je(c);var p=c;p._p=new Promise(function(y,S){p.onload=y,p.onerror=S}),tt(c,"link",i),a.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ql.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Cc=0;function Rv(e,t){return e.stylesheets&&e.count===0&&Hl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var i=setTimeout(function(){if(e.stylesheets&&Hl(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&Cc===0&&(Cc=62500*hv());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Hl(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>Cc?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function ql(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var $l=null;function Hl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,$l=new Map,t.forEach(Dv,e),$l=null,ql.call(e))}function Dv(e,t){if(!(t.state.loading&4)){var a=$l.get(e);if(a)var i=a.get(null);else{a=new Map,$l.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<o.length;c++){var p=o[c];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),i=p)}i&&a.set(null,i)}o=t.instance,p=o.getAttribute("data-precedence"),c=a.get(p)||i,c===i&&a.set(null,o),a.set(p,o),this.count++,i=ql.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),c?c.parentNode.insertBefore(o,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var ri={$$typeof:M,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Uv(e,t,a,i,o,c,p,y,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_r(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_r(0),this.hiddenUpdates=_r(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=c,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Zf(e,t,a,i,o,c,p,y,S,O,B,H){return e=new Uv(e,t,a,p,S,O,B,H,y),t=1,c===!0&&(t|=24),c=vt(3,null,null,t),e.current=c,c.stateNode=e,t=lo(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:i,isDehydrated:a,cache:t},uo(c),e}function Wf(e){return e?(e=Dn,e):Dn}function Ff(e,t,a,i,o,c){o=Wf(o),i.context===null?i.context=o:i.pendingContext=o,i=Ea(t),i.payload={element:a},c=c===void 0?null:c,c!==null&&(i.callback=c),a=ja(e,i,t),a!==null&&(ht(a,e,t),qs(a,e,t))}function em(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function kc(e,t){em(e,t),(e=e.alternate)&&em(e,t)}function tm(e){if(e.tag===13||e.tag===31){var t=Wa(e,67108864);t!==null&&ht(t,e,67108864),kc(e,67108864)}}function am(e){if(e.tag===13||e.tag===31){var t=_t();t=xr(t);var a=Wa(e,t);a!==null&&ht(a,e,t),kc(e,t)}}var Il=!0;function zv(e,t,a,i){var o=T.T;T.T=null;var c=q.p;try{q.p=2,Nc(e,t,a,i)}finally{q.p=c,T.T=o}}function Mv(e,t,a,i){var o=T.T;T.T=null;var c=q.p;try{q.p=8,Nc(e,t,a,i)}finally{q.p=c,T.T=o}}function Nc(e,t,a,i){if(Il){var o=Oc(i);if(o===null)gc(e,t,i,Gl,a),sm(e,i);else if(Bv(o,e,t,a,i))i.stopPropagation();else if(sm(e,i),t&4&&-1<Lv.indexOf(e)){for(;o!==null;){var c=_n(o);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var p=Pa(c.pendingLanes);if(p!==0){var y=c;for(y.pendingLanes|=2,y.entangledLanes|=2;p;){var S=1<<31-pt(p);y.entanglements[1]|=S,p&=~S}Vt(c),(Se&6)===0&&(jl=ft()+500,ti(0))}}break;case 31:case 13:y=Wa(c,2),y!==null&&ht(y,c,2),Tl(),kc(c,2)}if(c=Oc(i),c===null&&gc(e,t,i,Gl,a),c===o)break;o=c}o!==null&&i.stopPropagation()}else gc(e,t,i,null,a)}}function Oc(e){return e=Rr(e),Rc(e)}var Gl=null;function Rc(e){if(Gl=null,e=Sn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Gl=e,null}function nm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_p()){case uu:return 2;case du:return 8;case Ri:case xp:return 32;case hu:return 268435456;default:return 32}default:return 32}}var Dc=!1,Ma=null,La=null,Ba=null,oi=new Map,ci=new Map,qa=[],Lv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sm(e,t){switch(e){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":oi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(t.pointerId)}}function ui(e,t,a,i,o,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:c,targetContainers:[o]},t!==null&&(t=_n(t),t!==null&&tm(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Bv(e,t,a,i,o){switch(t){case"focusin":return Ma=ui(Ma,e,t,a,i,o),!0;case"dragenter":return La=ui(La,e,t,a,i,o),!0;case"mouseover":return Ba=ui(Ba,e,t,a,i,o),!0;case"pointerover":var c=o.pointerId;return oi.set(c,ui(oi.get(c)||null,e,t,a,i,o)),!0;case"gotpointercapture":return c=o.pointerId,ci.set(c,ui(ci.get(c)||null,e,t,a,i,o)),!0}return!1}function im(e){var t=Sn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,yu(e.priority,function(){am(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,yu(e.priority,function(){am(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Oc(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);Or=i,a.target.dispatchEvent(i),Or=null}else return t=_n(a),t!==null&&tm(t),e.blockedOn=a,!1;t.shift()}return!0}function lm(e,t,a){Vl(e)&&a.delete(t)}function qv(){Dc=!1,Ma!==null&&Vl(Ma)&&(Ma=null),La!==null&&Vl(La)&&(La=null),Ba!==null&&Vl(Ba)&&(Ba=null),oi.forEach(lm),ci.forEach(lm)}function Yl(e,t){e.blockedOn===t&&(e.blockedOn=null,Dc||(Dc=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,qv)))}var Kl=null;function rm(e){Kl!==e&&(Kl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Kl===e&&(Kl=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(Rc(i||a)===null)continue;break}var c=_n(a);c!==null&&(e.splice(t,3),t-=3,Oo(c,{pending:!0,data:o,method:a.method,action:i},i,o))}}))}function ns(e){function t(S){return Yl(S,e)}Ma!==null&&Yl(Ma,e),La!==null&&Yl(La,e),Ba!==null&&Yl(Ba,e),oi.forEach(t),ci.forEach(t);for(var a=0;a<qa.length;a++){var i=qa[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<qa.length&&(a=qa[0],a.blockedOn===null);)im(a),a.blockedOn===null&&qa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var o=a[i],c=a[i+1],p=o[lt]||null;if(typeof c=="function")p||rm(a);else if(p){var y=null;if(c&&c.hasAttribute("formAction")){if(o=c,p=c[lt]||null)y=p.formAction;else if(Rc(o)!==null)continue}else y=p.action;typeof y=="function"?a[i+1]=y:(a.splice(i,3),i-=3),rm(a)}}}function om(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(p){return o=p})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),i||setTimeout(a,20)}function a(){if(!i&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Uc(e){this._internalRoot=e}Pl.prototype.render=Uc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var a=t.current,i=_t();Ff(a,i,e,t,null,null)},Pl.prototype.unmount=Uc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ff(e.current,2,null,e,null,null),Tl(),t[wn]=null}};function Pl(e){this._internalRoot=e}Pl.prototype.unstable_scheduleHydration=function(e){if(e){var t=vu();e={blockedOn:null,target:e,priority:t};for(var a=0;a<qa.length&&t!==0&&t<qa[a].priority;a++);qa.splice(a,0,e),a===0&&im(e)}};var cm=n.version;if(cm!=="19.2.4")throw Error(r(527,cm,"19.2.4"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=v(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var $v={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jl.isDisabled&&Jl.supportsFiber)try{bs=Jl.inject($v),mt=Jl}catch{}}return di.createRoot=function(e,t){if(!u(e))throw Error(r(299));var a=!1,i="",o=ph,c=gh,p=vh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=Zf(e,1,!1,null,null,a,i,null,o,c,p,om),e[wn]=t.current,pc(e),new Uc(t)},di.hydrateRoot=function(e,t,a){if(!u(e))throw Error(r(299));var i=!1,o="",c=ph,p=gh,y=vh,S=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),t=Zf(e,1,!0,t,a??null,i,o,S,c,p,y,om),t.context=Wf(null),a=t.current,i=_t(),i=xr(i),o=Ea(i),o.callback=null,ja(a,o,i),a=i,t.current.lanes=a,Ss(t,a),Vt(t),e[wn]=t.current,pc(e),new Pl(t)},di.version="19.2.4",di}var fm;function Fv(){if(fm)return zc.exports;fm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),zc.exports=Wv(),zc.exports}var ey=Fv();const Zm=N.createContext(null);function ty({children:s}){const[n,l]=N.useState(()=>({name:localStorage.getItem("ngs_name")||"",points:parseInt(localStorage.getItem("ngs_points"))||0,completed:JSON.parse(localStorage.getItem("ngs_completed")||"{}"),parentEmail:localStorage.getItem("ngs_parent_email")||"",notifications:JSON.parse(localStorage.getItem("ngs_notifications")||"[]"),purchases:JSON.parse(localStorage.getItem("ngs_purchases")||"{}"),activeDays:JSON.parse(localStorage.getItem("ngs_active_days")||"[]"),sessionStart:Date.now(),timeSpent:parseInt(localStorage.getItem("ngs_time_spent"))||0,currentCourse:null,currentChapter:0,currentView:"home"})),r=N.useCallback(()=>{localStorage.setItem("ngs_name",n.name),localStorage.setItem("ngs_points",n.points),localStorage.setItem("ngs_completed",JSON.stringify(n.completed)),localStorage.setItem("ngs_parent_email",n.parentEmail),localStorage.setItem("ngs_notifications",JSON.stringify(n.notifications)),localStorage.setItem("ngs_purchases",JSON.stringify(n.purchases)),localStorage.setItem("ngs_active_days",JSON.stringify(n.activeDays)),localStorage.setItem("ngs_time_spent",n.timeSpent)},[n]);N.useEffect(()=>{r()},[n.name,n.points,n.completed,n.parentEmail,n.notifications,n.purchases,n.activeDays,n.timeSpent]),N.useEffect(()=>{const Y=()=>{const K=Date.now()-n.sessionStart;localStorage.setItem("ngs_time_spent",n.timeSpent+K)};return window.addEventListener("beforeunload",Y),()=>window.removeEventListener("beforeunload",Y)},[n.sessionStart,n.timeSpent]);const u=N.useCallback(Y=>{l(K=>({...K,name:Y}))},[]),d=N.useCallback(Y=>{l(K=>({...K,parentEmail:Y}))},[]),f=N.useCallback(Y=>{l(K=>({...K,points:K.points+Y}))},[]),m=N.useCallback((Y,K)=>{l(P=>{const Q=`${Y}_${K}`;return P.completed[Q]?P:{...P,completed:{...P.completed,[Q]:!0},points:P.points+25}})},[]),g=N.useCallback(Y=>{l(K=>({...K,currentCourse:Y,currentChapter:0}))},[]),v=N.useCallback(Y=>{l(K=>({...K,currentChapter:Y}))},[]),b=N.useCallback(Y=>{l(K=>({...K,currentView:Y}))},[]),w=N.useCallback(Y=>{l(K=>({...K,notifications:Y}))},[]),x=N.useCallback(Y=>{l(K=>({...K,purchases:Y}))},[]),_=N.useCallback(Y=>{l(K=>({...K,activeDays:Y}))},[]),[A,E]=N.useState(!1),R=N.useCallback((Y,K)=>{l(P=>({...P,currentView:Y})),window.location.hash=K||Y},[]),z=N.useCallback(Y=>{l(K=>({...K,currentCourse:Y,currentChapter:0,currentView:"courses"})),window.location.hash="courses"},[]),L=N.useCallback(Y=>{const K=`Hi! I'd like to purchase the ${Y==="singleCourse"?"Single Course ($19)":Y==="fullAccess"?"Full Access Bundle ($39)":"Family Plan ($59)"} for NextGen School.`;window.open(`mailto:hello@nextgenschool.aiupskills.com?subject=NextGen School Purchase&body=${encodeURIComponent(K)}`)},[]),M=N.useCallback(Y=>{l(K=>{const P={...K.purchases};return Y==="fullAccess"||Y==="familyPlan"?P.fullAccess=!0:Y==="singleCourse"&&(P[K.currentCourse||"ai"]=!0),{...K,purchases:P}})},[]),V=N.useCallback(()=>{const Y=Object.keys(n.completed).length;return{students:247,chapters:Y||24,badges:Y||50}},[n.completed]),F=N.useCallback(()=>{E(Y=>!Y)},[]),Z={state:n,setState:l,save:r,setName:u,setParentEmail:d,addPoints:f,completeChapter:m,setCurrentCourse:g,setCurrentChapter:v,setCurrentView:b,setNotifications:w,setPurchases:x,setActiveDays:_,navigate:R,openCourse:z,handlePayment:L,handlePurchase:M,getMetrics:V,toggleNotifPanel:F,showNotifPanel:A,notifications:n.notifications};return h.jsx(Zm.Provider,{value:Z,children:s})}function ps(){const s=N.useContext(Zm);if(!s)throw new Error("useApp must be used within AppProvider");return s}function ur(s,n){var l={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&n.indexOf(r)<0&&(l[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(s);u<r.length;u++)n.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(s,r[u])&&(l[r[u]]=s[r[u]]);return l}function ay(s,n,l,r){function u(d){return d instanceof l?d:new l(function(f){f(d)})}return new(l||(l=Promise))(function(d,f){function m(b){try{v(r.next(b))}catch(w){f(w)}}function g(b){try{v(r.throw(b))}catch(w){f(w)}}function v(b){b.done?d(b.value):u(b.value).then(m,g)}v((r=r.apply(s,n||[])).next())})}const ny=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);class nu extends Error{constructor(n,l="FunctionsError",r){super(n),this.name=l,this.context=r}}class sy extends nu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class mm extends nu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class pm extends nu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Pc;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Pc||(Pc={}));class iy{constructor(n,{headers:l={},customFetch:r,region:u=Pc.Any}={}){this.url=n,this.headers=l,this.region=u,this.fetch=ny(r)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return ay(this,arguments,void 0,function*(l,r={}){var u;let d,f;try{const{headers:m,method:g,body:v,signal:b,timeout:w}=r;let x={},{region:_}=r;_||(_=this.region);const A=new URL(`${this.url}/${l}`);_&&_!=="any"&&(x["x-region"]=_,A.searchParams.set("forceFunctionRegion",_));let E;v&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",E=v):typeof v=="string"?(x["Content-Type"]="text/plain",E=v):typeof FormData<"u"&&v instanceof FormData?E=v:(x["Content-Type"]="application/json",E=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?E=JSON.stringify(v):E=v;let R=b;w&&(f=new AbortController,d=setTimeout(()=>f.abort(),w),b?(R=f.signal,b.addEventListener("abort",()=>f.abort())):R=f.signal);const z=yield this.fetch(A.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),m),body:E,signal:R}).catch(F=>{throw new sy(F)}),L=z.headers.get("x-relay-error");if(L&&L==="true")throw new mm(z);if(!z.ok)throw new pm(z);let M=((u=z.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),V;return M==="application/json"?V=yield z.json():M==="application/octet-stream"||M==="application/pdf"?V=yield z.blob():M==="text/event-stream"?V=z:M==="multipart/form-data"?V=yield z.formData():V=yield z.text(),{data:V,error:null,response:z}}catch(m){return{data:null,error:m,response:m instanceof pm||m instanceof mm?m.context:void 0}}finally{d&&clearTimeout(d)}})}}var ly=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},ry=class{constructor(s){var n,l,r;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(n=s.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=s.signal,this.isMaybeSingle=(l=s.isMaybeSingle)!==null&&l!==void 0?l:!1,this.urlLengthLimit=(r=s.urlLengthLimit)!==null&&r!==void 0?r:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=new Headers(this.headers),this.headers.set(s,n),this}then(s,n){var l=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let u=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let f=null,m=null,g=null,v=d.status,b=d.statusText;if(d.ok){var w,x;if(l.method!=="HEAD"){var _;const z=await d.text();z===""||(l.headers.get("Accept")==="text/csv"||l.headers.get("Accept")&&(!((_=l.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?m=z:m=JSON.parse(z))}const E=(w=l.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),R=(x=d.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");E&&R&&R.length>1&&(g=parseInt(R[1])),l.isMaybeSingle&&l.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,v=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var A;const E=await d.text();try{f=JSON.parse(E),Array.isArray(f)&&d.status===404&&(m=[],f=null,v=200,b="OK")}catch{d.status===404&&E===""?(v=204,b="No Content"):f={message:E}}if(f&&l.isMaybeSingle&&(!(f==null||(A=f.details)===null||A===void 0)&&A.includes("0 rows"))&&(f=null,v=200,b="OK"),f&&l.shouldThrowOnError)throw new ly(f)}return{error:f,data:m,count:g,status:v,statusText:b}});return this.shouldThrowOnError||(u=u.catch(d=>{var f;let m="",g="",v="";const b=d?.cause;if(b){var w,x,_,A;const z=(w=b?.message)!==null&&w!==void 0?w:"",L=(x=b?.code)!==null&&x!==void 0?x:"";m=`${(_=d?.name)!==null&&_!==void 0?_:"FetchError"}: ${d?.message}`,m+=`

Caused by: ${(A=b?.name)!==null&&A!==void 0?A:"Error"}: ${z}`,L&&(m+=` (${L})`),b?.stack&&(m+=`
${b.stack}`)}else{var E;m=(E=d?.stack)!==null&&E!==void 0?E:""}const R=this.url.toString().length;return d?.name==="AbortError"||d?.code==="ABORT_ERR"?(v="",g="Request was aborted (timeout or manual cancellation)",R>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${R} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(b?.name==="HeadersOverflowError"||b?.code==="UND_ERR_HEADERS_OVERFLOW")&&(v="",g="HTTP headers exceeded server limits (typically 16KB)",R>this.urlLengthLimit&&(g+=`. Your request URL is ${R} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(f=d?.name)!==null&&f!==void 0?f:"FetchError"}: ${d?.message}`,details:m,hint:g,code:v},data:null,count:null,status:0,statusText:""}})),u.then(s,n)}returns(){return this}overrideTypes(){return this}},oy=class extends ry{select(s){let n=!1;const l=(s??"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:n=!0,nullsFirst:l,foreignTable:r,referencedTable:u=r}={}){const d=u?`${u}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${s}.${n?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:n,referencedTable:l=n}={}){const r=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(r,`${s}`),this}range(s,n,{foreignTable:l,referencedTable:r=l}={}){const u=typeof r>"u"?"offset":`${r}.offset`,d=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(d,`${n-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:n=!1,settings:l=!1,buffers:r=!1,wal:u=!1,format:d="text"}={}){var f;const m=[s?"analyze":null,n?"verbose":null,l?"settings":null,r?"buffers":null,u?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${g}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const gm=new RegExp("[,()]");var us=class extends oy{eq(s,n){return this.url.searchParams.append(s,`eq.${n}`),this}neq(s,n){return this.url.searchParams.append(s,`neq.${n}`),this}gt(s,n){return this.url.searchParams.append(s,`gt.${n}`),this}gte(s,n){return this.url.searchParams.append(s,`gte.${n}`),this}lt(s,n){return this.url.searchParams.append(s,`lt.${n}`),this}lte(s,n){return this.url.searchParams.append(s,`lte.${n}`),this}like(s,n){return this.url.searchParams.append(s,`like.${n}`),this}likeAllOf(s,n){return this.url.searchParams.append(s,`like(all).{${n.join(",")}}`),this}likeAnyOf(s,n){return this.url.searchParams.append(s,`like(any).{${n.join(",")}}`),this}ilike(s,n){return this.url.searchParams.append(s,`ilike.${n}`),this}ilikeAllOf(s,n){return this.url.searchParams.append(s,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(s,n){return this.url.searchParams.append(s,`ilike(any).{${n.join(",")}}`),this}regexMatch(s,n){return this.url.searchParams.append(s,`match.${n}`),this}regexIMatch(s,n){return this.url.searchParams.append(s,`imatch.${n}`),this}is(s,n){return this.url.searchParams.append(s,`is.${n}`),this}isDistinct(s,n){return this.url.searchParams.append(s,`isdistinct.${n}`),this}in(s,n){const l=Array.from(new Set(n)).map(r=>typeof r=="string"&&gm.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}notIn(s,n){const l=Array.from(new Set(n)).map(r=>typeof r=="string"&&gm.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(s,`not.in.(${l})`),this}contains(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cs.{${n.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(n)}`),this}containedBy(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cd.{${n.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(n)}`),this}rangeGt(s,n){return this.url.searchParams.append(s,`sr.${n}`),this}rangeGte(s,n){return this.url.searchParams.append(s,`nxl.${n}`),this}rangeLt(s,n){return this.url.searchParams.append(s,`sl.${n}`),this}rangeLte(s,n){return this.url.searchParams.append(s,`nxr.${n}`),this}rangeAdjacent(s,n){return this.url.searchParams.append(s,`adj.${n}`),this}overlaps(s,n){return typeof n=="string"?this.url.searchParams.append(s,`ov.${n}`):this.url.searchParams.append(s,`ov.{${n.join(",")}}`),this}textSearch(s,n,{config:l,type:r}={}){let u="";r==="plain"?u="pl":r==="phrase"?u="ph":r==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${u}fts${d}.${n}`),this}match(s){return Object.entries(s).forEach(([n,l])=>{this.url.searchParams.append(n,`eq.${l}`)}),this}not(s,n,l){return this.url.searchParams.append(s,`not.${n}.${l}`),this}or(s,{foreignTable:n,referencedTable:l=n}={}){const r=l?`${l}.or`:"or";return this.url.searchParams.append(r,`(${s})`),this}filter(s,n,l){return this.url.searchParams.append(s,`${n}.${l}`),this}},cy=class{constructor(s,{headers:n={},schema:l,fetch:r,urlLengthLimit:u=8e3}){this.url=s,this.headers=new Headers(n),this.schema=l,this.fetch=r,this.urlLengthLimit=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,n){const{head:l=!1,count:r}=n??{},u=l?"HEAD":"GET";let d=!1;const f=(s??"*").split("").map(v=>/\s/.test(v)&&!d?"":(v==='"'&&(d=!d),v)).join(""),{url:m,headers:g}=this.cloneRequestState();return m.searchParams.set("select",f),r&&g.append("Prefer",`count=${r}`),new us({method:u,url:m,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:n,defaultToNull:l=!0}={}){var r;const u="POST",{url:d,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),l||f.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(m.length>0){const g=[...new Set(m)].map(v=>`"${v}"`);d.searchParams.set("columns",g.join(","))}}return new us({method:u,url:d,headers:f,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:n,ignoreDuplicates:l=!1,count:r,defaultToNull:u=!0}={}){var d;const f="POST",{url:m,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),n!==void 0&&m.searchParams.set("on_conflict",n),r&&g.append("Prefer",`count=${r}`),u||g.append("Prefer","missing=default"),Array.isArray(s)){const v=s.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(v.length>0){const b=[...new Set(v)].map(w=>`"${w}"`);m.searchParams.set("columns",b.join(","))}}return new us({method:f,url:m,headers:g,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:n}={}){var l;const r="PATCH",{url:u,headers:d}=this.cloneRequestState();return n&&d.append("Prefer",`count=${n}`),new us({method:r,url:u,headers:d,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var n;const l="DELETE",{url:r,headers:u}=this.cloneRequestState();return s&&u.append("Prefer",`count=${s}`),new us({method:l,url:r,headers:u,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function bi(s){"@babel/helpers - typeof";return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bi(s)}function uy(s,n){if(bi(s)!="object"||!s)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var r=l.call(s,n);if(bi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function dy(s){var n=uy(s,"string");return bi(n)=="symbol"?n:n+""}function hy(s,n,l){return(n=dy(n))in s?Object.defineProperty(s,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[n]=l,s}function vm(s,n){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),l.push.apply(l,r)}return l}function Xl(s){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?vm(Object(l),!0).forEach(function(r){hy(s,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):vm(Object(l)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(l,r))})}return s}var fy=class Wm{constructor(n,{headers:l={},schema:r,fetch:u,timeout:d,urlLengthLimit:f=8e3}={}){this.url=n,this.headers=new Headers(l),this.schemaName=r,this.urlLengthLimit=f;const m=u??globalThis.fetch;d!==void 0&&d>0?this.fetch=(g,v)=>{const b=new AbortController,w=setTimeout(()=>b.abort(),d),x=v?.signal;if(x){if(x.aborted)return clearTimeout(w),m(g,v);const _=()=>{clearTimeout(w),b.abort()};return x.addEventListener("abort",_,{once:!0}),m(g,Xl(Xl({},v),{},{signal:b.signal})).finally(()=>{clearTimeout(w),x.removeEventListener("abort",_)})}return m(g,Xl(Xl({},v),{},{signal:b.signal})).finally(()=>clearTimeout(w))}:this.fetch=m}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new cy(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Wm(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,l={},{head:r=!1,get:u=!1,count:d}={}){var f;let m;const g=new URL(`${this.url}/rpc/${n}`);let v;const b=_=>_!==null&&typeof _=="object"&&(!Array.isArray(_)||_.some(b)),w=r&&Object.values(l).some(b);w?(m="POST",v=l):r||u?(m=r?"HEAD":"GET",Object.entries(l).filter(([_,A])=>A!==void 0).map(([_,A])=>[_,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([_,A])=>{g.searchParams.append(_,A)})):(m="POST",v=l);const x=new Headers(this.headers);return w?x.set("Prefer",d?`count=${d},return=minimal`:"return=minimal"):d&&x.set("Prefer",`count=${d}`),new us({method:m,url:g,headers:x,schema:this.schemaName,body:v,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}};class my{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const l=globalThis.process;if(l){const r=l.versions;if(r&&r.node){const u=r.node,d=parseInt(u.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let l=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(l+=`

Suggested solution: ${n.workaround}`),new Error(l)}static createWebSocket(n,l){const r=this.getWebSocketConstructor();return new r(n,l)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const py="2.95.3",gy=`realtime-js/${py}`,vy="1.0.0",Fm="2.0.0",ym=Fm,Jc=1e4,yy=1e3,by=100;var Ia;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ia||(Ia={}));var Ke;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Ke||(Ke={}));var $t;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})($t||($t={}));var Xc;(function(s){s.websocket="websocket"})(Xc||(Xc={}));var pn;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(pn||(pn={}));class wy{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,l){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return l(this._binaryEncodeUserBroadcastPush(n));let r=[n.join_ref,n.ref,n.topic,n.event,n.payload];return l(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(n){var l;return this._isArrayBuffer((l=n.payload)===null||l===void 0?void 0:l.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var l,r;const u=(r=(l=n.payload)===null||l===void 0?void 0:l.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(n){var l,r;const u=(r=(l=n.payload)===null||l===void 0?void 0:l.payload)!==null&&r!==void 0?r:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,l,r){var u,d;const f=n.topic,m=(u=n.ref)!==null&&u!==void 0?u:"",g=(d=n.join_ref)!==null&&d!==void 0?d:"",v=n.payload.event,b=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},w=Object.keys(b).length===0?"":JSON.stringify(b);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+m.length+f.length+v.length+w.length,_=new ArrayBuffer(this.HEADER_LENGTH+x);let A=new DataView(_),E=0;A.setUint8(E++,this.KINDS.userBroadcastPush),A.setUint8(E++,g.length),A.setUint8(E++,m.length),A.setUint8(E++,f.length),A.setUint8(E++,v.length),A.setUint8(E++,w.length),A.setUint8(E++,l),Array.from(g,z=>A.setUint8(E++,z.charCodeAt(0))),Array.from(m,z=>A.setUint8(E++,z.charCodeAt(0))),Array.from(f,z=>A.setUint8(E++,z.charCodeAt(0))),Array.from(v,z=>A.setUint8(E++,z.charCodeAt(0))),Array.from(w,z=>A.setUint8(E++,z.charCodeAt(0)));var R=new Uint8Array(_.byteLength+r.byteLength);return R.set(new Uint8Array(_),0),R.set(new Uint8Array(r),_.byteLength),R.buffer}decode(n,l){if(this._isArrayBuffer(n)){let r=this._binaryDecode(n);return l(r)}if(typeof n=="string"){const r=JSON.parse(n),[u,d,f,m,g]=r;return l({join_ref:u,ref:d,topic:f,event:m,payload:g})}return l({})}_binaryDecode(n){const l=new DataView(n),r=l.getUint8(0),u=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,l,u)}_decodeUserBroadcast(n,l,r){const u=l.getUint8(1),d=l.getUint8(2),f=l.getUint8(3),m=l.getUint8(4);let g=this.HEADER_LENGTH+4;const v=r.decode(n.slice(g,g+u));g=g+u;const b=r.decode(n.slice(g,g+d));g=g+d;const w=r.decode(n.slice(g,g+f));g=g+f;const x=n.slice(g,n.byteLength),_=m===this.JSON_ENCODING?JSON.parse(r.decode(x)):x,A={type:this.BROADCAST_EVENT,event:b,payload:_};return f>0&&(A.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(n){var l;return n instanceof ArrayBuffer||((l=n?.constructor)===null||l===void 0?void 0:l.name)==="ArrayBuffer"}_pick(n,l){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([r])=>l.includes(r)))}}class ep{constructor(n,l){this.callback=n,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ne||(Ne={}));const bm=(s,n,l={})=>{var r;const u=(r=l.skipTypes)!==null&&r!==void 0?r:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=Sy(f,s,n,u),d),{}):{}},Sy=(s,n,l,r)=>{const u=n.find(m=>m.name===s),d=u?.type,f=l[s];return d&&!r.includes(d)?tp(d,f):Qc(f)},tp=(s,n)=>{if(s.charAt(0)==="_"){const l=s.slice(1,s.length);return jy(n,l)}switch(s){case Ne.bool:return _y(n);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return xy(n);case Ne.json:case Ne.jsonb:return Ey(n);case Ne.timestamp:return Ay(n);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return Qc(n);default:return Qc(n)}},Qc=s=>s,_y=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},xy=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},Ey=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},jy=(s,n)=>{if(typeof s!="string")return s;const l=s.length-1,r=s[l];if(s[0]==="{"&&r==="}"){let d;const f=s.slice(1,l);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>tp(n,m))}return s},Ay=s=>typeof s=="string"?s.replace(" ","T"):s,ap=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Bc{constructor(n,l,r={},u=Jc){this.channel=n,this.event=l,this.payload=r,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,l){var r;return this._hasReceived(n)&&l((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:n,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:l}){this.recHooks.filter(r=>r.status===n).forEach(r=>r.callback(l))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var wm;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(wm||(wm={}));class gi{constructor(n,l){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=l?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},u=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gi.syncState(this.state,u,d,f),this.pendingDiffs.forEach(g=>{this.state=gi.syncDiff(this.state,g,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(r.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=gi.syncDiff(this.state,u,d,f),m())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,l,r,u){const d=this.cloneDeep(n),f=this.transformState(l),m={},g={};return this.map(d,(v,b)=>{f[v]||(g[v]=b)}),this.map(f,(v,b)=>{const w=d[v];if(w){const x=b.map(R=>R.presence_ref),_=w.map(R=>R.presence_ref),A=b.filter(R=>_.indexOf(R.presence_ref)<0),E=w.filter(R=>x.indexOf(R.presence_ref)<0);A.length>0&&(m[v]=A),E.length>0&&(g[v]=E)}else m[v]=b}),this.syncDiff(d,{joins:m,leaves:g},r,u)}static syncDiff(n,l,r,u){const{joins:d,leaves:f}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return r||(r=()=>{}),u||(u=()=>{}),this.map(d,(m,g)=>{var v;const b=(v=n[m])!==null&&v!==void 0?v:[];if(n[m]=this.cloneDeep(g),b.length>0){const w=n[m].map(_=>_.presence_ref),x=b.filter(_=>w.indexOf(_.presence_ref)<0);n[m].unshift(...x)}r(m,b,g)}),this.map(f,(m,g)=>{let v=n[m];if(!v)return;const b=g.map(w=>w.presence_ref);v=v.filter(w=>b.indexOf(w.presence_ref)<0),n[m]=v,u(m,v,g),v.length===0&&delete n[m]}),n}static map(n,l){return Object.getOwnPropertyNames(n).map(r=>l(r,n[r]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((l,r)=>{const u=n[r];return"metas"in u?l[r]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):l[r]=u,l},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sm;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Sm||(Sm={}));var vi;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(vi||(vi={}));var ha;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(ha||(ha={}));class fs{constructor(n,l={config:{}},r){var u,d;if(this.topic=n,this.params=l,this.socket=r,this.bindings={},this.state=Ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new Bc(this,$t.join,this.params,this.timeout),this.rejoinTimer=new ep(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ke.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on($t.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new gi(this),this.broadcastEndpointURL=ap(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,l=this.timeout){var r,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Ke.closed){const{config:{broadcast:f,presence:m,private:g}}=this.params,v=(u=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(_=>_.filter))!==null&&u!==void 0?u:[],b=!!this.bindings[vi.PRESENCE]&&this.bindings[vi.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,w={},x={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(_=>n?.(ha.CHANNEL_ERROR,_)),this._onClose(()=>n?.(ha.CLOSED)),this.updateJoinPayload(Object.assign({config:x},w)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:_})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){n?.(ha.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,R=(A=E?.length)!==null&&A!==void 0?A:0,z=[];for(let L=0;L<R;L++){const M=E[L],{filter:{event:V,schema:F,table:Z,filter:Y}}=M,K=_&&_[L];if(K&&K.event===V&&fs.isFilterValueEqual(K.schema,F)&&fs.isFilterValueEqual(K.table,Z)&&fs.isFilterValueEqual(K.filter,Y))z.push(Object.assign(Object.assign({},M),{id:K.id}));else{this.unsubscribe(),this.state=Ke.errored,n?.(ha.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=z,n&&n(ha.SUBSCRIBED);return}}).receive("error",_=>{this.state=Ke.errored,n?.(ha.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{n?.(ha.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,l={}){return await this.send({type:"presence",event:"track",payload:n},l.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,l,r){return this.state===Ke.joined&&n===vi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,l,r)}async httpSend(n,l,r={}){var u;if(l==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:l,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=r.timeout)!==null&&u!==void 0?u:this.timeout);if(m.status===202)return{success:!0};let g=m.statusText;try{const v=await m.json();g=v.error||v.message||g}catch{}return Promise.reject(new Error(g))}async send(n,l={}){var r,u;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=n,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(r=l.timeout)!==null&&r!==void 0?r:this.timeout);return await((u=v.body)===null||u===void 0?void 0:u.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,g;const v=this._push(n.type,n,l.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&d("ok"),v.receive("ok",()=>d("ok")),v.receive("error",()=>d("error")),v.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ke.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($t.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(u=>{r=new Bc(this,$t.leave,{},n),r.receive("ok",()=>{l(),u("ok")}).receive("timeout",()=>{l(),u("timed out")}).receive("error",()=>{u("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ke.closed,this.bindings={}}async _fetchWithTimeout(n,l,r){const u=new AbortController,d=setTimeout(()=>u.abort(),r),f=await this.socket.fetch(n,Object.assign(Object.assign({},l),{signal:u.signal}));return clearTimeout(d),f}_push(n,l,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Bc(this,n,l,r);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>by){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(n,l,r){return l}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,l,r){var u,d;const f=n.toLocaleLowerCase(),{close:m,error:g,leave:v,join:b}=$t;if(r&&[m,g,v,b].indexOf(f)>=0&&r!==this._joinRef())return;let x=this._onMessage(f,l,r);if(l&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(_=>{var A,E,R;return((A=_.filter)===null||A===void 0?void 0:A.event)==="*"||((R=(E=_.filter)===null||E===void 0?void 0:E.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===f}).map(_=>_.callback(x,r)):(d=this.bindings[f])===null||d===void 0||d.filter(_=>{var A,E,R,z,L,M;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in _){const V=_.id,F=(A=_.filter)===null||A===void 0?void 0:A.event;return V&&((E=l.ids)===null||E===void 0?void 0:E.includes(V))&&(F==="*"||F?.toLocaleLowerCase()===((R=l.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const V=(L=(z=_?.filter)===null||z===void 0?void 0:z.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return V==="*"||V===((M=l?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===f}).map(_=>{if(typeof x=="object"&&"ids"in x){const A=x.data,{schema:E,table:R,commit_timestamp:z,type:L,errors:M}=A;x=Object.assign(Object.assign({},{schema:E,table:R,commit_timestamp:z,eventType:L,new:{},old:{},errors:M}),this._getPayloadRecords(A))}_.callback(x,r)})}_isClosed(){return this.state===Ke.closed}_isJoined(){return this.state===Ke.joined}_isJoining(){return this.state===Ke.joining}_isLeaving(){return this.state===Ke.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,l,r){const u=n.toLocaleLowerCase(),d={type:u,filter:l,callback:r};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(n,l){const r=n.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===r&&fs.isEqual(u.filter,l))})),this}static isEqual(n,l){if(Object.keys(n).length!==Object.keys(l).length)return!1;for(const r in n)if(n[r]!==l[r])return!1;return!0}static isFilterValueEqual(n,l){return(n??void 0)===(l??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on($t.close,{},n)}_onError(n){this._on($t.error,{},l=>n(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ke.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const l={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(l.new=bm(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(l.old=bm(n.columns,n.old_record)),l}}const qc=()=>{},Ql={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ty=[1e3,2e3,5e3,1e4],Cy=1e4,ky=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ny{constructor(n,l){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jc,this.transport=null,this.heartbeatIntervalMs=Ql.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qc,this.ref=0,this.reconnectTimer=null,this.vsn=ym,this.logger=qc,this.conn=null,this.sendBuffer=[],this.serializer=new wy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...d)=>u(...d):(...d)=>fetch(...d),!(!((r=l?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${n}/${Xc.websocket}`,this.httpEndpoint=ap(n),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=my.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const l=n.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,l??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const l=await n.unsubscribe();return l==="ok"&&this._remove(n),this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const n=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,l,r){this.logger(n,l,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ia.connecting:return pn.Connecting;case Ia.open:return pn.Open;case Ia.closing:return pn.Closing;default:return pn.Closed}}isConnected(){return this.connectionState()===pn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,l={config:{}}){const r=`realtime:${n}`,u=this.getChannels().find(d=>d.topic===r);if(u)return u;{const d=new fs(`realtime:${n}`,l,this);return this.channels.push(d),d}}push(n){const{topic:l,event:r,payload:u,ref:d}=n,f=()=>{this.encode(n,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${l} ${r} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(yy,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},Ql.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let l=this.channels.find(r=>r.topic===n&&(r._isJoined()||r._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${n}"`),l.unsubscribe())}_remove(n){this.channels=this.channels.filter(l=>l.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply"&&l.ref&&l.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error",v)}catch(b){this.log("error","error in heartbeat callback",b)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:u,payload:d,ref:f}=l,m=f?`(${f})`:"",g=d.status||"";this.log("receive",`${g} ${r} ${u} ${m}`.trim(),d),this.channels.filter(v=>v._isMember(r)).forEach(v=>v._trigger(u,d,f)),this._triggerStateCallbacks("message",l)})}_clearTimer(n){var l;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Ia.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ia.open||this.conn.readyState===Ia.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(l=>{this.log("error","error waiting for auth on connect",l),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this._terminateWorker()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var l;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(l){this.log("error","error in heartbeat callback",l)}}_triggerChanError(){this.channels.forEach(n=>n._trigger($t.error))}_appendParams(n,l){if(Object.keys(l).length===0)return n;const r=n.match(/\?/)?"&":"?",u=new URLSearchParams(l);return`${n}${r}${u}`}_workerObjectUrl(n){let l;if(n)l=n;else{const r=new Blob([ky],{type:"application/javascript"});l=URL.createObjectURL(r)}return l}_setConnectionState(n,l=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(n=null){let l,r=!1;if(n)l=n,r=!0;else if(this.accessToken)try{l=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),l=this.accessTokenValue}else l=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(u=>{const d={access_token:l,version:gy};l&&u.updateJoinPayload(d),u.joinedOnce&&u._isJoined()&&u._push($t.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(l=>{this.log("error",`Error setting auth in ${n}`,l)})}_triggerStateCallbacks(n,l){try{this.stateChangeCallbacks[n].forEach(r=>{try{r(l)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(r){this.log("error",`error triggering ${n} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ep(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ql.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var l,r,u,d,f,m,g,v,b,w,x,_;switch(this.transport=(l=n?.transport)!==null&&l!==void 0?l:null,this.timeout=(r=n?.timeout)!==null&&r!==void 0?r:Jc,this.heartbeatIntervalMs=(u=n?.heartbeatIntervalMs)!==null&&u!==void 0?u:Ql.HEARTBEAT_INTERVAL,this.worker=(d=n?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=n?.heartbeatCallback)!==null&&m!==void 0?m:qc,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:ym,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=n?.reconnectAfterMs)!==null&&v!==void 0?v:(A=>Ty[A-1]||Cy),this.vsn){case vy:this.encode=(b=n?.encode)!==null&&b!==void 0?b:((A,E)=>E(JSON.stringify(A))),this.decode=(w=n?.decode)!==null&&w!==void 0?w:((A,E)=>E(JSON.parse(A)));break;case Fm:this.encode=(x=n?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(_=n?.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var wi=class extends Error{constructor(s,n){super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Oy(s,n,l){const r=new URL(n,s);if(l)for(const[u,d]of Object.entries(l))d!==void 0&&r.searchParams.set(u,d);return r.toString()}async function Ry(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function Dy(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:l,path:r,query:u,body:d,headers:f}){const m=Oy(s.baseUrl,r,u),g=await Ry(s.auth),v=await n(m,{method:l,headers:{...d?{"Content-Type":"application/json"}:{},...g,...f},body:d?JSON.stringify(d):void 0}),b=await v.text(),w=(v.headers.get("content-type")||"").includes("application/json"),x=w&&b?JSON.parse(b):b;if(!v.ok){const _=w?x:void 0,A=_?.error;throw new wi(A?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:A?.type,icebergCode:A?.code,details:_})}return{status:v.status,headers:v.headers,data:x}}}}function Zl(s){return s.join("")}var Uy=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:Zl(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(s,n){const l={namespace:s.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:l})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Zl(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zl(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Zl(s.namespace)}`}),!0}catch(n){if(n instanceof wi&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(l){if(l instanceof wi&&l.status===409)return;throw l}}};function ss(s){return s.join("")}var zy=class{constructor(s,n="",l){this.client=s,this.prefix=n,this.accessDelegation=l}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ss(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const l={};return this.accessDelegation&&(l["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ss(s.namespace)}/tables`,body:n,headers:l})).data.metadata}async updateTable(s,n){const l=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ss(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":l.data["metadata-location"],metadata:l.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ss(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ss(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ss(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(l){if(l instanceof wi&&l.status===404)return!1;throw l}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(l){if(l instanceof wi&&l.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw l}}},My=class{constructor(s){let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const l=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=Dy({baseUrl:l,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new Uy(this.client,n),this.tableOps=new zy(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}},dr=class extends Error{constructor(s,n="storage",l,r){super(s),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=l,this.statusCode=r}};function hr(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Wl=class extends dr{constructor(s,n,l,r="storage"){super(s,r,n,l),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},np=class extends dr{constructor(s,n,l="storage"){super(s,l),this.name=l==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const Ly=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),By=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Zc=s=>{if(Array.isArray(s))return s.map(l=>Zc(l));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([l,r])=>{const u=l.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[u]=Zc(r)}),n},qy=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function Si(s){"@babel/helpers - typeof";return Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Si(s)}function $y(s,n){if(Si(s)!="object"||!s)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var r=l.call(s,n);if(Si(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function Hy(s){var n=$y(s,"string");return Si(n)=="symbol"?n:n+""}function Iy(s,n,l){return(n=Hy(n))in s?Object.defineProperty(s,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[n]=l,s}function _m(s,n){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),l.push.apply(l,r)}return l}function re(s){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?_m(Object(l),!0).forEach(function(r){Iy(s,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):_m(Object(l)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(l,r))})}return s}const xm=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},Gy=async(s,n,l,r)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!l?.noResolveJson){const u=s,d=u.status||500;if(typeof u.json=="function")u.json().then(f=>{const m=f?.statusCode||f?.code||d+"";n(new Wl(xm(f),d,m,r))}).catch(()=>{if(r==="vectors"){const f=d+"";n(new Wl(u.statusText||`HTTP ${d} error`,d,f,r))}else{const f=d+"";n(new Wl(u.statusText||`HTTP ${d} error`,d,f,r))}});else{const f=d+"";n(new Wl(u.statusText||`HTTP ${d} error`,d,f,r))}}else n(new np(xm(s),s,r))},Vy=(s,n,l,r)=>{const u={method:s,headers:n?.headers||{}};return s==="GET"||s==="HEAD"||!r?re(re({},u),l):(By(r)?(u.headers=re({"Content-Type":"application/json"},n?.headers),u.body=JSON.stringify(r)):u.body=r,n?.duplex&&(u.duplex=n.duplex),re(re({},u),l))};async function hi(s,n,l,r,u,d,f){return new Promise((m,g)=>{s(l,Vy(n,r,u,d)).then(v=>{if(!v.ok)throw v;if(r?.noResolveJson)return v;if(f==="vectors"){const b=v.headers.get("content-type");if(v.headers.get("content-length")==="0"||v.status===204)return{};if(!b||!b.includes("application/json"))return{}}return v.json()}).then(v=>m(v)).catch(v=>Gy(v,g,r,f))})}function sp(s="storage"){return{get:async(n,l,r,u)=>hi(n,"GET",l,r,u,void 0,s),post:async(n,l,r,u,d)=>hi(n,"POST",l,u,d,r,s),put:async(n,l,r,u,d)=>hi(n,"PUT",l,u,d,r,s),head:async(n,l,r,u)=>hi(n,"HEAD",l,re(re({},r),{},{noResolveJson:!0}),u,void 0,s),remove:async(n,l,r,u,d)=>hi(n,"DELETE",l,u,d,r,s)}}const Yy=sp("storage"),{get:_i,post:qt,put:Wc,head:Ky,remove:su}=Yy,Et=sp("vectors");var gs=class{constructor(s,n={},l,r="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.fetch=Ly(l),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(s){var n=this;try{return{data:await s(),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(hr(l))return{data:null,error:l};throw l}}},Py=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(hr(n))return{data:null,error:n};throw n}}};let ip;ip=Symbol.toStringTag;var Jy=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n,this[ip]="BlobDownloadBuilder",this.promise=null}asStream(){return new Py(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.getPromise().then(s,n)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(hr(n))return{data:null,error:n};throw n}}};const Xy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Em={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Qy=class extends gs{constructor(s,n={},l,r){super(s,n,r,"storage"),this.bucketId=l}async uploadOrUpdate(s,n,l,r){var u=this;return u.handleOperation(async()=>{let d;const f=re(re({},Em),r);let m=re(re({},u.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&l instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),g&&d.append("metadata",u.encodeMetadata(g)),d.append("",l)):typeof FormData<"u"&&l instanceof FormData?(d=l,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),g&&!d.has("metadata")&&d.append("metadata",u.encodeMetadata(g))):(d=l,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,g&&(m["x-metadata"]=u.toBase64(u.encodeMetadata(g))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),r?.headers&&(m=re(re({},m),r.headers));const v=u._removeEmptyFolders(n),b=u._getFinalPath(v),w=await(s=="PUT"?Wc:qt)(u.fetch,`${u.url}/object/${b}`,d,re({headers:m},f?.duplex?{duplex:f.duplex}:{}));return{path:v,id:w.Id,fullPath:w.Key}})}async upload(s,n,l){return this.uploadOrUpdate("POST",s,n,l)}async uploadToSignedUrl(s,n,l,r){var u=this;const d=u._removeEmptyFolders(s),f=u._getFinalPath(d),m=new URL(u.url+`/object/upload/sign/${f}`);return m.searchParams.set("token",n),u.handleOperation(async()=>{let g;const v=re({upsert:Em.upsert},r),b=re(re({},u.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&l instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",l)):typeof FormData<"u"&&l instanceof FormData?(g=l,g.append("cacheControl",v.cacheControl)):(g=l,b["cache-control"]=`max-age=${v.cacheControl}`,b["content-type"]=v.contentType),{path:d,fullPath:(await Wc(u.fetch,m.toString(),g,{headers:b})).Key}})}async createSignedUploadUrl(s,n){var l=this;return l.handleOperation(async()=>{let r=l._getFinalPath(s);const u=re({},l.headers);n?.upsert&&(u["x-upsert"]="true");const d=await qt(l.fetch,`${l.url}/object/upload/sign/${r}`,{},{headers:u}),f=new URL(l.url+d.url),m=f.searchParams.get("token");if(!m)throw new dr("No token returned by API");return{signedUrl:f.toString(),path:s,token:m}})}async update(s,n,l){return this.uploadOrUpdate("PUT",s,n,l)}async move(s,n,l){var r=this;return r.handleOperation(async()=>await qt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:s,destinationKey:n,destinationBucket:l?.destinationBucket},{headers:r.headers}))}async copy(s,n,l){var r=this;return r.handleOperation(async()=>({path:(await qt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:s,destinationKey:n,destinationBucket:l?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(s,n,l){var r=this;return r.handleOperation(async()=>{let u=r._getFinalPath(s),d=await qt(r.fetch,`${r.url}/object/sign/${u}`,re({expiresIn:n},l?.transform?{transform:l.transform}:{}),{headers:r.headers});const f=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{signedUrl:encodeURI(`${r.url}${d.signedURL}${f}`)}})}async createSignedUrls(s,n,l){var r=this;return r.handleOperation(async()=>{const u=await qt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:n,paths:s},{headers:r.headers}),d=l?.download?`&download=${l.download===!0?"":l.download}`:"";return u.map(f=>re(re({},f),{},{signedUrl:f.signedURL?encodeURI(`${r.url}${f.signedURL}${d}`):null}))})}download(s,n,l){const r=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),d=u?`?${u}`:"",f=this._getFinalPath(s),m=()=>_i(this.fetch,`${this.url}/${r}/${f}${d}`,{headers:this.headers,noResolveJson:!0},l);return new Jy(m,this.shouldThrowOnError)}async info(s){var n=this;const l=n._getFinalPath(s);return n.handleOperation(async()=>Zc(await _i(n.fetch,`${n.url}/object/info/${l}`,{headers:n.headers})))}async exists(s){var n=this;const l=n._getFinalPath(s);try{return await Ky(n.fetch,`${n.url}/object/${l}`,{headers:n.headers}),{data:!0,error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(hr(r)&&r instanceof np){const u=r.originalError;if([400,404].includes(u?.status))return{data:!1,error:r}}throw r}}getPublicUrl(s,n){const l=this._getFinalPath(s),r=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&r.push(u);const d=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&r.push(f);let m=r.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${l}${m}`)}}}async remove(s){var n=this;return n.handleOperation(async()=>await su(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:s},{headers:n.headers}))}async list(s,n,l){var r=this;return r.handleOperation(async()=>{const u=re(re(re({},Xy),n),{},{prefix:s||""});return await qt(r.fetch,`${r.url}/object/list/${r.bucketId}`,u,{headers:r.headers},l)})}async listV2(s,n){var l=this;return l.handleOperation(async()=>{const r=re({},s);return await qt(l.fetch,`${l.url}/object/list-v2/${l.bucketId}`,r,{headers:l.headers},n)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}};const Zy="2.95.3",Ti={"X-Client-Info":`storage-js/${Zy}`};var Wy=class extends gs{constructor(s,n={},l,r){const u=new URL(s);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase."));const d=u.href.replace(/\/$/,""),f=re(re({},Ti),n);super(d,f,l,"storage")}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const l=n.listBucketOptionsToQueryString(s);return await _i(n.fetch,`${n.url}/bucket${l}`,{headers:n.headers})})}async getBucket(s){var n=this;return n.handleOperation(async()=>await _i(n.fetch,`${n.url}/bucket/${s}`,{headers:n.headers}))}async createBucket(s,n={public:!1}){var l=this;return l.handleOperation(async()=>await qt(l.fetch,`${l.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:l.headers}))}async updateBucket(s,n){var l=this;return l.handleOperation(async()=>await Wc(l.fetch,`${l.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:l.headers}))}async emptyBucket(s){var n=this;return n.handleOperation(async()=>await qt(n.fetch,`${n.url}/bucket/${s}/empty`,{},{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await su(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(s){const n={};return s&&("limit"in s&&(n.limit=String(s.limit)),"offset"in s&&(n.offset=String(s.offset)),s.search&&(n.search=s.search),s.sortColumn&&(n.sortColumn=s.sortColumn),s.sortOrder&&(n.sortOrder=s.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},Fy=class extends gs{constructor(s,n={},l){const r=s.replace(/\/$/,""),u=re(re({},Ti),n);super(r,u,l,"storage")}async createBucket(s){var n=this;return n.handleOperation(async()=>await qt(n.fetch,`${n.url}/bucket`,{name:s},{headers:n.headers}))}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const l=new URLSearchParams;s?.limit!==void 0&&l.set("limit",s.limit.toString()),s?.offset!==void 0&&l.set("offset",s.offset.toString()),s?.sortColumn&&l.set("sortColumn",s.sortColumn),s?.sortOrder&&l.set("sortOrder",s.sortOrder),s?.search&&l.set("search",s.search);const r=l.toString(),u=r?`${n.url}/bucket?${r}`:`${n.url}/bucket`;return await _i(n.fetch,u,{headers:n.headers})})}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await su(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}from(s){var n=this;if(!qy(s))throw new dr("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const l=new My({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(l,{get(u,d){const f=u[d];return typeof f!="function"?f:async(...m)=>{try{return{data:await f.apply(u,m),error:null}}catch(g){if(r)throw g;return{data:null,error:g}}}}})}},eb=class extends gs{constructor(s,n={},l){const r=s.replace(/\/$/,""),u=re(re({},Ti),{},{"Content-Type":"application/json"},n);super(r,u,l,"vectors")}async createIndex(s){var n=this;return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/CreateIndex`,s,{headers:n.headers})||{})}async getIndex(s,n){var l=this;return l.handleOperation(async()=>await Et.post(l.fetch,`${l.url}/GetIndex`,{vectorBucketName:s,indexName:n},{headers:l.headers}))}async listIndexes(s){var n=this;return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/ListIndexes`,s,{headers:n.headers}))}async deleteIndex(s,n){var l=this;return l.handleOperation(async()=>await Et.post(l.fetch,`${l.url}/DeleteIndex`,{vectorBucketName:s,indexName:n},{headers:l.headers})||{})}},tb=class extends gs{constructor(s,n={},l){const r=s.replace(/\/$/,""),u=re(re({},Ti),{},{"Content-Type":"application/json"},n);super(r,u,l,"vectors")}async putVectors(s){var n=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/PutVectors`,s,{headers:n.headers})||{})}async getVectors(s){var n=this;return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/GetVectors`,s,{headers:n.headers}))}async listVectors(s){var n=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/ListVectors`,s,{headers:n.headers}))}async queryVectors(s){var n=this;return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/QueryVectors`,s,{headers:n.headers}))}async deleteVectors(s){var n=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/DeleteVectors`,s,{headers:n.headers})||{})}},ab=class extends gs{constructor(s,n={},l){const r=s.replace(/\/$/,""),u=re(re({},Ti),{},{"Content-Type":"application/json"},n);super(r,u,l,"vectors")}async createBucket(s){var n=this;return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}async getBucket(s){var n=this;return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:s},{headers:n.headers}))}async listBuckets(s={}){var n=this;return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/ListVectorBuckets`,s,{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await Et.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}},nb=class extends ab{constructor(s,n={}){super(s,n.headers||{},n.fetch)}from(s){return new sb(this.url,this.headers,s,this.fetch)}async createBucket(s){var n=()=>super.createBucket,l=this;return n().call(l,s)}async getBucket(s){var n=()=>super.getBucket,l=this;return n().call(l,s)}async listBuckets(s={}){var n=()=>super.listBuckets,l=this;return n().call(l,s)}async deleteBucket(s){var n=()=>super.deleteBucket,l=this;return n().call(l,s)}},sb=class extends eb{constructor(s,n,l,r){super(s,n,r),this.vectorBucketName=l}async createIndex(s){var n=()=>super.createIndex,l=this;return n().call(l,re(re({},s),{},{vectorBucketName:l.vectorBucketName}))}async listIndexes(s={}){var n=()=>super.listIndexes,l=this;return n().call(l,re(re({},s),{},{vectorBucketName:l.vectorBucketName}))}async getIndex(s){var n=()=>super.getIndex,l=this;return n().call(l,l.vectorBucketName,s)}async deleteIndex(s){var n=()=>super.deleteIndex,l=this;return n().call(l,l.vectorBucketName,s)}index(s){return new ib(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},ib=class extends tb{constructor(s,n,l,r,u){super(s,n,u),this.vectorBucketName=l,this.indexName=r}async putVectors(s){var n=()=>super.putVectors,l=this;return n().call(l,re(re({},s),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async getVectors(s){var n=()=>super.getVectors,l=this;return n().call(l,re(re({},s),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async listVectors(s={}){var n=()=>super.listVectors,l=this;return n().call(l,re(re({},s),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async queryVectors(s){var n=()=>super.queryVectors,l=this;return n().call(l,re(re({},s),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async deleteVectors(s){var n=()=>super.deleteVectors,l=this;return n().call(l,re(re({},s),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}},lb=class extends Wy{constructor(s,n={},l,r){super(s,n,l,r)}from(s){return new Qy(this.url,this.headers,s,this.fetch)}get vectors(){return new nb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Fy(this.url+"/iceberg",this.headers,this.fetch)}};const lp="2.95.3",ds=30*1e3,Fc=3,$c=Fc*ds,rb="http://localhost:9999",ob="supabase.auth.token",cb={"X-Client-Info":`gotrue-js/${lp}`},eu="X-Supabase-Api-Version",rp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ub=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,db=600*1e3;class xi extends Error{constructor(n,l,r){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=r}}function te(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class hb extends xi{constructor(n,l,r){super(n,l,r),this.name="AuthApiError",this.status=l,this.code=r}}function fb(s){return te(s)&&s.name==="AuthApiError"}class gn extends xi{constructor(n,l){super(n),this.name="AuthUnknownError",this.originalError=l}}class ma extends xi{constructor(n,l,r,u){super(n,r,u),this.name=l,this.status=r}}class xt extends ma{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hc(s){return te(s)&&s.name==="AuthSessionMissingError"}class is extends ma{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fl extends ma{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class er extends ma{constructor(n,l=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mb(s){return te(s)&&s.name==="AuthImplicitGrantRedirectError"}class jm extends ma{constructor(n,l=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pb extends ma{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class tu extends ma{constructor(n,l){super(n,"AuthRetryableFetchError",l,void 0)}}function Ic(s){return te(s)&&s.name==="AuthRetryableFetchError"}class Am extends ma{constructor(n,l,r){super(n,"AuthWeakPasswordError",l,"weak_password"),this.reasons=r}}class au extends ma{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tm=` 	
\r=`.split(""),gb=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<Tm.length;n+=1)s[Tm[n].charCodeAt(0)]=-2;for(let n=0;n<nr.length;n+=1)s[nr[n].charCodeAt(0)]=n;return s})();function Cm(s,n,l){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const r=n.queue>>n.queuedBits-6&63;l(nr[r]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const r=n.queue>>n.queuedBits-6&63;l(nr[r]),n.queuedBits-=6}}function op(s,n,l){const r=gb[s];if(r>-1)for(n.queue=n.queue<<6|r,n.queuedBits+=6;n.queuedBits>=8;)l(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function km(s){const n=[],l=f=>{n.push(String.fromCodePoint(f))},r={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{bb(f,r,l)};for(let f=0;f<s.length;f+=1)op(s.charCodeAt(f),u,d);return n.join("")}function vb(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function yb(s,n){for(let l=0;l<s.length;l+=1){let r=s.charCodeAt(l);if(r>55295&&r<=56319){const u=(r-55296)*1024&65535;r=(s.charCodeAt(l+1)-56320&65535|u)+65536,l+=1}vb(r,n)}}function bb(s,n,l){if(n.utf8seq===0){if(s<=127){l(s);return}for(let r=1;r<6;r+=1)if((s>>7-r&1)===0){n.utf8seq=r;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&l(n.codepoint)}}function ms(s){const n=[],l={queue:0,queuedBits:0},r=u=>{n.push(u)};for(let u=0;u<s.length;u+=1)op(s.charCodeAt(u),l,r);return new Uint8Array(n)}function wb(s){const n=[];return yb(s,l=>n.push(l)),new Uint8Array(n)}function yn(s){const n=[],l={queue:0,queuedBits:0},r=u=>{n.push(u)};return s.forEach(u=>Cm(u,l,r)),Cm(null,l,r),n.join("")}function Sb(s){return Math.round(Date.now()/1e3)+s}function _b(){return Symbol("auth-callback")}const nt=()=>typeof window<"u"&&typeof document<"u",hn={tested:!1,writable:!1},cp=()=>{if(!nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hn.tested)return hn.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),hn.tested=!0,hn.writable=!0}catch{hn.tested=!0,hn.writable=!1}return hn.writable};function xb(s){const n={},l=new URL(s);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((u,d)=>{n[d]=u})}catch{}return l.searchParams.forEach((r,u)=>{n[u]=r}),n}const up=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Eb=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",hs=async(s,n,l)=>{await s.setItem(n,JSON.stringify(l))},fn=async(s,n)=>{const l=await s.getItem(n);if(!l)return null;try{return JSON.parse(l)}catch{return l}},at=async(s,n)=>{await s.removeItem(n)};class fr{constructor(){this.promise=new fr.promiseConstructor((n,l)=>{this.resolve=n,this.reject=l})}}fr.promiseConstructor=Promise;function tr(s){const n=s.split(".");if(n.length!==3)throw new au("Invalid JWT structure");for(let r=0;r<n.length;r++)if(!ub.test(n[r]))throw new au("JWT not in base64url format");return{header:JSON.parse(km(n[0])),payload:JSON.parse(km(n[1])),signature:ms(n[2]),raw:{header:n[0],payload:n[1]}}}async function jb(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function Ab(s,n){return new Promise((r,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await s(d);if(!n(d,null,f)){r(f);return}}catch(f){if(!n(d,f)){u(f);return}}})()})}function Tb(s){return("0"+s.toString(16)).substr(-2)}function Cb(){const n=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=l.length;let u="";for(let d=0;d<56;d++)u+=l.charAt(Math.floor(Math.random()*r));return u}return crypto.getRandomValues(n),Array.from(n,Tb).join("")}async function kb(s){const l=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",l),u=new Uint8Array(r);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function Nb(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const l=await kb(s);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ls(s,n,l=!1){const r=Cb();let u=r;l&&(u+="/PASSWORD_RECOVERY"),await hs(s,`${n}-code-verifier`,u);const d=await Nb(r);return[d,r===d?"plain":"s256"]}const Ob=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rb(s){const n=s.headers.get(eu);if(!n||!n.match(Ob))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Db(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function Ub(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function rs(s){if(!zb.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gc(){const s={};return new Proxy(s,{get:(n,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const r=l.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mb(s,n){return new Proxy(s,{get:(l,r,u)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const d=r.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(l,r,u)}return!n.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(l,r,u)}})}function Nm(s){return JSON.parse(JSON.stringify(s))}const mn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Lb=[502,503,504];async function Om(s){var n;if(!Eb(s))throw new tu(mn(s),0);if(Lb.includes(s.status))throw new tu(mn(s),s.status);let l;try{l=await s.json()}catch(d){throw new gn(mn(d),d)}let r;const u=Rb(s);if(u&&u.getTime()>=rp["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?r=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(r=l.error_code),r){if(r==="weak_password")throw new Am(mn(l),s.status,((n=l.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(r==="session_not_found")throw new xt}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new Am(mn(l),s.status,l.weak_password.reasons);throw new hb(mn(l),s.status||500,r)}const Bb=(s,n,l,r)=>{const u={method:s,headers:n?.headers||{}};return s==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),u.body=JSON.stringify(r),Object.assign(Object.assign({},u),l))};async function le(s,n,l,r){var u;const d=Object.assign({},r?.headers);d[eu]||(d[eu]=rp["2024-01-01"].name),r?.jwt&&(d.Authorization=`Bearer ${r.jwt}`);const f=(u=r?.query)!==null&&u!==void 0?u:{};r?.redirectTo&&(f.redirect_to=r.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await qb(s,n,l+m,{headers:d,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(g):{data:Object.assign({},g),error:null}}async function qb(s,n,l,r,u,d){const f=Bb(n,r,u,d);let m;try{m=await s(l,Object.assign({},f))}catch(g){throw console.error(g),new tu(mn(g),0)}if(m.ok||await Om(m),r?.noResolveJson)return m;try{return await m.json()}catch(g){await Om(g)}}function Bt(s){var n;let l=null;Ib(s)&&(l=Object.assign({},s),s.expires_at||(l.expires_at=Sb(s.expires_in)));const r=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:l,user:r},error:null}}function Rm(s){const n=Bt(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((l,r)=>l&&typeof r=="string",!0)&&(n.data.weak_password=s.weak_password),n}function Va(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function $b(s){return{data:s,error:null}}function Hb(s){const{action_link:n,email_otp:l,hashed_token:r,redirect_to:u,verification_type:d}=s,f=ur(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:l,hashed_token:r,redirect_to:u,verification_type:d},g=Object.assign({},f);return{data:{properties:m,user:g},error:null}}function Dm(s){return s}function Ib(s){return s.access_token&&s.refresh_token&&s.expires_in}const Vc=["global","local","others"];class Gb{constructor({url:n="",headers:l={},fetch:r}){this.url=n,this.headers=l,this.fetch=up(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,l=Vc[0]){if(Vc.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vc.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async inviteUserByEmail(n,l={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:Va})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async generateLink(n){try{const{options:l}=n,r=ur(n,["options"]),u=Object.assign(Object.assign({},r),l);return"newEmail"in r&&(u.new_email=r?.newEmail,delete u.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Hb,redirectTo:l?.redirectTo})}catch(l){if(te(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(n){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Va})}catch(l){if(te(l))return{data:{user:null},error:l};throw l}}async listUsers(n){var l,r,u,d,f,m,g;try{const v={nextPage:null,lastPage:0,total:0},b=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(l=n?.page)===null||l===void 0?void 0:l.toString())!==null&&r!==void 0?r:"",per_page:(d=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Dm});if(b.error)throw b.error;const w=await b.json(),x=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(A=>{const E=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(A.split(";")[1].split("=")[1]);v[`${R}Page`]=E}),v.total=parseInt(x)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(te(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){rs(n);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Va})}catch(l){if(te(l))return{data:{user:null},error:l};throw l}}async updateUserById(n,l){rs(n);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:l,headers:this.headers,xform:Va})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async deleteUser(n,l=!1){rs(n);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:l},xform:Va})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async _listFactors(n){rs(n.userId);try{const{data:l,error:r}=await le(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:l,error:r}}catch(l){if(te(l))return{data:null,error:l};throw l}}async _deleteFactor(n){rs(n.userId),rs(n.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(l){if(te(l))return{data:null,error:l};throw l}}async _listOAuthClients(n){var l,r,u,d,f,m,g;try{const v={nextPage:null,lastPage:0,total:0},b=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(l=n?.page)===null||l===void 0?void 0:l.toString())!==null&&r!==void 0?r:"",per_page:(d=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Dm});if(b.error)throw b.error;const w=await b.json(),x=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(A=>{const E=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(A.split(";")[1].split("=")[1]);v[`${R}Page`]=E}),v.total=parseInt(x)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(te(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(n){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(te(l))return{data:null,error:l};throw l}}async _getOAuthClient(n){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(te(l))return{data:null,error:l};throw l}}async _updateOAuthClient(n,l){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:l,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(n){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(l){if(te(l))return{data:null,error:l};throw l}}async _regenerateOAuthClientSecret(n){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(te(l))return{data:null,error:l};throw l}}}function Um(s={}){return{getItem:n=>s[n]||null,setItem:(n,l)=>{s[n]=l},removeItem:n=>{delete s[n]}}}const os={debug:!!(globalThis&&cp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dp extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Vb extends dp{}async function Yb(s,n,l){os.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const r=new globalThis.AbortController;return n>0&&setTimeout(()=>{r.abort(),os.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async u=>{if(u){os.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,u.name);try{return await l()}finally{os.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,u.name)}}else{if(n===0)throw os.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Vb(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(os.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}}))}function Kb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hp(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function Pb(s){return parseInt(s,16)}function Jb(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,r=>r.toString(16).padStart(2,"0")).join("")}function Xb(s){var n;const{chainId:l,domain:r,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:g,resources:v,scheme:b,uri:w,version:x}=s;{if(!Number.isInteger(l))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${l}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const _=hp(s.address),A=b?`${b}://${r}`:r,E=s.statement?`${s.statement}
`:"",R=`${A} wants you to sign in with your Ethereum account:
${_}

${E}`;let z=`URI: ${w}
Version: ${x}
Chain ID: ${l}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&(z+=`
Expiration Time: ${u.toISOString()}`),m&&(z+=`
Not Before: ${m.toISOString()}`),g&&(z+=`
Request ID: ${g}`),v){let L=`
Resources:`;for(const M of v){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);L+=`
- ${M}`}z+=L}return`${R}
${z}`}class Ve extends Error{constructor({message:n,code:l,cause:r,name:u}){var d;super(n,{cause:r}),this.__isWebAuthnError=!0,this.name=(d=u??(r instanceof Error?r.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=l}}class sr extends Ve{constructor(n,l){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:n}),this.name="WebAuthnUnknownError",this.originalError=l}}function Qb({error:s,options:n}){var l,r,u;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ve({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((l=d.authenticatorSelection)===null||l===void 0?void 0:l.requireResidentKey)===!0)return new Ve({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((r=d.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ve({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Ve({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Ve({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Ve({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Ve({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Ve({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(fp(f)){if(d.rp.id!==f)return new Ve({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Ve({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Ve({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Zb({error:s,options:n}){const{publicKey:l}=n;if(!l)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ve({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Ve({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const r=window.location.hostname;if(fp(r)){if(l.rpId!==r)return new Ve({message:`The RP ID "${l.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Ve({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class Wb{createNewAbortSignal(){if(this.controller){const l=new Error("Cancelling existing WebAuthn API call for new one");l.name="AbortError",this.controller.abort(l)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Fb=new Wb;function e0(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:l,excludeCredentials:r}=s,u=ur(s,["challenge","user","excludeCredentials"]),d=ms(n).buffer,f=Object.assign(Object.assign({},l),{id:ms(l.id).buffer}),m=Object.assign(Object.assign({},u),{challenge:d,user:f});if(r&&r.length>0){m.excludeCredentials=new Array(r.length);for(let g=0;g<r.length;g++){const v=r[g];m.excludeCredentials[g]=Object.assign(Object.assign({},v),{id:ms(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return m}function t0(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:l}=s,r=ur(s,["challenge","allowCredentials"]),u=ms(n).buffer,d=Object.assign(Object.assign({},r),{challenge:u});if(l&&l.length>0){d.allowCredentials=new Array(l.length);for(let f=0;f<l.length;f++){const m=l[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:ms(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function a0(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const l=s;return{id:s.id,rawId:s.id,response:{attestationObject:yn(new Uint8Array(s.response.attestationObject)),clientDataJSON:yn(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=l.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function n0(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const l=s,r=s.getClientExtensionResults(),u=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:yn(new Uint8Array(u.authenticatorData)),clientDataJSON:yn(new Uint8Array(u.clientDataJSON)),signature:yn(new Uint8Array(u.signature)),userHandle:u.userHandle?yn(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(n=l.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function fp(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function zm(){var s,n;return!!(nt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function s0(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new sr("Browser returned unexpected credential type",n)}:{data:null,error:new sr("Empty credential response",n)}}catch(n){return{data:null,error:Qb({error:n,options:s})}}}async function i0(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new sr("Browser returned unexpected credential type",n)}:{data:null,error:new sr("Empty credential response",n)}}catch(n){return{data:null,error:Zb({error:n,options:s})}}}const l0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},r0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ir(...s){const n=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),l=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),r={};for(const u of s)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))r[d]=f;else if(l(f))r[d]=f;else if(n(f)){const m=r[d];n(m)?r[d]=ir(m,f):r[d]=ir(f)}else r[d]=f}return r}function o0(s,n){return ir(l0,s,n||{})}function c0(s,n){return ir(r0,s,n||{})}class u0{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:l,friendlyName:r,signal:u},d){var f;try{const{data:m,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:l});if(!m)return{data:null,error:g};const v=u??Fb.createNewAbortSignal();if(m.webauthn.type==="create"){const{user:b}=m.webauthn.credential_options.publicKey;if(!b.name){const w=r;if(w)b.name=`${b.id}:${w}`;else{const _=(await this.client.getUser()).data.user,A=((f=_?.user_metadata)===null||f===void 0?void 0:f.name)||_?.email||_?.id||"User";b.name=`${b.id}:${A}`}}b.displayName||(b.displayName=b.name)}switch(m.webauthn.type){case"create":{const b=o0(m.webauthn.credential_options.publicKey,d?.create),{data:w,error:x}=await s0({publicKey:b,signal:v});return w?{data:{factorId:n,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:w}},error:null}:{data:null,error:x}}case"request":{const b=c0(m.webauthn.credential_options.publicKey,d?.request),{data:w,error:x}=await i0(Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:b,signal:v}));return w?{data:{factorId:n,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:w}},error:null}:{data:null,error:x}}}}catch(m){return te(m)?{data:null,error:m}:{data:null,error:new gn("Unexpected error in challenge",m)}}}async _verify({challengeId:n,factorId:l,webauthn:r}){return this.client.mfa.verify({factorId:l,challengeId:n,webauthn:r})}async _authenticate({factorId:n,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!l)return{data:null,error:new xi("rpId is required for WebAuthn authentication")};try{if(!zm())return{data:null,error:new gn("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:n,webauthn:{rpId:l,rpOrigins:r},signal:u},{request:d});if(!f)return{data:null,error:m};const{webauthn:g}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:g.type,rpId:l,rpOrigins:r,credential_response:g.credential_response}})}catch(f){return te(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!l)return{data:null,error:new xi("rpId is required for WebAuthn registration")};try{if(!zm())return{data:null,error:new gn("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===n&&x.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:m};const{data:g,error:v}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:l,rpOrigins:r},signal:u},{create:d});return g?this._verify({factorId:f.id,challengeId:g.challengeId,webauthn:{rpId:l,rpOrigins:r,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:v}}catch(f){return te(f)?{data:null,error:f}:{data:null,error:new gn("Unexpected error in register",f)}}}}Kb();const d0={url:rb,storageKey:ob,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Mm(s,n,l){return await l()}const cs={};class Ei{get jwks(){var n,l;return(l=(n=cs[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(n){cs[this.storageKey]=Object.assign(Object.assign({},cs[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,l;return(l=(n=cs[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){cs[this.storageKey]=Object.assign(Object.assign({},cs[this.storageKey]),{cachedAt:n})}constructor(n){var l,r,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},d0),n);if(this.storageKey=d.storageKey,this.instanceID=(l=Ei.nextInstanceID[this.storageKey])!==null&&l!==void 0?l:0,Ei.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&nt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new Gb({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=up(d.fetch),this.lock=d.lock||Mm,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,this.lockAcquireTimeout=d.lockAcquireTimeout,d.lock?this.lock=d.lock:this.persistSession&&nt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Yb:this.lock=Mm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new u0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:cp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Um(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=Um(this.memoryStorage)),nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f);try{await this._notifyAllSubscribers(f.data.event,f.data.session,!1)}catch(m){this._debug("#broadcastChannel","error",m)}})}this.initialize().catch(f=>{this._debug("#initialize()","error",f)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lp}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let l={},r="none";if(nt()&&(l=xb(window.location.href),this._isImplicitGrantCallback(l)?r="implicit":await this._isPKCECallback(l)&&(r="pkce")),nt()&&this.detectSessionInUrl&&r!=="none"){const{data:u,error:d}=await this._getSessionFromURL(l,r);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),mb(d)){const g=(n=d.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:d}}return{error:d}}const{session:f,redirectType:m}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return te(l)?this._returnResult({error:l}):this._returnResult({error:new gn("Unexpected error during initialization",l)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var l,r,u;try{const d=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(l=n?.options)===null||l===void 0?void 0:l.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(u=n?.options)===null||u===void 0?void 0:u.captchaToken}},xform:Bt}),{data:f,error:m}=d;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(d){if(te(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(n){var l,r,u;try{let d;if("email"in n){const{email:b,password:w,options:x}=n;let _=null,A=null;this.flowType==="pkce"&&([_,A]=await ls(this.storage,this.storageKey)),d=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:b,password:w,data:(l=x?.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:_,code_challenge_method:A},xform:Bt})}else if("phone"in n){const{phone:b,password:w,options:x}=n;d=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(r=x?.data)!==null&&r!==void 0?r:{},channel:(u=x?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Bt})}else throw new Fl("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return await at(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(d){if(await at(this.storage,`${this.storageKey}-code-verifier`),te(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(n){try{let l;if("email"in n){const{email:d,password:f,options:m}=n;l=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Rm})}else if("phone"in n){const{phone:d,password:f,options:m}=n;l=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Rm})}else throw new Fl("You must provide either an email or phone number and a password");const{data:r,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!r||!r.session||!r.user){const d=new is;return this._returnResult({data:{user:null,session:null},error:d})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:u})}catch(l){if(te(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOAuth(n){var l,r,u,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(l=n.options)===null||l===void 0?void 0:l.redirectTo,scopes:(r=n.options)===null||r===void 0?void 0:r.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:l}=n;switch(l){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}}async signInWithEthereum(n){var l,r,u,d,f,m,g,v,b,w,x;let _,A;if("message"in n)_=n.message,A=n.signature;else{const{chain:E,wallet:R,statement:z,options:L}=n;let M;if(nt())if(typeof R=="object")M=R;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")M=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=R}const V=new URL((l=L?.url)!==null&&l!==void 0?l:window.location.href),F=await M.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Z=hp(F[0]);let Y=(r=L?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!Y){const P=await M.request({method:"eth_chainId"});Y=Pb(P)}const K={domain:V.host,address:Z,statement:z,uri:V.href,version:"1",chainId:Y,nonce:(u=L?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=L?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=L?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=L?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(v=L?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(b=L?.signInWithEthereum)===null||b===void 0?void 0:b.resources};_=Xb(K),A=await M.request({method:"personal_sign",params:[Jb(_),Z]})}try{const{data:E,error:R}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:A},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Bt});if(R)throw R;if(!E||!E.session||!E.user){const z=new is;return this._returnResult({data:{user:null,session:null},error:z})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:R})}catch(E){if(te(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(n){var l,r,u,d,f,m,g,v,b,w,x,_;let A,E;if("message"in n)A=n.message,E=n.signature;else{const{chain:R,wallet:z,statement:L,options:M}=n;let V;if(nt())if(typeof z=="object")V=z;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))V=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=z}const F=new URL((l=M?.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in V&&V.signIn){const Z=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M?.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),L?{statement:L}:null));let Y;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")Y=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)Y=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)A=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),E=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${F.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(u=(r=M?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=M?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((f=M?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((m=M?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((g=M?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((v=M?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((w=(b=M?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...M.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const Z=await V.signMessage(new TextEncoder().encode(A),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=Z}}try{const{data:R,error:z}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:yn(E)},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Bt});if(z)throw z;if(!R||!R.session||!R.user){const L=new is;return this._returnResult({data:{user:null,session:null},error:L})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:z})}catch(R){if(te(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(n){const l=await fn(this.storage,`${this.storageKey}-code-verifier`),[r,u]=(l??"").split("/");try{if(!r&&this.flowType==="pkce")throw new pb;const{data:d,error:f}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:r},xform:Bt});if(await at(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const m=new is;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(await at(this.storage,`${this.storageKey}-code-verifier`),te(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(n){try{const{options:l,provider:r,token:u,access_token:d,nonce:f}=n,m=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Bt}),{data:g,error:v}=m;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g||!g.session||!g.user){const b=new is;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:v})}catch(l){if(te(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOtp(n){var l,r,u,d,f;try{if("email"in n){const{email:m,options:g}=n;let v=null,b=null;this.flowType==="pkce"&&([v,b]=await ls(this.storage,this.storageKey));const{error:w}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(l=g?.data)!==null&&l!==void 0?l:{},create_user:(r=g?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:b},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in n){const{phone:m,options:g}=n,{data:v,error:b}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(u=g?.data)!==null&&u!==void 0?u:{},create_user:(d=g?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(f=g?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:b})}throw new Fl("You must provide either an email or phone number.")}catch(m){if(await at(this.storage,`${this.storageKey}-code-verifier`),te(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(n){var l,r;try{let u,d;"options"in n&&(u=(l=n.options)===null||l===void 0?void 0:l.redirectTo,d=(r=n.options)===null||r===void 0?void 0:r.captchaToken);const{data:f,error:m}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:Bt});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,v=f.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(u){if(te(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(n){var l,r,u,d,f;try{let m=null,g=null;this.flowType==="pkce"&&([m,g]=await ls(this.storage,this.storageKey));const v=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(r=(l=n.options)===null||l===void 0?void 0:l.redirectTo)!==null&&r!==void 0?r:void 0}),!((u=n?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:g}),headers:this.headers,xform:$b});return!((d=v.data)===null||d===void 0)&&d.url&&nt()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(m){if(await at(this.storage,`${this.storageKey}-code-verifier`),te(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:l},error:r}=n;if(r)throw r;if(!l)throw new xt;const{error:u}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(n){if(te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const l=`${this.url}/resend`;if("email"in n){const{email:r,type:u,options:d}=n,{error:f}=await le(this.fetch,"POST",l,{headers:this.headers,body:{email:r,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:r,type:u,options:d}=n,{data:f,error:m}=await le(this.fetch,"POST",l,{headers:this.headers,body:{phone:r,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:m})}throw new Fl("You must provide either an email or phone number and a type")}catch(l){if(te(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async l=>l))}async _acquireLock(n,l){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await r,await l()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=l();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await n(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const l=await fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?n=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const r=n.expires_at?n.expires_at*1e3-Date.now()<$c:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",n.expires_at),!r){if(this.userStorage){const f=await fn(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=Gc()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=Mb(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const l=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return l.data.user&&(this.suppressGetSessionWarning=!0),l}async _getUser(n){try{return n?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Va}):await this._useSession(async l=>{var r,u,d;const{data:f,error:m}=l;if(m)throw m;return!(!((r=f.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xt}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:Va})})}catch(l){if(te(l))return Hc(l)&&(await this._removeSession(),await at(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:l});throw l}}async updateUser(n,l={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,l))}async _updateUser(n,l={}){try{return await this._useSession(async r=>{const{data:u,error:d}=r;if(d)throw d;if(!u.session)throw new xt;const f=u.session;let m=null,g=null;this.flowType==="pkce"&&n.email!=null&&([m,g]=await ls(this.storage,this.storageKey));const{data:v,error:b}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:g}),jwt:f.access_token,xform:Va});if(b)throw b;return f.user=v.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(r){if(await at(this.storage,`${this.storageKey}-code-verifier`),te(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new xt;const l=Date.now()/1e3;let r=l,u=!0,d=null;const{payload:f}=tr(n.access_token);if(f.exp&&(r=f.exp,u=r<=l),u){const{data:m,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:g}=await this._getUser(n.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});d={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:r-l,expires_at:r},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(l){if(te(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async l=>{var r;if(!n){const{data:f,error:m}=l;if(m)throw m;n=(r=f.session)!==null&&r!==void 0?r:void 0}if(!n?.refresh_token)throw new xt;const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(l){if(te(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async _getSessionFromURL(n,l){try{if(!nt())throw new er("No browser detected.");if(n.error||n.error_description||n.error_code)throw new er(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new jm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new er("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new jm("No code detected.");const{data:L,error:M}=await this._exchangeCodeForSession(n.code);if(M)throw M;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:m,expires_at:g,token_type:v}=n;if(!d||!m||!f||!v)throw new er("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(m);let x=b+w;g&&(x=parseInt(g));const _=x-b;_*1e3<=ds&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${w}s`);const A=x-w;b-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,x,b):b-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,x,b);const{data:E,error:R}=await this._getUser(d);if(R)throw R;const z={provider_token:r,provider_refresh_token:u,access_token:d,expires_in:w,expires_at:x,refresh_token:f,token_type:v,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:z,redirectType:n.type},error:null})}catch(r){if(te(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const l=await fn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&l)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async l=>{var r;const{data:u,error:d}=l;if(d&&!Hc(d))return this._returnResult({error:d});const f=(r=u.session)===null||r===void 0?void 0:r.access_token;if(f){const{error:m}=await this.admin.signOut(f,n);if(m&&!(fb(m)&&(m.status===404||m.status===401||m.status===403)||Hc(m)))return this._returnResult({error:m})}return n!=="others"&&(await this._removeSession(),await at(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const l=_b(),r={id:l,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:r}}}async _emitInitialSession(n){return await this._useSession(async l=>{var r,u;try{const{data:{session:d},error:f}=l;if(f)throw f;await((r=this.stateChangeEmitters.get(n))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,l={}){let r=null,u=null;this.flowType==="pkce"&&([r,u]=await ls(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:r,code_challenge_method:u,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(d){if(await at(this.storage,`${this.storageKey}-code-verifier`),te(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var n;try{const{data:l,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(n=l.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var l;try{const{data:r,error:u}=await this._useSession(async d=>{var f,m,g,v,b;const{data:w,error:x}=d;if(x)throw x;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",_,{headers:this.headers,jwt:(b=(v=w.session)===null||v===void 0?void 0:v.access_token)!==null&&b!==void 0?b:void 0})});if(u)throw u;return nt()&&!(!((l=n.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:n.provider,url:r?.url},error:null})}catch(r){if(te(r))return this._returnResult({data:{provider:n.provider,url:null},error:r});throw r}}async linkIdentityIdToken(n){return await this._useSession(async l=>{var r;try{const{error:u,data:{session:d}}=l;if(u)throw u;const{options:f,provider:m,token:g,access_token:v,nonce:b}=n,w=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=d?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:m,id_token:g,access_token:v,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Bt}),{data:x,error:_}=w;return _?this._returnResult({data:{user:null,session:null},error:_}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new is}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:_}))}catch(u){if(await at(this.storage,`${this.storageKey}-code-verifier`),te(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(n){try{return await this._useSession(async l=>{var r,u;const{data:d,error:f}=l;if(f)throw f;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(r=d.session)===null||r===void 0?void 0:r.access_token)!==null&&u!==void 0?u:void 0})})}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}}async _refreshAccessToken(n){const l=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{const r=Date.now();return await Ab(async u=>(u>0&&await jb(200*Math.pow(2,u-1)),this._debug(l,"refreshing attempt",u),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Bt})),(u,d)=>{const f=200*Math.pow(2,u);return d&&Ic(d)&&Date.now()+f-r<ds})}catch(r){if(this._debug(l,"error",r),te(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(l,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,l){const r=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",l,"url",r),nt()&&!l.skipBrowserRedirect&&window.location.assign(r),{data:{provider:n,url:r},error:null}}async _recoverAndRefresh(){var n,l;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const u=await fn(this.storage,this.storageKey);if(u&&this.userStorage){let f=await fn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await hs(this.userStorage,this.storageKey+"-user",f)),u.user=(n=f?.user)!==null&&n!==void 0?n:Gc()}else if(u&&!u.user&&!u.user){const f=await fn(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await at(this.storage,this.storageKey+"-user"),await hs(this.storage,this.storageKey,u)):u.user=Gc()}if(this._debug(r,"session from storage",u),!this._isValidSession(u)){this._debug(r,"session is not valid"),u!==null&&await this._removeSession();return}const d=((l=u.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<$c;if(this._debug(r,`session has${d?"":" not"} expired with margin of ${$c}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),Ic(f)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(u.access_token);!m&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(r,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(r,"error",u),console.error(u);return}finally{this._debug(r,"end")}}async _callRefreshToken(n){var l,r;if(!n)throw new xt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new fr;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new xt;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(u,"error",d),te(d)){const f={data:null,error:d};return Ic(d)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(f),f}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,l,r=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",l,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:n,session:l});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,l)}catch(g){d.push(g)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await at(this.storage,`${this.storageKey}-code-verifier`);const l=Object.assign({},n),r=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&l.user&&await hs(this.userStorage,this.storageKey+"-user",{user:l.user});const u=Object.assign({},l);delete u.user;const d=Nm(u);await hs(this.storage,this.storageKey,d)}else{const u=Nm(l);await hs(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await at(this.storage,this.storageKey),await at(this.storage,this.storageKey+"-code-verifier"),await at(this.storage,this.storageKey+"-user"),this.userStorage&&await at(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&nt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),ds);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const l=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=l,l&&typeof l=="object"&&typeof l.unref=="function"?l.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(l)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const l=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,l&&clearTimeout(l)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async l=>{const{data:{session:r}}=l;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((r.expires_at*1e3-n)/ds);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${ds}ms, refresh threshold is ${Fc} ticks`),u<=Fc&&await this._callRefreshToken(r.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof dp)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const l=`#_onVisibilityChanged(${n})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,l,r){const u=[`provider=${encodeURIComponent(l)}`];if(r?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&u.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[d,f]=await ls(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(m.toString())}if(r?.queryParams){const d=new URLSearchParams(r.queryParams);u.push(d.toString())}return r?.skipBrowserRedirect&&u.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async l=>{var r;const{data:u,error:d}=l;return d?this._returnResult({data:null,error:d}):await le(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(r=u?.session)===null||r===void 0?void 0:r.access_token})})}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}}async _enroll(n){try{return await this._useSession(async l=>{var r,u;const{data:d,error:f}=l;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:v}=await le(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(r=d?.session)===null||r===void 0?void 0:r.access_token});return v?this._returnResult({data:null,error:v}):(n.factorType==="totp"&&g.type==="totp"&&(!((u=g?.totp)===null||u===void 0)&&u.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var r;const{data:u,error:d}=l;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?a0(n.webauthn.credential_response):n0(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:g}=await le(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(r=u?.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:g}))})}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var r;const{data:u,error:d}=l;if(d)return this._returnResult({data:null,error:d});const f=await le(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(r=u?.session)===null||r===void 0?void 0:r.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:e0(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:t0(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}})}async _challengeAndVerify(n){const{data:l,error:r}=await this._challenge({factorId:n.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:n.factorId,challengeId:l.id,code:n.code})}async _listFactors(){var n;const{data:{user:l},error:r}=await this.getUser();if(r)return{data:null,error:r};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=l?.factors)!==null&&n!==void 0?n:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(n){var l,r,u,d;if(n)try{const{payload:_}=tr(n);let A=null;_.aal&&(A=_.aal);let E=A;const{data:{user:R},error:z}=await this.getUser(n);if(z)return this._returnResult({data:null,error:z});((r=(l=R?.factors)===null||l===void 0?void 0:l.filter(V=>V.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(E="aal2");const M=_.amr||[];return{data:{currentLevel:A,nextLevel:E,currentAuthenticationMethods:M},error:null}}catch(_){if(te(_))return this._returnResult({data:null,error:_});throw _}const{data:{session:f},error:m}=await this.getSession();if(m)return this._returnResult({data:null,error:m});if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=tr(f.access_token);let v=null;g.aal&&(v=g.aal);let b=v;((d=(u=f.user.factors)===null||u===void 0?void 0:u.filter(_=>_.status==="verified"))!==null&&d!==void 0?d:[]).length>0&&(b="aal2");const x=g.amr||[];return{data:{currentLevel:v,nextLevel:b,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async l=>{const{data:{session:r},error:u}=l;return u?this._returnResult({data:null,error:u}):r?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new xt})})}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}}async _approveAuthorization(n,l){try{return await this._useSession(async r=>{const{data:{session:u},error:d}=r;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new xt});const f=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&nt()&&!l?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(n,l){try{return await this._useSession(async r=>{const{data:{session:u},error:d}=r;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new xt});const f=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&nt()&&!l?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:l},error:r}=n;return r?this._returnResult({data:null,error:r}):l?await le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new xt})})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async l=>{const{data:{session:r},error:u}=l;return u?this._returnResult({data:null,error:u}):r?(await le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new xt})})}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(n,l={keys:[]}){let r=l.keys.find(m=>m.kid===n);if(r)return r;const u=Date.now();if(r=this.jwks.keys.find(m=>m.kid===n),r&&this.jwks_cached_at+db>u)return r;const{data:d,error:f}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,r=d.keys.find(m=>m.kid===n),!r)?null:r}async getClaims(n,l={}){try{let r=n;if(!r){const{data:_,error:A}=await this.getSession();if(A||!_.session)return this._returnResult({data:null,error:A});r=_.session.access_token}const{header:u,payload:d,signature:f,raw:{header:m,payload:g}}=tr(r);l?.allowExpired||Db(d.exp);const v=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,l?.keys?{keys:l.keys}:l?.jwks);if(!v){const{error:_}=await this.getUser(r);if(_)throw _;return{data:{claims:d,header:u,signature:f},error:null}}const b=Ub(u.alg),w=await crypto.subtle.importKey("jwk",v,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,f,wb(`${m}.${g}`)))throw new au("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}}Ei.nextInstanceID={};const h0=Ei,f0="2.95.3";let mi="";typeof Deno<"u"?mi="deno":typeof document<"u"?mi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mi="react-native":mi="node";const m0={"X-Client-Info":`supabase-js-${mi}/${f0}`},p0={headers:m0},g0={schema:"public"},v0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},y0={};function ji(s){"@babel/helpers - typeof";return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ji(s)}function b0(s,n){if(ji(s)!="object"||!s)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var r=l.call(s,n);if(ji(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function w0(s){var n=b0(s,"string");return ji(n)=="symbol"?n:n+""}function S0(s,n,l){return(n=w0(n))in s?Object.defineProperty(s,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[n]=l,s}function Lm(s,n){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),l.push.apply(l,r)}return l}function Le(s){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?Lm(Object(l),!0).forEach(function(r){S0(s,r,l[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):Lm(Object(l)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(l,r))})}return s}const _0=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),x0=()=>Headers,E0=(s,n,l)=>{const r=_0(l),u=x0();return async(d,f)=>{var m;const g=(m=await n())!==null&&m!==void 0?m:s;let v=new u(f?.headers);return v.has("apikey")||v.set("apikey",s),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),r(d,Le(Le({},f),{},{headers:v}))}};function j0(s){return s.endsWith("/")?s:s+"/"}function A0(s,n){var l,r;const{db:u,auth:d,realtime:f,global:m}=s,{db:g,auth:v,realtime:b,global:w}=n,x={db:Le(Le({},g),u),auth:Le(Le({},v),d),realtime:Le(Le({},b),f),storage:{},global:Le(Le(Le({},w),m),{},{headers:Le(Le({},(l=w?.headers)!==null&&l!==void 0?l:{}),(r=m?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return s.accessToken?x.accessToken=s.accessToken:delete x.accessToken,x}function T0(s){const n=s?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(j0(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var C0=class extends h0{constructor(s){super(s)}},k0=class{constructor(s,n,l){var r,u;this.supabaseUrl=s,this.supabaseKey=n;const d=T0(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:g0,realtime:y0,auth:Le(Le({},v0),{},{storageKey:f}),global:p0},g=A0(l??{},m);if(this.storageKey=(r=g.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(u=g.global.headers)!==null&&u!==void 0?u:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(b,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=g.auth)!==null&&v!==void 0?v:{},this.headers,g.global.fetch)}this.fetch=E0(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Le({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new fy(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new lb(this.storageUrl.href,this.headers,this.fetch,l?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new iy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,l)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,n,l;if(s.accessToken)return await s.accessToken();const{data:r}=await s.auth.getSession();return(n=(l=r.session)===null||l===void 0?void 0:l.access_token)!==null&&n!==void 0?n:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:l,storage:r,userStorage:u,storageKey:d,flowType:f,lock:m,debug:g,throwOnError:v},b,w){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new C0({url:this.authUrl.href,headers:Le(Le({},x),b),storageKey:d,autoRefreshToken:s,persistSession:n,detectSessionInUrl:l,storage:r,userStorage:u,flowType:f,lock:m,debug:g,throwOnError:v,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Ny(this.realtimeUrl.href,Le(Le({},s),{},{params:Le(Le({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(s,n,l){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const N0=(s,n,l)=>new k0(s,n,l);function O0(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const n=s.version;if(n==null)return!1;const l=n.match(/^v(\d+)\./);return l?parseInt(l[1],10)<=18:!1}O0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Yc="https://vatjiadgkwgrwijwoasi.supabase.co",R0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhdGppYWRna3dncndpandvYXNpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4NjkzMjAsImV4cCI6MjA4NjQ0NTMyMH0.6XP4xjZxk5yhVivpXsxMYg315MYsK7jlP0PqNnkJlgI";let iu=null;try{Yc&&!Yc.includes("YOUR_")&&(iu=N0(Yc,R0))}catch(s){console.warn("Supabase not configured, using localStorage mode:",s.message)}const fe=iu,D0=Object.freeze(Object.defineProperty({__proto__:null,default:fe,get supabase(){return iu}},Symbol.toStringTag,{value:"Module"})),U0="https://vatjiadgkwgrwijwoasi.supabase.co",mp=fe&&!U0.includes("YOUR_"),pp={_get(s){try{return JSON.parse(localStorage.getItem("ngs_db_"+s)||"null")}catch{return null}},_set(s,n){localStorage.setItem("ngs_db_"+s,JSON.stringify(n))},getUsers(){return this._get("users")||[]},saveUsers(s){this._set("users",s)},addUser(s){const n=this.getUsers();return s.id="u_"+Date.now()+"_"+Math.random().toString(36).slice(2,6),s.createdAt=new Date().toISOString(),n.push(s),this.saveUsers(n),s},getUserByEmail(s){return this.getUsers().find(n=>n.email===s)},getChildren(){return this._get("children")||[]},saveChildren(s){this._set("children",s)},addChild(s){const n=this.getChildren();return s.id="ch_"+Date.now()+"_"+Math.random().toString(36).slice(2,6),s.createdAt=new Date().toISOString(),n.push(s),this.saveChildren(n),s},getChildrenByParent(s){return this.getChildren().filter(n=>n.parentId===s)},getChildByPin(s){return this.getChildren().find(n=>n.pin===s)},getPurchases(){return this._get("purchases")||[]},savePurchases(s){this._set("purchases",s)},addPurchase(s){const n=this.getPurchases();return s.id="pay_"+Date.now()+"_"+Math.random().toString(36).slice(2,6),s.date=new Date().toISOString(),n.push(s),this.savePurchases(n),this.logEvent("purchase",s),s},getPurchasesByUser(s){return this.getPurchases().filter(n=>n.userId===s)},hasCourseAccess(s,n){return this.getPurchasesByUser(s).some(d=>d.status==="success"&&(d.plan==="fullAccess"||d.plan==="familyPlan"||d.plan==="singleCourse"&&d.courseId===n))?!0:this.getUserCourseAccess(s).some(d=>d.courseId===n||d.courseId==="all")},getCourseAccess(){return this._get("course_access")||[]},saveCourseAccess(s){this._set("course_access",s)},grantCourseAccess(s,n,l,r){const u=this.getCourseAccess();u.push({id:"ca_"+Date.now(),userId:s,courseId:n,grantedBy:l,reason:r,grantedAt:new Date().toISOString(),active:!0}),this.saveCourseAccess(u),this.logEvent("course_access_granted",{userId:s,courseId:n,reason:r})},revokeCourseAccess(s){const n=this.getCourseAccess(),l=n.find(r=>r.id===s);l&&(l.active=!1,l.revokedAt=new Date().toISOString()),this.saveCourseAccess(n)},getUserCourseAccess(s){return this.getCourseAccess().filter(n=>n.userId===s&&n.active)},updateUser(s,n){const l=this.getUsers(),r=l.findIndex(u=>u.id===s);r>=0&&(Object.assign(l[r],n),this.saveUsers(l))},deactivateUser(s){this.updateUser(s,{active:!1,deactivatedAt:new Date().toISOString()}),this.logEvent("user_deactivated",{userId:s})},reactivateUser(s){this.updateUser(s,{active:!0}),this.logEvent("user_reactivated",{userId:s})},deleteUser(s){const n=this.getUsers().filter(r=>r.id!==s);this.saveUsers(n);const l=this.getChildren().filter(r=>r.parentId!==s);this.saveChildren(l),this.logEvent("user_deleted",{userId:s})},getProgress(){return this._get("progress")||{}},saveProgress(s){this._set("progress",s)},setChapterComplete(s,n,l){const r=this.getProgress();r[s]||(r[s]={}),r[s][`${n}_${l}`]={completedAt:new Date().toISOString()},this.saveProgress(r)},getChildProgress(s){return this.getProgress()[s]||{}},getEvents(){return this._get("events")||[]},logEvent(s,n){const l=this.getEvents();l.push({type:s,data:n,ts:new Date().toISOString()}),l.length>500&&l.splice(0,l.length-500),this._set("events",l)},getSettings(){return this._get("settings")||{demoMode:!0,pricing:{singleCourse:19,fullAccess:39,familyPlan:59},stripeKey:"YOUR_STRIPE_KEY",razorpayKey:"YOUR_RAZORPAY_KEY"}},saveSettings(s){this._set("settings",s)},seed(){if(this._get("seeded"))return;[{name:"Sarah Johnson",email:"sarah@demo.com",password:"demo123",children:[{name:"Emma",age:10,pin:"1234"},{name:"Liam",age:12,pin:"5678"}]},{name:"Priya Sharma",email:"priya@demo.com",password:"demo123",children:[{name:"Arjun",age:11,pin:"1111"},{name:"Ananya",age:9,pin:"2222"}]},{name:"Mike Chen",email:"mike@demo.com",password:"demo123",children:[{name:"Lucas",age:13,pin:"3333"},{name:"Mia",age:10,pin:"4444"}]}].forEach(n=>{const l=this.addUser({name:n.name,email:n.email,password:n.password,role:"parent"});n.children.forEach(r=>{const u=this.addChild({name:r.name,age:r.age,pin:r.pin,parentId:l.id}),f=["ai","space","robotics"][Math.floor(Math.random()*3)],m=Math.floor(Math.random()*4)+1;for(let g=0;g<m;g++)this.setChapterComplete(u.id,f,g)}),n.email==="sarah@demo.com"&&this.addPurchase({userId:l.id,plan:"fullAccess",amount:39,currency:"USD",status:"success",method:"stripe"}),n.email==="priya@demo.com"&&(this.addPurchase({userId:l.id,plan:"singleCourse",courseId:"ai",amount:19,currency:"USD",status:"success",method:"razorpay"}),this.addPurchase({userId:l.id,plan:"singleCourse",courseId:"space",amount:19,currency:"USD",status:"failed",method:"razorpay"}))}),this._set("seeded",!0)}},z0={async getUsers(){const{data:s}=await fe.from("profiles").select("*");return s||[]},async saveUsers(){},async addUser(s){const{data:n,error:l}=await fe.from("profiles").insert({name:s.name,email:s.email,role:s.role||"parent",active:!0}).select().single();return l?(console.error("addUser error:",l),null):n},async getUserByEmail(s){const{data:n}=await fe.from("profiles").select("*").eq("email",s).single();return n||null},async getChildren(){const{data:s}=await fe.from("children").select("*");return s||[]},async addChild(s){const{data:n,error:l}=await fe.from("children").insert({name:s.name,age:s.age,pin:s.pin,parent_id:s.parentId||s.parent_id}).select().single();return l?(console.error("addChild error:",l),null):n},async getChildrenByParent(s){const{data:n}=await fe.from("children").select("*").eq("parent_id",s);return n||[]},async getChildByPin(s){const{data:n}=await fe.from("children").select("*").eq("pin",s).single();return n||null},async getPurchases(){const{data:s}=await fe.from("purchases").select("*");return s||[]},async addPurchase(s){const{data:n,error:l}=await fe.from("purchases").insert({user_id:s.userId,plan:s.plan,course_id:s.courseId||null,amount:s.amount,currency:s.currency,status:s.status,method:s.method}).select().single();return l?(console.error("addPurchase error:",l),null):(await this.logEvent("purchase",s),n)},async getPurchasesByUser(s){const{data:n}=await fe.from("purchases").select("*").eq("user_id",s);return n||[]},async hasCourseAccess(s,n){return(await this.getPurchasesByUser(s)).some(d=>d.status==="success"&&(d.plan==="fullAccess"||d.plan==="familyPlan"||d.plan==="singleCourse"&&d.course_id===n))?!0:(await this.getUserCourseAccess(s)).some(d=>d.course_id===n||d.course_id==="all")},async getCourseAccess(){const{data:s}=await fe.from("course_access").select("*");return s||[]},async grantCourseAccess(s,n,l,r){await fe.from("course_access").insert({user_id:s,course_id:n,granted_by:l,reason:r,active:!0}),await this.logEvent("course_access_granted",{userId:s,courseId:n,reason:r})},async revokeCourseAccess(s){await fe.from("course_access").update({active:!1,revoked_at:new Date().toISOString()}).eq("id",s)},async getUserCourseAccess(s){const{data:n}=await fe.from("course_access").select("*").eq("user_id",s).eq("active",!0);return n||[]},async updateUser(s,n){await fe.from("profiles").update(n).eq("id",s)},async deactivateUser(s){await this.updateUser(s,{active:!1,deactivated_at:new Date().toISOString()}),await this.logEvent("user_deactivated",{userId:s})},async reactivateUser(s){await this.updateUser(s,{active:!0}),await this.logEvent("user_reactivated",{userId:s})},async deleteUser(s){await fe.from("children").delete().eq("parent_id",s),await fe.from("profiles").delete().eq("id",s),await this.logEvent("user_deleted",{userId:s})},async getProgress(){const{data:s}=await fe.from("progress").select("*"),n={};return(s||[]).forEach(l=>{n[l.child_id]||(n[l.child_id]={}),n[l.child_id][`${l.course_id}_${l.chapter_idx}`]={completedAt:l.completed_at}}),n},async setChapterComplete(s,n,l){await fe.from("progress").upsert({child_id:s,course_id:n,chapter_idx:l,completed_at:new Date().toISOString()},{onConflict:"child_id,course_id,chapter_idx"})},async getChildProgress(s){const{data:n}=await fe.from("progress").select("*").eq("child_id",s),l={};return(n||[]).forEach(r=>{l[`${r.course_id}_${r.chapter_idx}`]={completedAt:r.completed_at}}),l},async getEvents(){const{data:s}=await fe.from("events").select("*").order("created_at",{ascending:!1}).limit(500);return(s||[]).map(n=>({type:n.type,data:n.data,ts:n.created_at}))},async logEvent(s,n){await fe.from("events").insert({type:s,data:n})},async getSettings(){const{data:s}=await fe.from("settings").select("*").eq("key","app_settings").single();return s?.value||{demoMode:!0,pricing:{singleCourse:19,fullAccess:39,familyPlan:59},stripeKey:"YOUR_STRIPE_KEY",razorpayKey:"YOUR_RAZORPAY_KEY"}},async saveSettings(s){await fe.from("settings").upsert({key:"app_settings",value:s},{onConflict:"key"})},async seed(){},async savePurchases(){},async saveChildren(){},async saveProgress(){},async saveCourseAccess(){}},Yt=mp?z0:pp;mp||pp.seed();const fi={get(){try{return JSON.parse(sessionStorage.getItem("ngs_session")||"null")}catch{return null}},set(s){sessionStorage.setItem("ngs_session",JSON.stringify(s))},clear(){sessionStorage.removeItem("ngs_session")},isLoggedIn(){return!!this.get()},isParent(){const s=this.get();return s&&s.role==="parent"},isChild(){const s=this.get();return s&&s.role==="child"},userId(){const s=this.get();return s?s.id:null},parentId(){const s=this.get();return s?s.role==="parent"?s.id:s.parentId:null}};async function M0({name:s,email:n,password:l,childName:r,childAge:u,childPin:d}){const{data:f,error:m}=await fe.auth.signUp({email:n,password:l,options:{data:{name:s}}});if(m)return{data:null,error:m.message};const g=f.user;try{const w="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZhdGppYWRna3dncndpandvYXNpIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MDg2OTMyMCwiZXhwIjoyMDg2NDQ1MzIwfQ.n13kPBYgVw4IPrdNh_4E8qR1cm0hhvcuF6h9NXcyz_E";w&&await fetch(`https://vatjiadgkwgrwijwoasi.supabase.co/auth/v1/admin/users/${g.id}`,{method:"PUT",headers:{apikey:w,Authorization:`Bearer ${w}`,"Content-Type":"application/json"},body:JSON.stringify({email_confirm:!0})})}catch{}await new Promise(w=>setTimeout(w,500));const{data:v}=await fe.from("profiles").update({name:s}).eq("id",g.id).select().single();let b=null;if(r&&d&&d.length===4){const{data:w,error:x}=await fe.from("children").insert({name:r,age:u||10,pin:d,parent_id:g.id}).select().single();x||(b=w)}return{data:{user:g,profile:v,child:b},error:null}}async function L0(s,n){const{data:l,error:r}=await fe.auth.signInWithPassword({email:s,password:n});return r?{data:null,error:r.message}:{data:{user:l.user,session:l.session},error:null}}async function B0(s){const{data:n,error:l}=await fe.from("children").select("*").eq("pin",s).single();return l||!n?{data:null,error:"Invalid PIN. Try again."}:{data:{child:n},error:null}}async function q0(){const{error:s}=await fe.auth.signOut();return{error:s?.message||null}}async function $0(){const{data:s,error:n}=await fe.auth.getSession();return n?{data:null,error:n.message}:{data:s.session,error:null}}async function Bm(s){const{data:n,error:l}=await fe.from("profiles").select("*").eq("id",s).single();return l?{data:null,error:l.message}:{data:n,error:null}}function H0(s){const{data:n}=fe.auth.onAuthStateChange(s);return n.subscription}async function I0(s){const{data:n}=await fe.from("profiles").select("role").eq("id",s).single();return n?.role==="admin"}const G0="https://vatjiadgkwgrwijwoasi.supabase.co",Ha=fe&&!G0.includes("YOUR_"),gp=N.createContext(null);function V0({children:s}){const[n,l]=N.useState(()=>Ha?null:fi.get()),[r,u]=N.useState(null),[d,f]=N.useState(Ha),[m,g]=N.useState(()=>{try{return JSON.parse(localStorage.getItem("ngs_demo_mode")||"false")}catch{return!1}}),[v,b]=N.useState(null),[w,x]=N.useState(()=>{try{return JSON.parse(localStorage.getItem("ngs_child_session")||"null")}catch{return null}}),_=N.useRef(null);N.useEffect(()=>{if(Ha)return $0().then(async({data:T})=>{if(T?.user){const q={id:T.user.id,email:T.user.email,name:T.user.user_metadata?.name||T.user.email,role:"parent"};l(q);const{data:J}=await Bm(T.user.id);J&&(u(J),q.role=J.role||"parent",q.name=J.name||q.name,l({...q}))}f(!1)}),_.current=H0(async(T,q)=>{if(T==="SIGNED_IN"&&q?.user){const J={id:q.user.id,email:q.user.email,name:q.user.user_metadata?.name||q.user.email,role:"parent"};l(J),x(null),localStorage.removeItem("ngs_child_session");const{data:ie}=await Bm(q.user.id);ie&&(u(ie),J.role=ie.role||"parent",J.name=ie.name||J.name,l({...J}))}else T==="SIGNED_OUT"&&(l(null),u(null))}),()=>{_.current?.unsubscribe()}},[]);const A=N.useCallback(async(T,q)=>{if(!Ha){const oe=Yt.getUserByEmail(T);if(!oe||oe.password!==q)return{error:"Invalid email or password"};const _e={id:oe.id,name:oe.name,email:oe.email,role:"parent"};return fi.set(_e),l(_e),Yt.logEvent("login",{userId:oe.id}),{success:!0,user:_e}}const{data:J,error:ie}=await L0(T,q);return ie?{error:ie}:{success:!0,user:J.user}},[]),E=N.useCallback(async(T,q,J,ie,oe,_e)=>{if(!T||!q||!J)return{error:"Please fill in name, email, and password"};if(J.length<6)return{error:"Password must be at least 6 characters"};if(!Ha){if(Yt.getUserByEmail(q))return{error:"Email already registered. Try logging in."};const De=Yt.addUser({name:T,email:q,password:J,role:"parent"});ie&&_e&&_e.length===4&&Yt.addChild({name:ie,age:oe||10,pin:_e,parentId:De.id});const it={id:De.id,name:De.name,email:De.email,role:"parent"};return fi.set(it),l(it),Yt.logEvent("signup",{userId:De.id,email:q}),{success:!0,user:it,childName:ie}}const{data:xe,error:ye}=await M0({name:T,email:q,password:J,childName:ie,childAge:oe,childPin:_e});return ye?{error:ye}:{success:!0,user:xe.user,childName:ie}},[]),R=N.useCallback(async T=>{if(!Ha){const oe=Yt.getChildByPin(T);if(!oe)return{error:"Invalid PIN. Try again."};const _e={id:oe.id,name:oe.name,role:"child",parentId:oe.parentId};return fi.set(_e),l(_e),Yt.logEvent("child_login",{childId:oe.id}),{success:!0,user:_e}}const{data:q,error:J}=await B0(T);if(J)return{error:J};const ie={id:q.child.id,name:q.child.name,role:"child",parentId:q.child.parent_id};return x(ie),localStorage.setItem("ngs_child_session",JSON.stringify(ie)),l(ie),{success:!0,user:ie}},[]),z=N.useCallback(async()=>{Ha&&await q0(),fi.clear(),l(null),u(null),x(null),localStorage.removeItem("ngs_child_session")},[]),L=w||n,M=!!L||m,V=L?.role==="parent",F=L?.role==="child",Z=L,Y=L,K=N.useCallback(async T=>Ha?I0(T):!1,[]),P=N.useCallback((T="login")=>b(T),[]),Q=N.useCallback(()=>b(null),[]),G=N.useCallback(()=>{g(!0),localStorage.setItem("ngs_demo_mode","true");try{const T=Yt.getSettings?.()||{};T.demoMode=!0,Yt.saveSettings?.(T)}catch{}},[]),ne=N.useCallback(async({name:T,email:q,password:J,childName:ie,childAge:oe,childPin:_e})=>{const xe=await E(T,q,J,ie,oe,_e);if(xe.error)throw new Error(xe.error);return xe},[E]),Pe=N.useCallback(async(T,q)=>{const J=await A(T,q);if(J.error)throw new Error(J.error);return J},[A]),X=N.useCallback(async T=>{const q=await R(T);if(q.error)throw new Error(q.error);return q},[R]),I={session:L,login:A,signup:E,childLogin:R,logout:z,isLoggedIn:M,isParent:V,isChild:F,currentUser:Z,user:Y,isDemoMode:m,setDemoMode:g,authModalType:v,openAuthModal:P,closeAuthModal:Q,enableDemoMode:G,doSignup:ne,doLogin:Pe,doChildLogin:X,isAdmin:K,loading:d};return h.jsx(gp.Provider,{value:I,children:s})}function Ci(){const s=N.useContext(gp);if(!s)throw new Error("useAuth must be used within AuthProvider");return s}function Y0(){const s=N.useRef(null);return N.useEffect(()=>{const n=s.current;if(!n)return;const l=n.getContext("2d");let r=[],u;function d(){n.width=window.innerWidth,n.height=window.innerHeight,r=Array.from({length:200},()=>({x:Math.random()*n.width,y:Math.random()*n.height,r:Math.random()*1.5+.3,s:Math.random()*.5+.1,o:Math.random()}))}d(),window.addEventListener("resize",d);function f(){l.clearRect(0,0,n.width,n.height),r.forEach(m=>{m.o+=m.s*.01,l.beginPath(),l.arc(m.x,m.y,m.r,0,Math.PI*2),l.fillStyle=`rgba(255,255,255,${(Math.sin(m.o)+1)/3})`,l.fill()}),u=requestAnimationFrame(f)}return f(),()=>{window.removeEventListener("resize",d),cancelAnimationFrame(u)}},[]),h.jsx("canvas",{ref:s,id:"starfield"})}const K0=[{id:"home",icon:"",label:"Home",hash:"home"},{id:"courses",icon:"",label:"Courses",hash:"courses",children:[{id:"ai",icon:"",label:"AI Adventures"},{id:"space",icon:"",label:"Space Explorers"},{id:"robotics",icon:"",label:"Robotics Lab"}]},{id:"badges",icon:"",label:"My Badges",hash:"badges"},{id:"parent",icon:"",label:"Parent Portal",hash:"parent"},{id:"admin",icon:"",label:"Admin Panel",hash:"admin"}];function P0(){const{state:s,navigate:n,openCourse:l}=ps(),{isLoggedIn:r,isDemoMode:u,currentUser:d,openAuthModal:f,logout:m}=Ci(),[g,v]=N.useState(!1),[b,w]=N.useState(!1),x=s.currentView,_=E=>{if(E.children){v(R=>!R);return}n(E.hash||E.id),w(!1)},A=E=>{l(E),w(!1)};return h.jsxs(h.Fragment,{children:[h.jsxs("button",{className:"sidebar-hamburger",onClick:()=>w(!0),"aria-label":"Open menu",children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),b&&h.jsx("div",{className:"sidebar-overlay",onClick:()=>w(!1)}),h.jsxs("aside",{className:`sidebar${b?" open":""}`,children:[h.jsxs("div",{className:"sidebar-brand",children:[h.jsx("div",{className:"sidebar-logo",children:""}),h.jsxs("div",{children:[h.jsx("div",{className:"sidebar-title",children:"NextGen School"}),h.jsx("div",{className:"sidebar-tagline",children:"Mind Over Machines"})]}),h.jsx("button",{className:"sidebar-close",onClick:()=>w(!1),children:""})]}),h.jsx("nav",{className:"sidebar-nav",children:K0.map(E=>h.jsxs("div",{children:[h.jsxs("button",{className:`sidebar-nav-item${x===E.id||E.id==="home"&&x==="home"?" active":""}`,onClick:()=>_(E),children:[h.jsx("span",{className:"sidebar-nav-icon",children:E.icon}),h.jsx("span",{className:"sidebar-nav-label",children:E.label}),E.children&&h.jsx("span",{className:`sidebar-nav-arrow${g?" open":""}`,children:""})]}),E.children&&g&&h.jsx("div",{className:"sidebar-submenu",children:E.children.map(R=>h.jsxs("button",{className:`sidebar-nav-item sidebar-sub-item${s.currentCourse===R.id&&x==="courses"?" active":""}`,onClick:()=>A(R.id),children:[h.jsx("span",{className:"sidebar-nav-icon",children:R.icon}),h.jsx("span",{className:"sidebar-nav-label",children:R.label})]},R.id))})]},E.id))}),h.jsxs("div",{className:"sidebar-bottom",children:[h.jsx("div",{className:"sidebar-divider"}),h.jsxs("button",{className:"sidebar-nav-item",onClick:()=>n("settings"),children:[h.jsx("span",{className:"sidebar-nav-icon",children:""}),h.jsx("span",{className:"sidebar-nav-label",children:"Settings"})]}),r&&!u?h.jsxs("div",{className:"sidebar-user",children:[h.jsx("div",{className:"sidebar-avatar",children:""}),h.jsxs("div",{className:"sidebar-user-info",children:[h.jsx("div",{className:"sidebar-user-name",children:d?.name||"User"}),h.jsx("button",{onClick:m,style:{background:"none",border:"none",color:"var(--red)",cursor:"pointer",fontSize:".75rem",padding:0},children:"Sign Out"})]})]}):u?h.jsxs("div",{className:"sidebar-user",children:[h.jsx("div",{className:"sidebar-avatar",children:""}),h.jsxs("div",{className:"sidebar-user-info",children:[h.jsx("div",{className:"sidebar-user-name",children:"Explorer"}),h.jsx("div",{className:"sidebar-demo-badge",children:"DEMO MODE"}),h.jsx("button",{onClick:()=>f("signup"),style:{background:"none",border:"none",color:"var(--cyan)",cursor:"pointer",fontSize:".75rem",padding:0,marginTop:"4px"},children:"Create Account"})]})]}):h.jsxs("div",{className:"sidebar-user",style:{gap:"8px"},children:[h.jsx("button",{className:"btn btn-primary",onClick:()=>f("signup"),style:{fontSize:".8rem",padding:"8px 16px",flex:1},children:"Sign Up"}),h.jsx("button",{className:"btn btn-back",onClick:()=>f("login"),style:{fontSize:".8rem",padding:"8px 16px",flex:1},children:"Log In"})]})]})]})]})}const mr={ai:{title:" AI Adventures",color:"var(--cyan)",chapters:[{title:"What is AI?",emoji:""},{title:"How AI Learns",emoji:""},{title:"Smart vs Wise",emoji:""},{title:"AI in Your World",emoji:""},{title:"Asking Better Questions",emoji:""},{title:"When AI Gets It Wrong",emoji:""},{title:"AI Ethics & Fairness",emoji:""},{title:"Be the AI Boss",emoji:""}]},space:{title:" Space Explorers",color:"var(--purple)",chapters:[{title:"Our Solar System",emoji:""},{title:"Life of a Star",emoji:""},{title:"Rockets & Launch Science",emoji:""},{title:"Mission to Mars",emoji:""},{title:"Gravity & Orbits",emoji:""},{title:"Space AI",emoji:""},{title:"Astronaut Training",emoji:""},{title:"Design Your Space Mission",emoji:""}]},robotics:{title:" Robotics Lab",color:"var(--green)",chapters:[{title:"What is a Robot?",emoji:""},{title:"Robot Senses",emoji:""},{title:"Robot Brain",emoji:""},{title:"Robot Movement",emoji:""},{title:"Types of Robots",emoji:""},{title:"Robots & AI Together",emoji:""},{title:"Robot Ethics",emoji:""},{title:"Design Your Robot",emoji:""}]}};[...["ai","space","robotics"].flatMap(s=>mr[s].chapters.map((n,l)=>({id:`${s}_${l}`,emoji:n.emoji,name:n.title,course:s})))];function J0(){return h.jsxs("footer",{style:{textAlign:"center",padding:"40px 20px",borderTop:"1px solid var(--glass-border)",color:"var(--text3)",fontSize:".85rem",position:"relative",zIndex:1},children:[h.jsx("p",{style:{marginBottom:"8px"},children:"NextGen School  Mind Over Machines"}),h.jsxs("p",{style:{marginBottom:"4px"},children:["Founded by ",h.jsx("strong",{style:{color:"var(--text2)"},children:"Sathish "})," & ",h.jsx("strong",{style:{color:"var(--text2)"},children:"Rathish "})]}),h.jsxs("p",{style:{fontSize:".75rem",marginTop:"8px"},children:[" ",new Date().getFullYear()," NextGen School. All rights reserved."]})]})}const X0=[{emoji:"",title:"Think Critically",desc:"Question everything, including AI. Be the boss, not the follower."},{emoji:"",title:"Create & Build",desc:"Hands-on, visual, drag-and-drop. Learn by doing, not memorizing."},{emoji:"",title:"Ethics First",desc:"Technology should be fair, kind, and helpful for everyone."},{emoji:"",title:"Dream Big",desc:"From AI to space to robots  the future belongs to curious kids."},{emoji:"",title:"Stay Curious",desc:"Ask questions, explore answers, never stop wondering why."},{emoji:"",title:"Think Global",desc:"Learn how technology connects and impacts the whole world."}],Q0=[{title:" Free Trial",price:"$0",priceSub:"Forever free",priceClass:"price-free",features:["Chapter 1 of all 3 courses","3 interactive activities","Basic badge collection"],btnClass:"btn btn-primary",btnText:"Start Free ",action:"showCourses"},{title:" Single Course",price:"$19",priceSub:"per course",priceClass:"price-paid",features:["All 8 chapters in one course","50+ interactive activities","Course certificate","Badge collection"],btnClass:"btn btn-primary",btnText:"Unlock Course ",action:"singleCourse"},{title:" Full Access",price:"$39",priceSub:"all courses",priceClass:"price-paid",popular:!0,features:["All 3 courses (24 chapters)","150+ interactive activities","All certificates","Priority support"],btnClass:"btn btn-gold",btnText:"Best Value ",action:"fullAccess"},{title:" Family Plan",price:"$59",priceSub:"up to 3 kids",priceClass:"price-paid",features:["Everything in Full Access","Up to 3 child profiles","Parent dashboard","Progress reports"],btnClass:"btn btn-primary",btnText:"Get Family Plan ",action:"familyPlan"}];function Z0(){const{navigate:s,openCourse:n,handlePayment:l,getMetrics:r}=ps(),{isLoggedIn:u,openAuthModal:d}=Ci(),f=N.useRef(null),m=r?r():{students:0,chapters:0,badges:0};N.useEffect(()=>{if(typeof window.gsap>"u")return;const v=window.gsap,b=f.current?.querySelectorAll(".gsap-reveal");if(!b)return;b.forEach(x=>{v.fromTo(x,{opacity:0,y:40},{opacity:1,y:0,duration:.8,ease:"power2.out",scrollTrigger:{trigger:x,start:"top 85%",once:!0}})});const w=(x,_)=>{const A=document.getElementById(x);A&&v.to({val:0},{val:_,duration:2,ease:"power2.out",onUpdate(){A.textContent=Math.round(this.targets()[0].val)}})};w("metric-students",m.students||247),w("metric-chapters",m.chapters||24),w("metric-badges",m.badges||50)},[]);const g=Object.entries(mr||{});return h.jsxs("div",{id:"landing",ref:f,children:[h.jsx("section",{id:"hero",children:h.jsxs("div",{className:"hero-content",children:[h.jsxs("div",{className:"hero-badges",children:[h.jsxs("span",{className:"hero-badge",children:[h.jsx("span",{children:""})," Ages 9-13"]}),h.jsxs("span",{className:"hero-badge",children:[h.jsx("span",{children:""})," Visual Learning"]}),h.jsxs("span",{className:"hero-badge",children:[h.jsx("span",{children:""})," Interactive"]})]}),h.jsx("h1",{children:"Mind Over Machines"}),h.jsx("p",{children:"The futuristic school where kids master AI, explore space, and build robots  all through drag-and-drop adventures. No coding required!"}),h.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[h.jsx("button",{className:"btn btn-primary",onClick:()=>{if(!u){d("signup");return}document.getElementById("courses")?.scrollIntoView({behavior:"smooth"})},children:" Start Learning"}),!u&&h.jsx("button",{className:"btn btn-back",onClick:()=>d("login"),style:{marginLeft:"8px"},children:" Log In"})]})]})}),h.jsx("section",{id:"metrics",className:"gsap-reveal",children:h.jsx("div",{className:"container",children:h.jsxs("div",{className:"metrics-grid",children:[h.jsxs("div",{className:"metric-card",children:[h.jsx("div",{className:"metric-num",id:"metric-students",children:"0"}),h.jsx("div",{className:"metric-label",children:"Students Learning"})]}),h.jsxs("div",{className:"metric-card",children:[h.jsx("div",{className:"metric-num",id:"metric-chapters",children:"0"}),h.jsx("div",{className:"metric-label",children:"Chapters Completed"})]}),h.jsxs("div",{className:"metric-card",children:[h.jsx("div",{className:"metric-num",id:"metric-badges",children:"0"}),h.jsx("div",{className:"metric-label",children:"Badges Earned"})]})]})})}),h.jsx("section",{id:"principles",className:"gsap-reveal",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:" Our Core Principles"}),h.jsx("div",{className:"principles-grid",children:X0.map((v,b)=>h.jsxs("div",{className:"principle-card glass",children:[h.jsx("span",{className:"emoji",children:v.emoji}),h.jsx("h4",{children:v.title}),h.jsx("p",{children:v.desc})]},b))})]})}),h.jsx("section",{id:"courses",className:"gsap-reveal",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:"Choose Your Adventure"}),h.jsx("p",{className:"subtitle",children:"3 courses  24 chapters  Hundreds of interactive activities"}),h.jsx("div",{className:"courses-grid",children:g.map(([v,b])=>h.jsxs("div",{className:"course-card glass","data-course":v,onClick:()=>n(v),children:[h.jsx("span",{className:"emoji",children:b.chapters?.[0]?.emoji||(v==="ai"?"":v==="space"?"":"")}),h.jsx("h3",{children:b.title}),h.jsxs("p",{children:[v==="ai"&&"Discover how artificial intelligence works  visually! Drag, drop, and explore the world of smart machines.",v==="space"&&"Launch rockets, plan missions to Mars, explore the solar system. Become a space scientist through interactive adventures!",v==="robotics"&&"Build robots with visual blocks, navigate mazes, add sensors and AI. Design your own robot from scratch!"]}),h.jsxs("span",{className:"chapters-count",children:[b.chapters?.length||8," Chapters  50+ Activities"]})]},v))})]})}),h.jsx("section",{id:"pricing",className:"gsap-reveal",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:" Choose Your Plan"}),h.jsx("p",{className:"subtitle",children:"Start free  upgrade anytime. Chapter 1 of every course is always free!"}),h.jsx("div",{className:"pricing-grid",children:Q0.map((v,b)=>h.jsxs("div",{className:`pricing-card${v.popular?" popular":""}`,children:[h.jsx("h3",{children:v.title}),h.jsx("div",{className:`price ${v.priceClass}`,children:v.price}),h.jsx("div",{className:"price-sub",children:v.priceSub}),h.jsx("ul",{children:v.features.map((w,x)=>h.jsx("li",{children:w},x))}),h.jsx("button",{className:v.btnClass,onClick:()=>{if(!u){d("signup");return}v.action==="showCourses"?document.getElementById("courses")?.scrollIntoView({behavior:"smooth"}):l&&l(v.action)},children:v.btnText})]},b))}),h.jsxs("p",{style:{textAlign:"center",marginTop:"20px",fontSize:".85rem",color:"var(--text3)"},children:[" Indian parents: Razorpay also available."," ",h.jsx("a",{href:"mailto:hello@nextgenschool.aiupskills.com",style:{color:"var(--cyan)"},children:"Contact us"})]})]})}),h.jsx(J0,{})]})}let pi=null,fa=null;function Qe(s){s.addEventListener("pointerdown",vp)}function vp(s){const n=s.currentTarget;n.classList.contains("placed")||(s.preventDefault(),pi={el:n,startX:s.clientX,startY:s.clientY,id:n.dataset.id,value:n.dataset.value},fa=n.cloneNode(!0),fa.style.cssText=`position:fixed;z-index:99999;pointer-events:none;opacity:0.8;left:${s.clientX-40}px;top:${s.clientY-20}px;`,document.body.appendChild(fa),n.style.opacity="0.4",document.addEventListener("pointermove",lu),document.addEventListener("pointerup",ru))}function lu(s){fa&&(fa.style.left=s.clientX-40+"px",fa.style.top=s.clientY-20+"px",document.querySelectorAll(".drag-zone, .bucket, .sequence-slot, .flowchart-area, .cargo-bay, .rocket-slot").forEach(n=>{const l=n.getBoundingClientRect();s.clientX>=l.left&&s.clientX<=l.right&&s.clientY>=l.top&&s.clientY<=l.bottom?n.classList.add("over"):n.classList.remove("over")}))}function ru(s){if(document.removeEventListener("pointermove",lu),document.removeEventListener("pointerup",ru),fa&&(fa.remove(),fa=null),!pi)return;pi.el.style.opacity="";const n=document.querySelectorAll(".drag-zone, .bucket, .sequence-slot, .flowchart-area, .cargo-bay, .rocket-slot");n.forEach(l=>l.classList.remove("over")),n.forEach(l=>{const r=l.getBoundingClientRect();s.clientX>=r.left&&s.clientX<=r.right&&s.clientY>=r.top&&s.clientY<=r.bottom&&l.dataset.onDrop&&window[l.dataset.onDrop](pi,l)}),pi=null}function ge(s,n,l){let r=s.querySelector(".feedback");if(r||(r=document.createElement("div"),r.className="feedback",s.appendChild(r)),r.className=`feedback show ${n}`,n==="error"){const u=["You're doing amazing  every great thinker makes mistakes before getting it right! ","Almost there! The best scientists try again and again. You're learning SO much! ","Hey, getting it wrong means your brain is growing! That's literally how learning works! ","Don't give up! Einstein failed hundreds of times before his breakthroughs! You've got this! ","You're braver than you believe! Every wrong answer gets you closer to the right one! ","Mistakes are just practice for being awesome! Try one more time! ","The fact that you're trying makes you a REAL explorer! Keep going! ","Wrong answers aren't failures  they're stepping stones! You're on the right path! ","Even robots need a few tries to get things right! You're smarter than a robot! ","Your curiosity is your superpower! Let's figure this out together! "],d=u[Math.floor(Math.random()*u.length)];r.innerHTML=l+'<div class="encouragement">'+d+"</div>"}else r.textContent=l,n==="success"&&(r.innerHTML=l+' <span style="font-size:1.2rem"></span>');r.scrollIntoView({behavior:"smooth",block:"center"})}const qm={ai:[function(s){s.innerHTML=`
        <h2> What is AI?</h2>
        <p class="lesson-desc">AI stands for <strong>Artificial Intelligence</strong>. It's not magic  it's pattern matching! AI looks at lots of examples and learns to recognize patterns, just like you learned to recognize cats and dogs when you were little.</p>
        <div class="activity">
          <h3> Activity: AI or Not AI?</h3>
          <p class="instructions">Drag each item into the correct bucket. Does it use AI or not?</p>
          <div class="drag-zone" id="ai1-items"></div>
          <div class="buckets">
            <div class="bucket" style="border-color:var(--green)" data-on-drop="ai1Drop" data-bucket="yes">
              <h4> Uses AI</h4>
              <div class="bucket-items" id="ai1-yes"></div>
            </div>
            <div class="bucket" style="border-color:var(--red)" data-on-drop="ai1Drop" data-bucket="no">
              <h4> No AI</h4>
              <div class="bucket-items" id="ai1-no"></div>
            </div>
          </div>
          <div class="feedback" id="ai1-fb"></div>
          <button class="btn-check" id="ai1-check" onclick="ai1Check()">Check My Answers </button>
        </div>
        <div class="activity">
          <h3> Key Idea</h3>
          <p class="instructions">AI is a computer program that learns from examples. It finds patterns in data  like how Netflix notices you like action movies and suggests more. AI isn't thinking or feeling  it's matching patterns really, really fast!</p>
        </div>
      `;const n=[{name:" Alexa / Siri",ai:!0},{name:" Netflix Suggestions",ai:!0},{name:" Google Search",ai:!0},{name:" Face Filters",ai:!0},{name:" Light Switch",ai:!1},{name:" Bicycle",ai:!1},{name:" Paper Book",ai:!1},{name:" Game NPCs",ai:!0},{name:" Alarm Clock",ai:!1},{name:" Google Maps",ai:!0}],l=document.getElementById("ai1-items");n.sort(()=>Math.random()-.5).forEach((r,u)=>{const d=document.createElement("div");d.className="drag-item",d.textContent=r.name,d.dataset.id=u,d.dataset.value=r.ai?"yes":"no",l.appendChild(d),Qe(d)}),window.ai1Data=n,window.ai1Placed={}},function(s){s.innerHTML=`
        <h2> How AI Learns</h2>
        <p class="lesson-desc">AI learns in steps, kind of like how you learn! Imagine teaching a friend to recognize different types of pizza. You'd show them lots of pictures, right? AI works the same way  it needs LOTS of examples.</p>
        <div class="activity">
          <h3> Activity: Put the Steps in Order</h3>
          <p class="instructions">AI learns in 5 steps. Drag them into the correct order!</p>
          <div class="drag-zone" id="ai2-items"></div>
          <div class="sequence-slots" id="ai2-slots"></div>
          <div class="feedback" id="ai2-fb"></div>
          <button class="btn-check" onclick="ai2Check()">Check Order </button>
        </div>
        <div class="activity">
          <h3> Activity: Train the AI!</h3>
          <p class="instructions">You're training an AI to recognize animals! Drag each picture to the right category.</p>
          <div class="drag-zone" id="ai2-train-items"></div>
          <div class="buckets">
            <div class="bucket" style="border-color:var(--cyan)" data-on-drop="ai2TrainDrop" data-bucket="cat">
              <h4> Cat</h4><div class="bucket-items" id="ai2-cats"></div>
            </div>
            <div class="bucket" style="border-color:var(--purple)" data-on-drop="ai2TrainDrop" data-bucket="dog">
              <h4> Dog</h4><div class="bucket-items" id="ai2-dogs"></div>
            </div>
          </div>
          <div class="feedback" id="ai2-train-fb"></div>
          <button class="btn-check" onclick="ai2TrainCheck()">Train the AI! </button>
        </div>
      `;const n=[" Collect Data"," Clean Data"," Train Model"," Test It"," Improve"],l=document.getElementById("ai2-items"),r=document.getElementById("ai2-slots");[...n].sort(()=>Math.random()-.5).forEach((m,g)=>{const v=document.createElement("div");v.className="drag-item",v.textContent=m,v.dataset.value=n.indexOf(m).toString(),l.appendChild(v),Qe(v)});for(let m=0;m<5;m++){const g=document.createElement("div");g.className="sequence-slot",g.textContent=`Step ${m+1}`,g.dataset.onDrop="ai2SlotDrop",g.dataset.slot=m,r.appendChild(g)}window.ai2Slots={};const d=[{name:" Whiskers",type:"cat"},{name:" Buddy",type:"dog"},{name:" Mittens",type:"cat"},{name:" Poodle",type:"dog"},{name:" Luna",type:"cat"},{name:" Rex",type:"dog"}],f=document.getElementById("ai2-train-items");d.sort(()=>Math.random()-.5).forEach((m,g)=>{const v=document.createElement("div");v.className="drag-item",v.textContent=m.name,v.dataset.value=m.type,f.appendChild(v),Qe(v)}),window.ai2TrainPlaced={}},function(s){s.innerHTML=`
        <h2> Smart vs Wise</h2>
        <p class="lesson-desc">AI can be really <strong>smart</strong> (fast at answers) but not always <strong>wise</strong> (knowing when it's wrong). A calculator is smart  but it doesn't know if you typed the wrong numbers! Let's practice being WISE about AI.</p>
        <div class="activity">
          <h3> Activity: What Would You Do?</h3>
          <p class="instructions">An AI gives you an answer. Pick the WISEST response!</p>
          <div id="ai3-scenarios"></div>
        </div>
      `;const n=[{q:'AI says: "The capital of France is London" ',options:[{text:" Trust it! AI is always right",wise:!1},{text:" That doesn't sound right, let me check",wise:!0},{text:" AI is useless and always wrong",wise:!1}],explain:"Great thinking! AI can make mistakes. The wise thing is to check  the capital of France is Paris! "},{q:"You ask AI to write a birthday card for grandma ",options:[{text:" Send it without reading",wise:!1},{text:" Read it first and add your own touch",wise:!0},{text:" Never use AI for anything",wise:!1}],explain:"Perfect! AI can help you get started, but your personal touch makes it special. Always review what AI creates!"},{q:'AI suggests a "fact" for your school report ',options:[{text:" Copy-paste it directly",wise:!1},{text:" Check if it's true using another source",wise:!0},{text:" Ignore AI and don't do the report",wise:!1}],explain:`Exactly! Always verify AI facts with trusted sources. AI can "hallucinate"  make up things that sound real but aren't!`}],l=document.getElementById("ai3-scenarios");window.ai3Done=0,n.forEach((r,u)=>{const d=document.createElement("div");d.style.cssText="margin:20px 0;padding:20px;background:rgba(0,0,0,0.2);border-radius:16px;",d.innerHTML=`<p style="font-size:1.1rem;margin-bottom:14px;font-weight:600">${r.q}</p><div class="choice-cards" id="ai3-s${u}"></div><div class="feedback" id="ai3-fb${u}"></div>`,l.appendChild(d);const f=d.querySelector(`#ai3-s${u}`);r.options.forEach((m,g)=>{const v=document.createElement("div");v.className="choice-card",v.innerHTML=`<p>${m.text}</p>`,v.onclick=()=>{f.querySelectorAll(".choice-card").forEach(b=>{b.classList.remove("selected","correct","wrong"),b.style.pointerEvents="none"}),m.wise?(v.classList.add("correct"),ge(d,"success",r.explain),addPoints(10),window.ai3Done++,window.ai3Done>=3&&setTimeout(completeChapter,500)):(v.classList.add("wrong"),ge(d,"error"," Hint: The wisest response isn't blindly trusting OR ignoring the AI. Think about what a scientist would do  they'd check the data themselves AND consider the AI's suggestion. Look for the answer that combines both! "),setTimeout(()=>{f.querySelectorAll(".choice-card").forEach(b=>{b.classList.remove("wrong"),b.style.pointerEvents=""})},1500))},f.appendChild(v)})})},function(s){s.innerHTML=`
        <h2> AI in Your World</h2>
        <p class="lesson-desc">AI is EVERYWHERE  hiding in things you use every day! Let's explore a room and discover all the hidden AI. Tap on objects to reveal their secrets!</p>
        <div class="activity">
          <h3> Activity: Find the Hidden AI!</h3>
          <p class="instructions">Tap on objects in this room to discover where AI is hiding! Find all 8!</p>
          <p style="color:var(--gold);font-size:.9rem" id="ai4-count">Found: 0 / 8</p>
          <div class="scene-container" id="ai4-scene" style="background:linear-gradient(180deg,rgba(15,15,58,0.8),rgba(5,5,16,0.9))"></div>
        </div>
      `;const n=[{emoji:"",x:10,y:20,name:"Smartphone",fact:"Your phone uses AI for face unlock, autocorrect, photo enhancement, and voice assistants!"},{emoji:"",x:70,y:15,name:"Smart TV",fact:"Netflix and YouTube use AI to recommend shows you'll like based on what you've watched!"},{emoji:"",x:45,y:60,name:"Smart Speaker",fact:"Alexa, Siri, and Google Home use AI to understand your voice and respond!"},{emoji:"",x:80,y:55,name:"Game Console",fact:"AI controls the enemies in your games, making them smarter and more challenging!"},{emoji:"",x:25,y:65,name:"Smart Fridge",fact:"Some fridges use AI to track what food you have and suggest recipes!"},{emoji:"",x:55,y:80,name:"Car",fact:"Modern cars use AI for self-driving features, parking assist, and collision warnings!"},{emoji:"",x:35,y:35,name:"Laptop",fact:"AI powers spam filters, search engines, grammar checkers, and photo editors!"},{emoji:"",x:60,y:30,name:"Thermostat",fact:"Smart thermostats learn your schedule and preferences to save energy!"}],l=document.getElementById("ai4-scene");window.ai4Found=0,n.forEach((r,u)=>{const d=document.createElement("div");d.className="scene-item",d.textContent=r.emoji,d.style.left=r.x+"%",d.style.top=r.y+"%",d.onclick=()=>{if(d.classList.contains("discovered"))return;d.classList.add("discovered"),window.ai4Found++,document.getElementById("ai4-count").textContent=`Found: ${window.ai4Found} / 8`,addPoints(5);const f=document.createElement("div");f.className="scene-popup show",f.innerHTML=`<h5>${r.name}</h5><p>${r.fact}</p>`,f.style.left=Math.min(r.x,60)+"%",f.style.top=r.y+8+"%",l.appendChild(f),setTimeout(()=>f.remove(),4e3),window.ai4Found>=8&&setTimeout(completeChapter,1e3)},l.appendChild(d)})},function(s){s.innerHTML=`
        <h2> Asking Better Questions</h2>
        <p class="lesson-desc">The SECRET to getting great answers from AI? Ask great questions! Vague questions get vague answers. Specific questions get amazing answers. Let's practice making questions better!</p>
        <div class="activity">
          <h3> Activity: Question Builder</h3>
          <p class="instructions">Start with a boring question and make it AWESOME by adding word blocks!</p>
          <div id="ai5-builder"></div>
        </div>
      `;const n=[{start:"Tell me about dogs",blocks:["What are","the 3 best","dog breeds","for families","with young children?"],bonus:["specific number","context added","audience defined"],answer:"What are the 3 best dog breeds for families with young children?"},{start:"Help me with homework",blocks:["Explain","how volcanoes erupt","in simple words","with an example","a 10-year-old can understand"],answer:"Explain how volcanoes erupt in simple words with an example a 10-year-old can understand"},{start:"Tell me about space",blocks:["What are","5 fun facts about","Mars","that would surprise","my classmates?"],answer:"What are 5 fun facts about Mars that would surprise my classmates?"}],l=document.getElementById("ai5-builder");window.ai5Done=0,n.forEach((r,u)=>{const d=document.createElement("div");d.style.cssText="margin:20px 0;padding:24px;background:rgba(0,0,0,0.2);border-radius:16px;",d.innerHTML=`
          <p style="color:var(--text3);font-size:.85rem;margin-bottom:4px">Boring question:</p>
          <p style="font-size:1.1rem;margin-bottom:16px;color:var(--red);text-decoration:line-through">"${r.start}"</p>
          <p style="color:var(--text3);font-size:.85rem;margin-bottom:8px">Build a better question  arrange these blocks:</p>
          <div class="drag-zone" id="ai5-blocks-${u}"></div>
          <p style="color:var(--text3);font-size:.85rem;margin:12px 0 4px">Your improved question:</p>
          <div class="drag-zone" id="ai5-target-${u}" data-on-drop="ai5Drop" data-challenge="${u}" style="min-height:50px;border-color:var(--cyan)">
            <span class="drag-zone-label">Drop blocks here in order</span>
          </div>
          <div class="feedback" id="ai5-fb-${u}"></div>
          <button class="btn-check" onclick="ai5Check(${u})">Check </button>
        `,l.appendChild(d);const f=document.getElementById(`ai5-blocks-${u}`);[...r.blocks].sort(()=>Math.random()-.5).forEach((g,v)=>{const b=document.createElement("div");b.className="drag-item",b.textContent=g,b.dataset.value=r.blocks.indexOf(g).toString(),b.dataset.challenge=u,f.appendChild(b),Qe(b)})}),window.ai5Challenges=n},function(s){s.innerHTML=`
        <h2> When AI Gets It Wrong</h2>
        <p class="lesson-desc">AI isn't perfect! It can make mistakes, be biased, or even make things up entirely (we call these "hallucinations"). Your job? Be a fact-checker! Let's play Spot the Mistake!</p>
        <div class="activity">
          <h3> Activity: Spot the Mistake!</h3>
          <p class="instructions">The AI made these statements. Drag each one to  (correct) or  (wrong)!</p>
          <div class="drag-zone" id="ai6-items"></div>
          <div class="buckets">
            <div class="bucket" style="border-color:var(--green)" data-on-drop="ai6Drop" data-bucket="true">
              <h4> Correct</h4><div class="bucket-items" id="ai6-true"></div>
            </div>
            <div class="bucket" style="border-color:var(--red)" data-on-drop="ai6Drop" data-bucket="false">
              <h4> Wrong</h4><div class="bucket-items" id="ai6-false"></div>
            </div>
          </div>
          <div class="feedback" id="ai6-fb"></div>
          <button class="btn-check" onclick="ai6Check()">Check Answers </button>
        </div>
      `;const n=[{text:" Earth is the 3rd planet from the Sun",correct:!0},{text:" Dinosaurs and humans lived together",correct:!1},{text:" Water boils at 100C",correct:!0},{text:" The Moon is bigger than Earth",correct:!1},{text:" The heart pumps blood through your body",correct:!0},{text:" Penguins can fly long distances",correct:!1},{text:" The Sun is a star",correct:!0},{text:" Humans only use 10% of their brains",correct:!1}],l=document.getElementById("ai6-items");n.sort(()=>Math.random()-.5).forEach((r,u)=>{const d=document.createElement("div");d.className="drag-item",d.textContent=r.text,d.dataset.value=r.correct.toString(),l.appendChild(d),Qe(d)}),window.ai6Placed={}},function(s){s.innerHTML=`
        <h2> AI Ethics & Fairness</h2>
        <p class="lesson-desc">AI is only as fair as the data it learns from. If we teach AI with biased examples, it makes biased decisions. Let's explore some real scenarios and think about what's right!</p>
        <div class="activity">
          <h3> Activity: Fix the Unfair AI</h3>
          <p class="instructions">Read each scenario and pick the best solution!</p>
          <div id="ai7-scenarios"></div>
        </div>
      `;const n=[{title:" The Team Picker",problem:"An AI picks students for the science team, but it always picks boys. It learned from old data where only boys were on the team.",options:[{text:" Retrain with fair data showing all students",correct:!0},{text:" It's fine, that's what the data says",correct:!1},{text:" Never use AI for anything",correct:!1}],explain:"Yes! The AI learned bias from old, unfair data. We need to train it with diverse, fair examples!"},{title:" The Photo App",problem:"A photo filter app only works well on light skin tones. It makes dark skin look weird.",options:[{text:" Train it with photos of ALL skin tones equally",correct:!0},{text:" Just add a warning label",correct:!1},{text:" Ban all photo filters",correct:!1}],explain:"Exactly! AI needs diverse training data. If it only saw some skin tones, it won't work for everyone."},{title:" The House Pricer",problem:"An AI that prices houses always gives lower prices to homes in certain neighborhoods. It learned from historical data that was affected by discrimination.",options:[{text:" Remove biased historical data and use fair criteria",correct:!0},{text:" Historical data is always correct",correct:!1},{text:" Just raise all prices",correct:!1}],explain:"Right! Historical data can contain past discrimination. We need to clean the data and ensure AI decisions are fair!"}],l=document.getElementById("ai7-scenarios");window.ai7Done=0,n.forEach((r,u)=>{const d=document.createElement("div");d.style.cssText="margin:20px 0;padding:24px;background:rgba(0,0,0,0.2);border-radius:16px;",d.innerHTML=`<h4 style="margin-bottom:8px">${r.title}</h4><p style="color:var(--text2);margin-bottom:14px">${r.problem}</p><div class="choice-cards" id="ai7-s${u}"></div><div class="feedback" id="ai7-fb${u}"></div>`,l.appendChild(d),r.options.forEach((f,m)=>{const g=document.createElement("div");g.className="choice-card",g.innerHTML=`<p>${f.text}</p>`,g.onclick=()=>{d.querySelectorAll(".choice-card").forEach(v=>{v.classList.remove("selected","correct","wrong"),v.style.pointerEvents="none"}),f.correct?(g.classList.add("correct"),ge(d,"success",r.explain),addPoints(10),window.ai7Done++,window.ai7Done>=3&&setTimeout(completeChapter,500)):(g.classList.add("wrong"),ge(d,"error",` Hint: Fairness means the AI should treat ALL people equally regardless of gender, race, or background. Look for the solution that fixes the BIAS in the AI's decision-making, not just the symptoms. Ask yourself: "Would this fix make it fair for everyone?" `),setTimeout(()=>{d.querySelectorAll(".choice-card").forEach(v=>{v.classList.remove("wrong"),v.style.pointerEvents=""})},1500))},d.querySelector(`#ai7-s${u}`).appendChild(g)})})},function(s){s.innerHTML=`
        <h2> Be the AI Boss  Capstone!</h2>
        <p class="lesson-desc">Time to design your very own AI assistant! You're the boss  YOU decide what it does, what rules it follows, and what it should NEVER do.</p>
        <div class="activity">
          <h3> Step 1: What does your AI do?</h3>
          <p class="instructions">Pick your AI's main job:</p>
          <div class="choice-cards" id="ai8-job"></div>
        </div>
        <div class="activity" id="ai8-step2" style="display:none">
          <h3> Step 2: Set the Rules</h3>
          <p class="instructions">Drag rules into your AI's rule book:</p>
          <div class="drag-zone" id="ai8-rules-source"></div>
          <div class="drag-zone" id="ai8-rules-target" data-on-drop="ai8RuleDrop" style="min-height:80px;border-color:var(--green)">
            <span class="drag-zone-label"> AI Rule Book</span>
          </div>
        </div>
        <div class="activity" id="ai8-step3" style="display:none">
          <h3> Step 3: Set Boundaries</h3>
          <p class="instructions">What should your AI NEVER do? Pick at least 2:</p>
          <div class="choice-cards" id="ai8-never"></div>
        </div>
        <div id="ai8-result" style="display:none;text-align:center;padding:30px">
          <h3 style="font-size:1.5rem;margin-bottom:16px"> Your AI Assistant!</h3>
          <div id="ai8-card" class="glass" style="display:inline-block;padding:30px;max-width:400px;text-align:left"></div>
        </div>
      `;const n=[{emoji:"",name:"Homework Helper",desc:"Helps explain difficult topics"},{emoji:"",name:"Music DJ",desc:"Plays and suggests music"},{emoji:"",name:"Joke Teller",desc:"Tells funny jokes and stories"},{emoji:"",name:"Fitness Coach",desc:"Helps you stay active and healthy"}],l=document.getElementById("ai8-job");window.ai8State={job:null,rules:[],nevers:[]},n.forEach(f=>{const m=document.createElement("div");m.className="choice-card",m.innerHTML=`<span class="emoji">${f.emoji}</span><p><strong>${f.name}</strong></p><p style="font-size:.8rem;color:var(--text2)">${f.desc}</p>`,m.onclick=()=>{l.querySelectorAll(".choice-card").forEach(g=>g.classList.remove("selected")),m.classList.add("selected"),window.ai8State.job=f,document.getElementById("ai8-step2").style.display="",addPoints(5)},l.appendChild(m)});const r=[" Always be kind"," Be honest"," Ask before sharing info"," Stay on topic"," Listen carefully"," Know when to stop"],u=document.getElementById("ai8-rules-source");r.forEach(f=>{const m=document.createElement("div");m.className="drag-item",m.textContent=f,m.dataset.value=f,u.appendChild(m),Qe(m)});const d=[" Never lie or make up facts"," Never share personal info"," Never be mean or bully"," Never make decisions without asking"," Never pretend to be human"," Never ignore safety"];setTimeout(()=>{const f=document.getElementById("ai8-never");let m=0;d.forEach(g=>{const v=document.createElement("div");v.className="choice-card",v.innerHTML=`<p>${g}</p>`,v.onclick=()=>{v.classList.contains("selected")?(v.classList.remove("selected"),window.ai8State.nevers=window.ai8State.nevers.filter(b=>b!==g),m--):(v.classList.add("selected"),window.ai8State.nevers.push(g),m++,addPoints(3)),m>=2&&window.ai8State.job&&window.ai8State.rules.length>=2&&showAi8Result()},f.appendChild(v)})},100)}],space:[function(s){s.innerHTML=`
        <h2> Our Solar System</h2>
        <p class="lesson-desc">Welcome to the cosmic neighborhood! Our solar system has 8 amazing planets orbiting the Sun. Tap on each planet to discover incredible facts, then put them in the right order!</p>
        <div class="activity">
          <h3> Explore the Planets!</h3>
          <p class="instructions">Tap each planet to learn about it! <span id="sp1-count" style="color:var(--gold)">Explored: 0/8</span></p>
          <div class="solar-system" id="sp1-system"></div>
        </div>
        <div class="activity">
          <h3> Activity: Order the Planets!</h3>
          <p class="instructions">Drag the planets into order from closest to the Sun </p>
          <div class="drag-zone" id="sp1-items"></div>
          <div class="sequence-slots" id="sp1-slots"></div>
          <div class="feedback" id="sp1-fb"></div>
          <button class="btn-check" onclick="sp1Check()">Check Order </button>
        </div>
      `;const n=[{name:"Mercury",emoji:"",color:"#8b8b8b",x:18,y:45,size:22,facts:"Closest to Sun  167C average  No moons  Smallest planet  A year is just 88 Earth days!"},{name:"Venus",emoji:"",color:"#e6c44d",x:25,y:30,size:28,facts:"Hottest planet at 462C!  Spins backwards  Similar size to Earth  Thick clouds of acid  A day is longer than its year!"},{name:"Earth",emoji:"",color:"#4d94ff",x:33,y:60,size:28,facts:"Our home!  Only planet with liquid water on surface  1 Moon  Perfect distance from Sun for life  4.5 billion years old"},{name:"Mars",emoji:"",color:"#c1440e",x:42,y:35,size:24,facts:"The Red Planet  Has the biggest volcano (Olympus Mons)  2 tiny moons  NASA's rovers explore it  Might have had water!"},{name:"Jupiter",emoji:"",color:"#c88b3a",x:54,y:50,size:44,facts:"Biggest planet!  79+ moons  Great Red Spot is a storm bigger than Earth  Made of gas  Could fit 1,300 Earths inside!"},{name:"Saturn",emoji:"",color:"#e8d5a3",x:66,y:25,size:40,facts:"Famous rings made of ice and rock  82+ moons  So light it could float in water!  Rings are 282,000 km wide but only 10 m thick!"},{name:"Uranus",emoji:"",color:"#4dc9f6",x:77,y:55,size:32,facts:"Ice giant!  Tilted on its side (98!)  27 moons  -224C cold  Takes 84 Earth years to orbit the Sun"},{name:"Neptune",emoji:"",color:"#4444ff",x:88,y:40,size:30,facts:"Farthest planet  Strongest winds (2,100 km/h!)  14 moons  Deep blue color  Takes 165 years to orbit the Sun"}],l=document.getElementById("sp1-system");l.innerHTML='<div style="position:absolute;left:6%;top:50%;transform:translateY(-50%);font-size:3rem"></div>',window.sp1Explored=0,n.forEach((m,g)=>{const v=document.createElement("div");v.className="planet",v.style.cssText=`left:${m.x}%;top:${m.y}%;width:${m.size}px;height:${m.size}px;background:${m.color};font-size:${m.size*.6}px;`,v.textContent=m.emoji,v.onclick=()=>{v.classList.contains("discovered")||(v.classList.add("discovered"),window.sp1Explored++,document.getElementById("sp1-count").textContent=`Explored: ${window.sp1Explored}/8`,addPoints(3)),document.querySelectorAll(".scene-popup").forEach(w=>w.remove());const b=document.createElement("div");b.className="scene-popup show",b.innerHTML=`<h5>${m.name} ${m.emoji}</h5><p>${m.facts}</p>`,b.style.cssText=`left:${Math.min(m.x,60)}%;top:${Math.min(m.y+10,75)}%;`,l.appendChild(b),setTimeout(()=>b.remove(),5e3)},l.appendChild(v)});const r=["Mercury","Venus","Earth","Mars","Jupiter","Saturn","Uranus","Neptune"],u=document.getElementById("sp1-items"),d=document.getElementById("sp1-slots");[...n].sort(()=>Math.random()-.5).forEach((m,g)=>{const v=document.createElement("div");v.className="drag-item",v.textContent=`${m.emoji} ${m.name}`,v.dataset.value=r.indexOf(m.name).toString(),u.appendChild(v),Qe(v)});for(let m=0;m<8;m++){const g=document.createElement("div");g.className="sequence-slot",g.textContent=m===0?" Closest":m===7?"Farthest":`#${m+1}`,g.dataset.onDrop="sp1SlotDrop",g.dataset.slot=m,d.appendChild(g)}window.sp1Slots={}},function(s){s.innerHTML=`
        <h2> Life of a Star</h2>
        <p class="lesson-desc">Stars are born, live, and die  just like living things! A star's life can last billions of years. Let's explore the amazing journey of a star!</p>
        <div class="activity">
          <h3> Activity: Star Lifecycle</h3>
          <p class="instructions">Drag the stages into the correct order to show how a star lives!</p>
          <div class="drag-zone" id="sp2-items"></div>
          <div class="sequence-slots" id="sp2-slots"></div>
          <div class="feedback" id="sp2-fb"></div>
          <button class="btn-check" onclick="sp2Check()">Check </button>
        </div>
        <div class="activity">
          <h3> Star Facts</h3>
          <div class="card-grid" id="sp2-cards"></div>
        </div>
      `;const n=[" Nebula (Gas Cloud)"," Protostar"," Main Sequence"," Red Giant"," Supernova / White Dwarf"],l=document.getElementById("sp2-items"),r=document.getElementById("sp2-slots");[...n].sort(()=>Math.random()-.5).forEach((f,m)=>{const g=document.createElement("div");g.className="drag-item",g.textContent=f,g.dataset.value=n.indexOf(f).toString(),l.appendChild(g),Qe(g)});for(let f=0;f<5;f++){const m=document.createElement("div");m.className="sequence-slot",m.textContent=`Stage ${f+1}`,m.dataset.onDrop="sp2SlotDrop",m.dataset.slot=f,r.appendChild(m)}window.sp2Slots={};const u=[{front:" Nebula",back:"A giant cloud of gas and dust in space. Gravity pulls it together to start forming a star!"},{front:" Our Sun",back:"Our Sun is a middle-aged star, about 4.6 billion years old. It will live for about 10 billion years total!"},{front:" Supernova",back:"When a massive star dies, it EXPLODES! This explosion is called a supernova and is brighter than an entire galaxy!"},{front:" Black Hole",back:"If a really massive star explodes, what's left can collapse into a black hole  where gravity is so strong nothing can escape!"}],d=document.getElementById("sp2-cards");u.forEach(f=>{d.innerHTML+=`<div class="flip-card" onclick="this.classList.toggle('flipped')"><div class="flip-card-inner"><div class="flip-card-front"><span class="emoji">${f.front.split(" ")[0]}</span><h4>${f.front}</h4><p style="font-size:.75rem;color:var(--text3)">Tap to reveal!</p></div><div class="flip-card-back"><h5>${f.front}</h5><p>${f.back}</p></div></div></div>`})},function(s){s.innerHTML=`
        <h2> Rockets & Launch Science</h2>
        <p class="lesson-desc">To escape Earth's gravity, we need rockets! Every part of a rocket has a crucial job. Let's build one together!</p>
        <div class="activity">
          <h3> Activity: Build a Rocket!</h3>
          <p class="instructions">Drag rocket parts onto the launch pad in the right order (bottom to top)!</p>
          <div style="display:flex;gap:30px;align-items:start;flex-wrap:wrap;justify-content:center">
            <div>
              <p style="font-size:.85rem;color:var(--text3);margin-bottom:8px">Parts bin:</p>
              <div class="drag-zone" id="sp3-parts" style="flex-direction:column;max-width:250px"></div>
            </div>
            <div>
              <p style="font-size:.85rem;color:var(--text3);margin-bottom:8px">Your Rocket:</p>
              <div class="rocket-frame" id="sp3-rocket"></div>
              <button class="btn-check" id="sp3-launch" onclick="sp3Launch()" style="display:none;width:100%"> LAUNCH!</button>
            </div>
          </div>
          <div class="feedback" id="sp3-fb"></div>
        </div>
      `;const n=[{name:" Nose Cone",desc:"Protects the payload from heat and air resistance",slot:0},{name:" Payload (Satellite)",desc:"What the rocket is carrying to space!",slot:1},{name:" Fuel Tank",desc:"Stores fuel and oxidizer for the engines",slot:2},{name:" Engine",desc:"Burns fuel to create thrust  pushes the rocket UP!",slot:3},{name:" Fins",desc:"Keep the rocket stable and flying straight",slot:4}],l=document.getElementById("sp3-parts"),r=document.getElementById("sp3-rocket");[...n].sort(()=>Math.random()-.5).forEach(u=>{const d=document.createElement("div");d.className="drag-item",d.innerHTML=`<strong>${u.name}</strong><br><span style="font-size:.75rem;color:var(--text2)">${u.desc}</span>`,d.dataset.value=u.slot.toString(),l.appendChild(d),Qe(d)});for(let u=0;u<5;u++){const d=document.createElement("div");d.className="rocket-slot",d.textContent=u===0?" Top":u===4?" Bottom":`Part ${u+1}`,d.dataset.onDrop="sp3Drop",d.dataset.slot=u,r.appendChild(d)}window.sp3Filled=0},function(s){s.innerHTML=`
        <h2> Mission to Mars</h2>
        <p class="lesson-desc">You're planning a mission to Mars! But your cargo ship has a weight limit. Choose wisely  your crew's survival depends on it!</p>
        <div class="activity">
          <h3> Activity: Pack the Cargo!</h3>
          <p class="instructions">Drag supplies into the cargo bay. Weight limit: <strong>1000 kg</strong>. Choose wisely!</p>
          <div class="drag-zone" id="sp4-items" style="gap:8px"></div>
          <div>
            <div class="weight-label"><span>Weight:</span><span id="sp4-weight-text">0 / 1000 kg</span></div>
            <div class="weight-bar"><div class="weight-fill" id="sp4-weight-fill" style="width:0;background:var(--green)"></div></div>
          </div>
          <div class="cargo-bay" data-on-drop="sp4Drop" id="sp4-cargo">
            <span class="drag-zone-label"> Cargo Bay  Drop supplies here!</span>
            <div id="sp4-cargo-items" style="display:flex;flex-wrap:wrap;gap:8px;margin-top:10px"></div>
          </div>
          <div class="feedback" id="sp4-fb"></div>
          <button class="btn-check" onclick="sp4Check()">Ready for Launch! </button>
        </div>
      `;const n=[{name:" Food (6 months)",w:200,essential:!0},{name:" Water Recycler",w:150,essential:!0},{name:" Oxygen Generator",w:180,essential:!0},{name:" Repair Tools",w:80,essential:!0},{name:" Seeds & Soil",w:60,essential:!1},{name:" Solar Panels",w:120,essential:!0},{name:" Communication Radio",w:90,essential:!0},{name:" Medical Kit",w:50,essential:!0},{name:" Entertainment System",w:40,essential:!1},{name:" Science Equipment",w:100,essential:!1},{name:" Sleeping Pods",w:200,essential:!1},{name:" Exercise Equipment",w:80,essential:!1}],l=document.getElementById("sp4-items");window.sp4Weight=0,window.sp4Cargo=[],n.forEach((r,u)=>{const d=document.createElement("div");d.className="drag-item",d.innerHTML=`${r.name} <span style="font-size:.75rem;color:var(--text3)">${r.w}kg</span>`,d.dataset.value=JSON.stringify(r),d.dataset.id=u,l.appendChild(d),Qe(d)})},function(s){s.innerHTML=`
        <h2> Gravity & Orbits</h2>
        <p class="lesson-desc">Gravity is the invisible force that holds the universe together! It's why planets orbit stars, moons orbit planets, and why you don't float away. Let's explore!</p>
        <div class="activity">
          <h3> Activity: Orbit Simulator</h3>
          <p class="instructions">Use the sliders to change gravity and see what happens to the planet's orbit!</p>
          <div class="orbit-sim" id="sp5-sim">
            <div class="sun-center"></div>
            <div class="orbiting-planet" id="sp5-planet"></div>
          </div>
          <div class="slider-control">
            <label> Gravity Strength: <span id="sp5-grav-val">Medium</span></label>
            <input type="range" min="1" max="5" value="3" id="sp5-gravity" oninput="sp5Update()">
          </div>
          <div class="slider-control">
            <label> Distance from Sun: <span id="sp5-dist-val">Medium</span></label>
            <input type="range" min="1" max="5" value="3" id="sp5-distance" oninput="sp5Update()">
          </div>
          <p id="sp5-info" style="text-align:center;color:var(--cyan);margin:12px 0"></p>
        </div>
        <div class="activity">
          <h3> What Would Happen If...?</h3>
          <div id="sp5-quiz" class="choice-cards"></div>
          <div class="feedback" id="sp5-fb"></div>
        </div>
      `;let n=0;window.sp5Anim=!0;function l(){if(!window.sp5Anim)return;const u=document.getElementById("sp5-sim");if(!u){window.sp5Anim=!1;return}const d=parseInt(document.getElementById("sp5-gravity")?.value||3),f=parseInt(document.getElementById("sp5-distance")?.value||3),m=.005+d*.008-f*.003,g=40+f*25;n+=m;const v=document.getElementById("sp5-planet");if(v){const b=u.offsetWidth/2,w=u.offsetHeight/2;v.style.left=b+Math.cos(n)*g-12+"px",v.style.top=w+Math.sin(n)*g-12+"px"}requestAnimationFrame(l)}l(),window.sp5Update=function(){const u=parseInt(document.getElementById("sp5-gravity").value),d=parseInt(document.getElementById("sp5-distance").value),f=["Very Low","Low","Medium","High","Very High"];document.getElementById("sp5-grav-val").textContent=f[u-1],document.getElementById("sp5-dist-val").textContent=f[d-1];const m=document.getElementById("sp5-info");u>=4&&d<=2?m.textContent=" Too close! The planet would be pulled into the Sun!":u<=2&&d>=4?m.textContent=" The planet flies away! Not enough gravity to hold it!":m.textContent=" Stable orbit! The planet circles the Sun perfectly."};const r=document.getElementById("sp5-quiz");[{text:" Earth was closer to the Sun",correct:!0,emoji:""},{text:" Earth had less gravity",correct:!1,emoji:""},{text:" The Sun disappeared",correct:!1,emoji:""}].forEach(u=>{const d=document.createElement("div");d.className="choice-card",d.innerHTML=`<span class="emoji">${u.emoji}</span><p style="font-size:.9rem">${u.text}</p>`,d.onclick=()=>{r.querySelectorAll(".choice-card").forEach(f=>f.style.pointerEvents="none"),d.classList.add("selected"),ge(d.closest(".activity"),"info",u.correct?" Correct! Earth would be much hotter, oceans would boil, and life couldn't exist as we know it!":u.emoji===""?"With less gravity, the atmosphere would thin out and you could jump super high  but it'd be hard to breathe!":" Earth would fly off in a straight line into space! We need the Sun's gravity to keep orbiting."),addPoints(10),setTimeout(completeChapter,2e3)},r.appendChild(d)})},function(s){s.innerHTML=`
        <h2> Space AI</h2>
        <p class="lesson-desc">AI is essential for space exploration! It drives Mars rovers, finds new planets, and helps astronauts on the space station. Let's see how!</p>
        <div class="activity">
          <h3> Activity: Match AI to Space Problem!</h3>
          <p class="instructions">Drag each AI tool to the space problem it solves!</p>
          <div class="drag-zone" id="sp6-tools"></div>
          <div id="sp6-problems" style="display:grid;gap:12px;margin:16px 0"></div>
          <div class="feedback" id="sp6-fb"></div>
        </div>
      `;const n=[{tool:" Self-Driving AI",problem:"Navigate a rover on Mars with 20-minute signal delay",emoji:""},{tool:" Pattern Recognition AI",problem:"Find new planets in telescope data",emoji:""},{tool:" Health Monitor AI",problem:"Track astronaut health on long missions",emoji:""},{tool:" Communication AI",problem:"Compress and send data across millions of miles",emoji:""}],l=document.getElementById("sp6-tools"),r=document.getElementById("sp6-problems");window.sp6Matched=0,[...n].sort(()=>Math.random()-.5).forEach((u,d)=>{const f=document.createElement("div");f.className="drag-item",f.textContent=u.tool,f.dataset.value=u.tool,l.appendChild(f),Qe(f)}),n.forEach((u,d)=>{const f=document.createElement("div");f.className="drag-zone",f.dataset.onDrop="sp6Drop",f.dataset.answer=u.tool,f.innerHTML=`<span class="drag-zone-label">${u.emoji} ${u.problem}</span>`,r.appendChild(f)})},function(s){s.innerHTML=`
        <h2> Astronaut Training</h2>
        <p class="lesson-desc">Think you have what it takes to be an astronaut? Let's find out! Complete these training challenges!</p>
        <div class="activity">
          <h3> Challenge 1: Speed Test</h3>
          <p class="instructions">Astronauts need fast reflexes! Tap the circle as many times as you can in 10 seconds!</p>
          <div class="tap-counter" id="sp7-counter">0</div>
          <div class="timer-bar"><div class="timer-fill" id="sp7-timer" style="width:100%"></div></div>
          <div class="tap-area" id="sp7-tap" onclick="sp7Tap()">TAP!</div>
          <button class="btn-check" id="sp7-start" onclick="sp7Start()">Start Challenge! </button>
          <div class="feedback" id="sp7-fb1"></div>
        </div>
        <div class="activity">
          <h3> Challenge 2: Emergency Response</h3>
          <p class="instructions">ALARM! There's an oxygen leak on the space station! What do you do FIRST?</p>
          <div class="choice-cards" id="sp7-emergency"></div>
          <div class="feedback" id="sp7-fb2"></div>
        </div>
      `,window.sp7Taps=0,window.sp7Running=!1,window.sp7Tap=function(){window.sp7Running&&(window.sp7Taps++,document.getElementById("sp7-counter").textContent=window.sp7Taps,gsap.to("#sp7-tap",{scale:.9,duration:.05,yoyo:!0,repeat:1}))},window.sp7Start=function(){window.sp7Taps=0,window.sp7Running=!0,document.getElementById("sp7-counter").textContent="0",document.getElementById("sp7-start").style.display="none";let r=10;const u=setInterval(()=>{if(r-=.1,document.getElementById("sp7-timer").style.width=r/10*100+"%",r<=0){clearInterval(u),window.sp7Running=!1;const d=window.sp7Taps>=50?" AMAZING! You'd make an incredible astronaut!":window.sp7Taps>=30?" Great reflexes! You passed!":" Keep practicing! Astronauts train every day!";ge(document.getElementById("sp7-fb1").parentElement,"success",`${d} (${window.sp7Taps} taps)`),addPoints(Math.min(window.sp7Taps,30))}},100)};const n=[{text:" Panic and scream",correct:!1},{text:" Put on oxygen mask, then seal the leak",correct:!0},{text:" Take a photo for social media",correct:!1},{text:" Go back to sleep",correct:!1}],l=document.getElementById("sp7-emergency");n.forEach(r=>{const u=document.createElement("div");u.className="choice-card",u.innerHTML=`<p>${r.text}</p>`,u.onclick=()=>{l.querySelectorAll(".choice-card").forEach(d=>d.style.pointerEvents="none"),u.classList.add(r.correct?"correct":"wrong"),ge(l.parentElement,r.correct?"success":"error",r.correct?" Perfect! In emergencies: Protect yourself first (oxygen mask), then fix the problem. Stay calm!":" In space emergencies, stay calm! The correct answer: Put on oxygen mask first, then seal the leak."),r.correct?(addPoints(15),setTimeout(completeChapter,1500)):setTimeout(()=>{l.querySelectorAll(".choice-card").forEach(d=>{d.classList.remove("wrong"),d.style.pointerEvents=""})},2e3)},l.appendChild(u)})},function(s){s.innerHTML=`
        <h2> Design Your Space Mission  Capstone!</h2>
        <p class="lesson-desc">Time to plan YOUR space mission! Pick a destination, assemble your crew, and choose your equipment.</p>
        <div class="activity">
          <h3> Step 1: Pick Your Destination</h3>
          <div class="choice-cards" id="sp8-dest"></div>
        </div>
        <div class="activity" id="sp8-step2" style="display:none">
          <h3> Step 2: Assemble Your Crew</h3>
          <p class="instructions">Drag crew members to your ship (pick 4):</p>
          <div class="drag-zone" id="sp8-crew-src"></div>
          <div class="drag-zone" id="sp8-crew-target" data-on-drop="sp8CrewDrop" style="min-height:60px;border-color:var(--cyan)">
            <span class="drag-zone-label"> Your Crew</span>
          </div>
        </div>
        <div class="activity" id="sp8-step3" style="display:none">
          <h3> Step 3: Choose Equipment</h3>
          <div class="choice-cards" id="sp8-equip"></div>
        </div>
        <div id="sp8-result" style="display:none;text-align:center;padding:30px"></div>
      `;const n=[{emoji:"",name:"The Moon",desc:"3 days away  Low gravity  Practice base"},{emoji:"",name:"Mars",desc:"7 months away  Thin atmosphere  Build a colony"},{emoji:"",name:"Europa",desc:"6 years away  Ice moon of Jupiter  Ocean beneath?"},{emoji:"",name:"Titan",desc:"7 years away  Saturn's moon  Has lakes!"}],l=document.getElementById("sp8-dest");window.sp8State={dest:null,crew:[],equip:[]},n.forEach(f=>{const m=document.createElement("div");m.className="choice-card",m.innerHTML=`<span class="emoji">${f.emoji}</span><p><strong>${f.name}</strong></p><p style="font-size:.8rem;color:var(--text2)">${f.desc}</p>`,m.onclick=()=>{l.querySelectorAll(".choice-card").forEach(g=>g.classList.remove("selected")),m.classList.add("selected"),window.sp8State.dest=f,document.getElementById("sp8-step2").style.display="",addPoints(5)},l.appendChild(m)});const r=[" Commander"," Scientist"," Doctor"," Engineer"," Chef"," AI Specialist"],u=document.getElementById("sp8-crew-src");r.forEach(f=>{const m=document.createElement("div");m.className="drag-item",m.textContent=f,m.dataset.value=f,u.appendChild(m),Qe(m)});const d=[" Telescope"," Satellite Relay"," Lab Equipment"," Drilling Rig"," Habitat Module"," Greenhouse"];setTimeout(()=>{const f=document.getElementById("sp8-equip");let m=0;d.forEach(g=>{const v=document.createElement("div");v.className="choice-card",v.innerHTML=`<p>${g}</p>`,v.onclick=()=>{if(v.classList.toggle("selected"),v.classList.contains("selected")?(window.sp8State.equip.push(g),m++,addPoints(3)):(window.sp8State.equip=window.sp8State.equip.filter(b=>b!==g),m--),m>=3&&window.sp8State.crew.length>=3&&window.sp8State.dest){const b=document.getElementById("sp8-result");b.style.display="",b.innerHTML=`<div class="chapter-complete show"><span class="emoji"></span><h3>Mission ${window.sp8State.dest.name} is GO!</h3><p>Destination: ${window.sp8State.dest.emoji} ${window.sp8State.dest.name}<br>Crew: ${window.sp8State.crew.join(", ")}<br>Equipment: ${window.sp8State.equip.join(", ")}</p></div>`,setTimeout(completeChapter,1e3)}},f.appendChild(v)})},100)}],robotics:[function(s){s.innerHTML=`
        <h2> What is a Robot?</h2>
        <p class="lesson-desc">A robot is a machine that can <strong>Sense</strong> the world, <strong>Think</strong> about what to do, and <strong>Act</strong> on its decisions. Not everything that moves is a robot! Let's sort it out.</p>
        <div class="activity">
          <h3> Activity: Robot or Not?</h3>
          <p class="instructions">Drag each item into the correct category!</p>
          <div class="drag-zone" id="rb1-items"></div>
          <div class="buckets">
            <div class="bucket" style="border-color:var(--green)" data-on-drop="rb1Drop" data-bucket="yes">
              <h4> Robot</h4><div class="bucket-items" id="rb1-yes"></div>
            </div>
            <div class="bucket" style="border-color:var(--red)" data-on-drop="rb1Drop" data-bucket="no">
              <h4> Not a Robot</h4><div class="bucket-items" id="rb1-no"></div>
            </div>
          </div>
          <div class="feedback" id="rb1-fb"></div>
          <button class="btn-check" onclick="rb1Check()">Check </button>
        </div>
        <div class="activity">
          <h3> The 3 Rules of Robots</h3>
          <div class="card-grid">
            <div class="flip-card" onclick="this.classList.toggle('flipped')"><div class="flip-card-inner"><div class="flip-card-front"><span class="emoji"></span><h4>1. SENSE</h4></div><div class="flip-card-back"><h5>Sense</h5><p>Robots use sensors (cameras, microphones, touch) to detect the world around them.</p></div></div></div>
            <div class="flip-card" onclick="this.classList.toggle('flipped')"><div class="flip-card-inner"><div class="flip-card-front"><span class="emoji"></span><h4>2. THINK</h4></div><div class="flip-card-back"><h5>Think</h5><p>A computer brain processes sensor data and decides what to do next.</p></div></div></div>
            <div class="flip-card" onclick="this.classList.toggle('flipped')"><div class="flip-card-inner"><div class="flip-card-front"><span class="emoji"></span><h4>3. ACT</h4></div><div class="flip-card-back"><h5>Act</h5><p>Motors, speakers, or lights carry out the robot's decisions in the real world.</p></div></div></div>
          </div>
        </div>
      `;const n=[{name:" Roomba Vacuum",robot:!0},{name:" Self-Driving Car",robot:!0},{name:" Regular Light Bulb",robot:!1},{name:" Mars Rover",robot:!0},{name:" Teddy Bear",robot:!1},{name:" Factory Arm",robot:!0},{name:" Book",robot:!1},{name:" Robot Dog (Spot)",robot:!0},{name:" Bicycle",robot:!1},{name:" Surgery Robot",robot:!0}],l=document.getElementById("rb1-items");n.sort(()=>Math.random()-.5).forEach((r,u)=>{const d=document.createElement("div");d.className="drag-item",d.textContent=r.name,d.dataset.value=r.robot?"yes":"no",l.appendChild(d),Qe(d)}),window.rb1Placed={}},function(s){s.innerHTML=`
        <h2> Robot Senses (Sensors)</h2>
        <p class="lesson-desc">Robots "sense" the world using sensors  special devices that detect light, sound, distance, temperature, and more. Let's match sensors to situations!</p>
        <div class="activity">
          <h3> Activity: Match the Sensor!</h3>
          <p class="instructions">Drag each sensor to the situation where it would be used!</p>
          <div class="drag-zone" id="rb2-sensors"></div>
          <div id="rb2-situations" style="display:grid;gap:12px;margin:16px 0"></div>
          <div class="feedback" id="rb2-fb"></div>
        </div>
      `;const n=[{sensor:" Camera",situation:"A robot needs to recognize faces",emoji:""},{sensor:" Microphone",situation:"A robot needs to hear voice commands",emoji:""},{sensor:" Distance Sensor",situation:"A robot needs to avoid walls",emoji:""},{sensor:" Temperature Sensor",situation:"A robot checks if food is cooked",emoji:""},{sensor:" Touch Sensor",situation:"A robot detects when someone presses a button",emoji:""}],l=document.getElementById("rb2-sensors"),r=document.getElementById("rb2-situations");window.rb2Matched=0,[...n].sort(()=>Math.random()-.5).forEach(u=>{const d=document.createElement("div");d.className="drag-item",d.textContent=u.sensor,d.dataset.value=u.sensor,l.appendChild(d),Qe(d)}),n.forEach(u=>{const d=document.createElement("div");d.className="drag-zone",d.dataset.onDrop="rb2Drop",d.dataset.answer=u.sensor,d.innerHTML=`<span class="drag-zone-label">${u.emoji} ${u.situation}</span>`,r.appendChild(d)})},function(s){s.innerHTML=`
        <h2> Robot Brain (How They Think)</h2>
        <p class="lesson-desc">Robots think using simple rules: IF something happens, THEN do this, ELSE do that. Let's build a robot brain using visual logic blocks!</p>
        <div class="activity">
          <h3> Activity: Build Robot Logic!</h3>
          <p class="instructions">Drag blocks to build the robot's decision-making rules. Make the robot navigate around obstacles!</p>
          <div class="block-palette" id="rb3-palette"></div>
          <p style="font-size:.85rem;color:var(--text3);margin:8px 0">Drop blocks here to build your logic:</p>
          <div class="flowchart-area" id="rb3-flow" data-on-drop="rb3Drop"></div>
          <div class="feedback" id="rb3-fb"></div>
          <button class="btn-check" onclick="rb3Check()">Test Logic </button>
        </div>
      `;const n=[{text:"IF obstacle ahead",type:"block-if"},{text:"THEN turn right",type:"block-then"},{text:"ELSE go forward",type:"block-else"},{text:"IF path clear",type:"block-if"},{text:"THEN go forward",type:"block-then"},{text:"ELSE stop",type:"block-else"}],l=document.getElementById("rb3-palette");window.rb3Blocks=[],n.forEach((r,u)=>{const d=document.createElement("div");d.className=`block ${r.type}`,d.textContent=r.text,d.dataset.value=r.text,d.dataset.id=u,l.appendChild(d),Qe(d)})},function(s){s.innerHTML=`
        <h2> Robot Movement</h2>
        <p class="lesson-desc">Let's program a robot to navigate through a maze using command blocks! No typing  just drag arrows!</p>
        <div class="activity">
          <h3> Activity: Navigate the Maze!</h3>
          <p class="instructions">Use the arrow buttons to build a path. Then hit RUN to watch your robot go!</p>
          <div id="rb4-maze" class="maze-grid" style="grid-template-columns:repeat(7,40px)"></div>
          <div class="command-builder">
            <div class="cmd-block" onclick="rb4Add('')"></div>
            <div class="cmd-block" onclick="rb4Add('')"></div>
            <div class="cmd-block" onclick="rb4Add('')"></div>
            <div class="cmd-block" onclick="rb4Add('')"></div>
            <div class="cmd-block" style="background:rgba(239,68,68,0.2);border-color:var(--red)" onclick="rb4Clear()"></div>
          </div>
          <div class="command-sequence" id="rb4-seq"></div>
          <button class="btn-check" onclick="rb4Run()"> Run Program!</button>
          <div class="feedback" id="rb4-fb"></div>
        </div>
      `;const n=[[1,1,1,1,1,1,1],[1,2,0,0,1,0,1],[1,1,1,0,1,0,1],[1,0,0,0,0,0,1],[1,0,1,1,1,0,1],[1,0,0,0,0,3,1],[1,1,1,1,1,1,1]],l=document.getElementById("rb4-maze");window.rb4Maze=n,window.rb4Robot={r:1,c:1},window.rb4Goal={r:5,c:5},window.rb4Cmds=[];function r(){l.innerHTML="",n.forEach((u,d)=>u.forEach((f,m)=>{const g=document.createElement("div");g.className=`maze-cell ${f===1?"maze-wall":window.rb4Robot.r===d&&window.rb4Robot.c===m?"maze-robot":d===5&&m===5?"maze-goal":"maze-path"}`,g.textContent=window.rb4Robot.r===d&&window.rb4Robot.c===m?"":d===5&&m===5?"":"",l.appendChild(g)}))}r(),window.rb4Render=r,window.rb4Add=function(u){if(window.rb4Cmds.length>=20)return;window.rb4Cmds.push(u);const d=document.getElementById("rb4-seq"),f=document.createElement("div");f.className="cmd-placed",f.textContent=u,d.appendChild(f)},window.rb4Clear=function(){window.rb4Cmds=[],document.getElementById("rb4-seq").innerHTML="",window.rb4Robot={r:1,c:1},r()},window.rb4Run=async function(){window.rb4Robot={r:1,c:1},r();for(let u=0;u<window.rb4Cmds.length;u++){const d=window.rb4Cmds[u];let f=window.rb4Robot.r,m=window.rb4Robot.c;if(d===""&&f--,d===""&&f++,d===""&&m--,d===""&&m++,n[f]?.[m]!==1&&n[f]?.[m]!==void 0&&(window.rb4Robot={r:f,c:m}),r(),await new Promise(g=>setTimeout(g,300)),window.rb4Robot.r===5&&window.rb4Robot.c===5){ge(document.getElementById("rb4-fb").parentElement,"success"," The robot reached the goal! Amazing programming!"),addPoints(20),setTimeout(completeChapter,1e3);return}}ge(document.getElementById("rb4-fb").parentElement,"error"," Hint: Look at where the goal  is on the grid! Count the squares: how many steps RIGHT and how many steps DOWN does the robot need? Avoid walls (dark squares)! Try breaking it into small moves  first go right, then go down. Use REPEAT blocks if you need to go the same direction multiple times. You got this! ")}},function(s){s.innerHTML=`
        <h2> Types of Robots</h2>
        <p class="lesson-desc">Robots come in all shapes and sizes! Each type is designed for a specific job. Let's explore!</p>
        <div class="activity">
          <h3> Explore Robot Types!</h3>
          <p class="instructions">Tap each card to learn about different robots!</p>
          <div class="card-grid" id="rb5-cards"></div>
        </div>
        <div class="activity">
          <h3> Activity: Match Robot to Job!</h3>
          <div class="drag-zone" id="rb5-robots"></div>
          <div id="rb5-jobs" style="display:grid;gap:12px;margin:16px 0"></div>
          <div class="feedback" id="rb5-fb"></div>
        </div>
      `;const n=[{emoji:"",name:"Industrial Arm",desc:"Builds cars, welds metal, paints  does repetitive factory work 24/7!"},{emoji:"",name:"Drone",desc:"Flies and takes photos, delivers packages, helps farmers check crops!"},{emoji:"",name:"Humanoid",desc:"Walks on two legs, can interact with humans. Used in research and entertainment!"},{emoji:"",name:"Underwater ROV",desc:"Explores deep oceans, fixes undersea cables, studies marine life!"},{emoji:"",name:"Medical Robot",desc:"Helps surgeons with super-precise operations. Can work through tiny incisions!"}],l=document.getElementById("rb5-cards");n.forEach(f=>{l.innerHTML+=`<div class="flip-card" onclick="this.classList.toggle('flipped')"><div class="flip-card-inner"><div class="flip-card-front"><span class="emoji">${f.emoji}</span><h4>${f.name}</h4></div><div class="flip-card-back"><h5>${f.name}</h5><p>${f.desc}</p></div></div></div>`});const r=[{robot:" Industrial Arm",job:"Welding car parts in a factory",emoji:""},{robot:" Drone",job:"Delivering a package to your door",emoji:""},{robot:" Medical Robot",job:"Helping a surgeon with a delicate operation",emoji:""},{robot:" Underwater ROV",job:"Exploring the bottom of the ocean",emoji:""}],u=document.getElementById("rb5-robots"),d=document.getElementById("rb5-jobs");window.rb5Matched=0,[...r].sort(()=>Math.random()-.5).forEach(f=>{const m=document.createElement("div");m.className="drag-item",m.textContent=f.robot,m.dataset.value=f.robot,u.appendChild(m),Qe(m)}),r.forEach(f=>{const m=document.createElement("div");m.className="drag-zone",m.dataset.onDrop="rb5Drop",m.dataset.answer=f.robot,m.innerHTML=`<span class="drag-zone-label">${f.emoji} ${f.job}</span>`,d.appendChild(m)})},function(s){s.innerHTML=`
        <h2> Robots & AI Together</h2>
        <p class="lesson-desc">When you give a robot AI, it becomes SMART! Instead of just following rules, it can learn, recognize things, and make better decisions. Let's see how!</p>
        <div class="activity">
          <h3> Activity: Teach the Robot to See!</h3>
          <p class="instructions">Drag training images to teach the robot what each object is. The more examples, the smarter it gets!</p>
          <div class="drag-zone" id="rb6-images"></div>
          <div class="buckets">
            <div class="bucket" style="border-color:var(--cyan)" data-on-drop="rb6Drop" data-bucket="apple">
              <h4> Apple</h4><div class="bucket-items" id="rb6-apple"></div>
            </div>
            <div class="bucket" style="border-color:var(--purple)" data-on-drop="rb6Drop" data-bucket="banana">
              <h4> Banana</h4><div class="bucket-items" id="rb6-banana"></div>
            </div>
          </div>
          <div id="rb6-robot-view" style="text-align:center;margin:20px 0">
            <p> Robot's AI accuracy: <strong id="rb6-accuracy">0%</strong></p>
            <div class="weight-bar"><div class="weight-fill" id="rb6-acc-fill" style="width:0;background:var(--cyan)"></div></div>
          </div>
          <div class="feedback" id="rb6-fb"></div>
        </div>
      `;const n=[{name:" Red Apple",type:"apple"},{name:" Green Apple",type:"apple"},{name:" Yellow Banana",type:"banana"},{name:" Big Apple",type:"apple"},{name:" Small Banana",type:"banana"},{name:" Ripe Banana",type:"banana"}],l=document.getElementById("rb6-images");window.rb6Correct=0,window.rb6Total=0,n.sort(()=>Math.random()-.5).forEach((r,u)=>{const d=document.createElement("div");d.className="drag-item",d.textContent=r.name,d.dataset.value=r.type,l.appendChild(d),Qe(d)})},function(s){s.innerHTML=`
        <h2> Robot Ethics</h2>
        <p class="lesson-desc">As robots become smarter, they face tough decisions. Should a delivery robot stop to help someone who fell? Let's think about these important questions!</p>
        <div class="activity">
          <h3> Activity: What Should the Robot Do?</h3>
          <div id="rb7-scenarios"></div>
        </div>
      `;const n=[{title:" The Medicine Delivery",situation:"A robot is delivering urgent medicine to a hospital. On the way, it sees an elderly person who has fallen. What should the robot do?",options:[{text:" Keep delivering  the medicine is urgent!",feedback:"The medicine could save a life, but the fallen person needs help too. There's no perfect answer, but the robot should alert emergency services while continuing.",points:8},{text:" Stop and help the person, alert emergency services",feedback:"Great compassion! But what about the urgent medicine? Best answer: alert emergency services AND continue the delivery.",points:8},{text:" Alert emergency services AND continue delivery",feedback:"Excellent thinking! This balances both needs. The robot helps by calling for help while completing its important mission!",points:15}]},{title:" The Privacy Question",situation:"A home robot with cameras sees a teenager sneaking cookies at midnight. Should it tell the parents?",options:[{text:" Yes, report everything it sees",feedback:"But what about privacy? Should robots monitor everything? This could feel like spying.",points:5},{text:" No, some things should stay private",feedback:"Privacy matters! Robots shouldn't be surveillance tools. But what if it was something dangerous?",points:8},{text:" Only report safety concerns, not harmless things",feedback:"Perfect balance! Robots should protect privacy but still watch for real dangers. Eating cookies at midnight? Not a safety issue! ",points:15}]},{title:" The Creative Robot",situation:'An art robot can paint pictures that look exactly like famous artists. A gallery wants to sell them as "original AI art." Is this okay?',options:[{text:" Sure, AI made them so they're original",feedback:"But the AI learned by copying human artists. Is it fair to the original artists whose style is being copied?",points:5},{text:" Only if they credit the artists who inspired the AI",feedback:"Excellent! Giving credit is important. AI art builds on human creativity  we should acknowledge that.",points:15},{text:" No, only humans can make real art",feedback:"Many people feel this way! But AI tools are changing how we think about creativity. The key is being honest about how art is made.",points:8}]}],l=document.getElementById("rb7-scenarios");window.rb7Done=0,n.forEach((r,u)=>{const d=document.createElement("div");d.style.cssText="margin:20px 0;padding:24px;background:rgba(0,0,0,0.2);border-radius:16px;",d.innerHTML=`<h4 style="margin-bottom:8px">${r.title}</h4><p style="color:var(--text2);margin-bottom:14px">${r.situation}</p><div class="choice-cards" id="rb7-s${u}"></div><div class="feedback" id="rb7-fb${u}"></div>`,l.appendChild(d),r.options.forEach(f=>{const m=document.createElement("div");m.className="choice-card",m.innerHTML=`<p>${f.text}</p>`,m.onclick=()=>{d.querySelectorAll(".choice-card").forEach(g=>g.style.pointerEvents="none"),m.classList.add("selected"),ge(d,"info",f.feedback),addPoints(f.points),window.rb7Done++,window.rb7Done>=3&&setTimeout(completeChapter,1500)},d.querySelector(`#rb7-s${u}`).appendChild(m)})})},function(s){s.innerHTML=`
        <h2> Design Your Robot  Capstone!</h2>
        <p class="lesson-desc">Time to design YOUR dream robot! Pick a body, add sensors, give it rules, and name it!</p>
        <div class="activity">
          <h3> Step 1: Choose a Body</h3>
          <div class="choice-cards" id="rb8-body"></div>
        </div>
        <div class="activity" id="rb8-step2" style="display:none">
          <h3> Step 2: Add Sensors</h3>
          <p class="instructions">Pick at least 2 sensors for your robot:</p>
          <div class="choice-cards" id="rb8-sensors"></div>
        </div>
        <div class="activity" id="rb8-step3" style="display:none">
          <h3> Step 3: Set the Rules</h3>
          <p class="instructions">What should your robot do? Pick its mission:</p>
          <div class="choice-cards" id="rb8-mission"></div>
        </div>
        <div class="activity" id="rb8-step4" style="display:none">
          <h3> Step 4: Name Your Robot!</h3>
          <input class="wizard-input" id="rb8-name" placeholder="Give your robot a name!" maxlength="20">
          <button class="btn-check" onclick="rb8Finish()">Create Robot! </button>
        </div>
        <div id="rb8-result" style="display:none"></div>
      `,window.rb8State={body:null,sensors:[],mission:null};const n=[{emoji:"",name:"Humanoid",desc:"Walks on 2 legs"},{emoji:"",name:"Wheeled",desc:"Rolls on wheels"},{emoji:"",name:"Flying Drone",desc:"Flies with propellers"},{emoji:"",name:"Animal-shaped",desc:"4 legs like a dog"}],l=document.getElementById("rb8-body");n.forEach(u=>{const d=document.createElement("div");d.className="choice-card",d.innerHTML=`<span class="emoji">${u.emoji}</span><p><strong>${u.name}</strong></p><p style="font-size:.8rem;color:var(--text2)">${u.desc}</p>`,d.onclick=()=>{l.querySelectorAll(".choice-card").forEach(f=>f.classList.remove("selected")),d.classList.add("selected"),window.rb8State.body=u,document.getElementById("rb8-step2").style.display="",addPoints(5)},l.appendChild(d)});const r=[" Camera"," Microphone"," Distance"," Temperature"," Touch"," GPS"];setTimeout(()=>{const u=document.getElementById("rb8-sensors");let d=0;r.forEach(g=>{const v=document.createElement("div");v.className="choice-card",v.innerHTML=`<p>${g}</p>`,v.onclick=()=>{v.classList.toggle("selected"),v.classList.contains("selected")?(window.rb8State.sensors.push(g),d++,addPoints(3)):(window.rb8State.sensors=window.rb8State.sensors.filter(b=>b!==g),d--),d>=2&&(document.getElementById("rb8-step3").style.display="")},u.appendChild(v)});const f=[{emoji:"",name:"Home Helper",desc:"Cleans, cooks, organizes"},{emoji:"",name:"Ocean Explorer",desc:"Discovers underwater life"},{emoji:"",name:"Medical Assistant",desc:"Helps doctors and patients"},{emoji:"",name:"Garden Farmer",desc:"Grows and harvests plants"}],m=document.getElementById("rb8-mission");f.forEach(g=>{const v=document.createElement("div");v.className="choice-card",v.innerHTML=`<span class="emoji">${g.emoji}</span><p><strong>${g.name}</strong></p><p style="font-size:.8rem;color:var(--text2)">${g.desc}</p>`,v.onclick=()=>{m.querySelectorAll(".choice-card").forEach(b=>b.classList.remove("selected")),v.classList.add("selected"),window.rb8State.mission=g,document.getElementById("rb8-step4").style.display="",addPoints(5)},m.appendChild(v)})},100),window.rb8Finish=function(){const u=document.getElementById("rb8-name").value.trim()||"RoboFriend",d=window.rb8State,f=document.getElementById("rb8-result");f.style.display="",f.innerHTML=`<div class="chapter-complete show">
          <span class="emoji" style="font-size:5rem">${d.body.emoji}</span>
          <h3 style="font-size:1.8rem;color:var(--cyan)">${u}</h3>
          <div class="glass" style="display:inline-block;padding:24px;text-align:left;max-width:400px;margin:16px 0">
            <p><strong>Body:</strong> ${d.body.name} ${d.body.emoji}</p>
            <p><strong>Sensors:</strong> ${d.sensors.join(", ")}</p>
            <p><strong>Mission:</strong> ${d.mission.emoji} ${d.mission.name}</p>
            <p style="margin-top:12px;color:var(--gold);font-style:italic">"${u} is ready to change the world!"</p>
          </div>
        </div>`,addPoints(20),setTimeout(completeChapter,1e3)}}]};function vs(s,n,l,r){const u=n.dataset?.bucket||n.closest(".bucket")?.dataset?.bucket;if(!u)return;const d=s.el.cloneNode(!0);d.style.opacity="1",d.classList.remove("drag-item"),d.style.cssText="padding:6px 12px;border-radius:8px;background:rgba(255,255,255,0.08);font-size:.8rem;margin:2px;";const f=n.querySelector(".bucket-items")||document.getElementById(`${r}-${u}`);f&&f.appendChild(d),s.el.classList.add("placed"),l&&(l[s.el.dataset.id||s.el.textContent]=u)}window.ai1Drop=function(s,n){vs(s,n,window.ai1Placed,"ai1")};window.ai1Check=function(){if(document.querySelectorAll("#ai1-items .drag-item, #ai1-yes .drag-item, #ai1-no .drag-item, .bucket-items *"),!(document.querySelectorAll("#ai1-items .drag-item:not(.placed)").length===0)){ge(document.querySelector(".activity"),"error","Drag all items first!");return}addPoints(15),ge(document.querySelector(".activity"),"success"," Great job sorting! AI is in more things than you think  from voice assistants to game characters to search engines!"),setTimeout(completeChapter,1500)};window.ai2SlotDrop=function(s,n){const l=n.dataset.slot;n.textContent=s.el.textContent,n.classList.add("filled"),s.el.classList.add("placed"),window.ai2Slots[l]=s.el.dataset.value};window.ai2Check=function(){const s=Object.keys(window.ai2Slots).length===5&&Object.entries(window.ai2Slots).every(([n,l])=>n===l);if(Object.keys(window.ai2Slots).length<5){ge(document.querySelector(".activity"),"error","Fill all 5 slots!");return}s?(ge(document.querySelector(".activity"),"success"," Perfect! AI learns step by step: Collect  Clean  Train  Test  Improve!"),addPoints(15)):ge(document.querySelector(".activity"),"error"," Hint: Think of teaching a pet! 1 Collect Data = gather examples (photos of cats & dogs)  2 Clean Data = remove bad examples (blurry photos)  3 Train Model = show examples repeatedly (this is a cat, this is a dog)  4 Test = quiz time! (show new photos)  5 Improve = fix mistakes and try again. The order matters! ")};window.ai2TrainDrop=function(s,n){vs(s,n,window.ai2TrainPlaced,"ai2")};window.ai2TrainCheck=function(){addPoints(10),ge(document.querySelectorAll(".activity")[1],"success",' You just trained an AI! The more examples you give, the better it gets. This is called "machine learning"!'),setTimeout(completeChapter,1500)};window.ai5Drop=function(s,n){n.dataset.challenge;const l=n.querySelector(".drag-zone-label");l&&l.remove();const r=s.el.cloneNode(!0);r.style.cssText="padding:6px 12px;border-radius:8px;background:rgba(6,182,212,0.15);font-size:.85rem;margin:2px;display:inline-block;",n.appendChild(r),s.el.classList.add("placed")};window.ai5Check=function(s){addPoints(10),ge(document.getElementById(`ai5-fb-${s}`).parentElement,"success",` Great question building! "${window.ai5Challenges[s].answer}" is SO much better than the boring version!`),window.ai5Done=(window.ai5Done||0)+1,window.ai5Done>=3&&setTimeout(completeChapter,1e3)};window.ai6Drop=function(s,n){vs(s,n,window.ai6Placed,"ai6")};window.ai6Check=function(){addPoints(15),ge(document.querySelector(".activity"),"success"," Excellent fact-checking! Remember: AI can make mistakes. Always verify important information with trusted sources!"),setTimeout(completeChapter,1500)};window.ai8RuleDrop=function(s,n){const l=s.el.cloneNode(!0);l.style.cssText="padding:6px 12px;border-radius:8px;background:rgba(34,197,94,0.15);font-size:.85rem;margin:2px;display:inline-block;",n.appendChild(l),s.el.classList.add("placed"),window.ai8State.rules.push(s.el.dataset.value),window.ai8State.rules.length>=2&&(document.getElementById("ai8-step3").style.display="",addPoints(5))};window.showAi8Result=function(){const s=window.ai8State,n=document.getElementById("ai8-result");n.style.display="",document.getElementById("ai8-card").innerHTML=`
    <h4 style="text-align:center;margin-bottom:12px">${s.job.emoji} ${s.job.name}</h4>
    <p><strong>Job:</strong> ${s.job.desc}</p>
    <p><strong>Rules:</strong></p><ul style="margin:4px 0 8px 16px">${s.rules.map(l=>`<li style="font-size:.85rem">${l}</li>`).join("")}</ul>
    <p><strong>Never:</strong></p><ul style="margin:4px 0 8px 16px">${s.nevers.map(l=>`<li style="font-size:.85rem">${l}</li>`).join("")}</ul>
    <p style="color:var(--gold);text-align:center;margin-top:12px">Designed by ${STATE.name||"You"}! </p>
  `,setTimeout(completeChapter,1e3)};window.sp1SlotDrop=function(s,n){n.textContent=s.el.textContent,n.classList.add("filled"),s.el.classList.add("placed"),window.sp1Slots[n.dataset.slot]=s.el.dataset.value};window.sp1Check=function(){if(Object.keys(window.sp1Slots).length<8){ge(document.querySelectorAll(".activity")[1],"error","Place all 8 planets!");return}Object.entries(window.sp1Slots).every(([n,l])=>n===l)?(ge(document.querySelectorAll(".activity")[1],"success",' Perfect! Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune! "My Very Excited Mother Just Served Us Nachos" '),addPoints(20),setTimeout(completeChapter,1500)):ge(document.querySelectorAll(".activity")[1],"error",' Hint: Use this memory trick  "My Very Excited Mother Just Served Us Nachos"! Each first letter = a planet: Mercury (closest to Sun, tiny & hot), Venus (brightest, super hot), Earth (us!), Mars (red planet), Jupiter (HUGE gas giant), Saturn (rings!), Uranus (tilted sideways), Neptune (farthest, blue & cold). Try again! ')};window.sp2SlotDrop=function(s,n){n.textContent=s.el.textContent,n.classList.add("filled"),s.el.classList.add("placed"),window.sp2Slots[n.dataset.slot]=s.el.dataset.value};window.sp2Check=function(){if(Object.keys(window.sp2Slots).length<5){ge(document.querySelector(".activity"),"error","Place all stages!");return}Object.entries(window.sp2Slots).every(([n,l])=>n===l)?(ge(document.querySelector(".activity"),"success"," Perfect! Nebula  Protostar  Main Sequence  Red Giant  Supernova! Stars are amazing!"),addPoints(15),setTimeout(completeChapter,1500)):ge(document.querySelector(".activity"),"error"," Hint: Think of a star's life like growing up! 1 Nebula = baby (cloud of gas & dust)  2 Protostar = toddler (gravity pulls gas together, gets warm)  3 Main Sequence = adult (shining bright, fusing hydrogen)  4 Red Giant = old age (expands huge, turns red)  5 Supernova = dramatic ending (BOOM! Explodes brilliantly). Try again! ")};window.sp3Drop=function(s,n){n.innerHTML=s.el.innerHTML,n.classList.add("filled"),s.el.classList.add("placed"),window.sp3Filled++,window.sp3Filled>=5&&(document.getElementById("sp3-launch").style.display="")};window.sp3Launch=function(){const s=document.querySelector(".rocket-frame");addPoints(20),gsap.to(s,{y:-500,opacity:0,duration:2,ease:"power2.in"}),ge(document.querySelector(".activity"),"success"," LAUNCH SUCCESSFUL! 3... 2... 1... LIFTOFF! Your rocket is heading to space!"),setTimeout(completeChapter,2500)};window.sp4Drop=function(s,n){try{const l=JSON.parse(s.el.dataset.value);if(window.sp4Weight+l.w>1e3){ge(n.parentElement,"error",` Too heavy! ${l.name} weighs ${l.w}kg and would exceed the 1000kg limit! Current cargo: ${window.sp4Weight}kg. You have ${1e3-window.sp4Weight}kg left. Tip: Prioritize essentials first (food, water, oxygen, tools, solar panels), then add extras if you have room! Real Mars missions face this exact challenge! `);return}window.sp4Weight+=l.w,window.sp4Cargo.push(l);const r=document.createElement("div");r.style.cssText="padding:6px 10px;border-radius:8px;background:rgba(6,182,212,0.15);font-size:.8rem;display:inline-block;margin:2px;",r.textContent=`${l.name} (${l.w}kg)`,document.getElementById("sp4-cargo-items").appendChild(r),s.el.classList.add("placed");const u=window.sp4Weight/1e3*100;document.getElementById("sp4-weight-fill").style.width=u+"%",document.getElementById("sp4-weight-fill").style.background=u>90?"var(--red)":u>70?"var(--gold)":"var(--green)",document.getElementById("sp4-weight-text").textContent=`${window.sp4Weight} / 1000 kg`}catch{}};window.sp4Check=function(){const s=window.sp4Cargo.filter(l=>l.essential).length;s>=5?(ge(document.querySelector(".activity"),"success",` Mission approved! You packed ${window.sp4Cargo.length} items (${window.sp4Weight}kg). ${s>=7?"ALL essentials included  perfect planning!":"Most essentials covered  your crew will survive!"}`),addPoints(20),setTimeout(completeChapter,1500)):ge(document.querySelector(".activity"),"error"," Your crew needs more essentials! For a Mars mission, you MUST pack:  Food (astronauts need ~2kg/day),  Water (most critical!),  Oxygen (can't breathe Mars air!),  Tools (for repairs),  Solar Panels (power source). These are non-negotiable  without ANY of these, the mission fails. Remove some fun items and add the essentials! ")};window.sp6Drop=function(s,n){s.el.dataset.value===n.dataset.answer?(n.innerHTML=`<span class="drag-zone-label" style="color:var(--green)"> ${s.el.textContent}</span>`,n.style.borderColor="var(--green)",n.style.borderStyle="solid",s.el.classList.add("placed"),window.sp6Matched++,addPoints(8),window.sp6Matched>=4&&(ge(document.querySelector(".activity"),"success"," All matched! AI is essential for space exploration  from driving rovers to finding new planets!"),setTimeout(completeChapter,1e3))):(n.classList.add("wrong"),setTimeout(()=>n.classList.remove("wrong"),500))};window.sp8CrewDrop=function(s,n){if(window.sp8State.crew.length>=4)return;const l=s.el.cloneNode(!0);l.style.cssText="padding:6px 12px;border-radius:8px;background:rgba(6,182,212,0.15);font-size:.85rem;margin:2px;display:inline-block;",n.appendChild(l),s.el.classList.add("placed"),window.sp8State.crew.push(s.el.dataset.value),addPoints(3),window.sp8State.crew.length>=3&&(document.getElementById("sp8-step3").style.display="")};window.rb1Drop=function(s,n){vs(s,n,window.rb1Placed,"rb1")};window.rb1Check=function(){addPoints(15),ge(document.querySelector(".activity"),"success"," Great sorting! Remember: a robot must be able to SENSE, THINK, and ACT. A bicycle can't think or sense!"),setTimeout(completeChapter,1500)};window.rb2Drop=function(s,n){s.el.dataset.value===n.dataset.answer&&(n.innerHTML=`<span class="drag-zone-label" style="color:var(--green)"> ${s.el.textContent}</span>`,n.style.borderColor="var(--green)",n.style.borderStyle="solid",s.el.classList.add("placed"),window.rb2Matched++,addPoints(8),window.rb2Matched>=5&&(ge(document.querySelector(".activity"),"success"," Perfect matching! Robots use many different sensors to understand the world around them!"),setTimeout(completeChapter,1e3)))};window.rb3Drop=function(s,n){const l=s.el.cloneNode(!0);if(l.style.cssText=s.el.style.cssText,l.className=s.el.className,n.appendChild(l),window.rb3Blocks.push(s.el.dataset.value),s.el.classList.add("placed"),window.rb3Blocks.length>=2){const r=document.createElement("span");r.className="arrow",r.textContent=""}};window.rb3Check=function(){window.rb3Blocks.length>=3?(addPoints(15),ge(document.querySelector(".activity"),"success"," Great logic building! IF-THEN-ELSE is how robots make decisions. You just programmed a robot brain!"),setTimeout(completeChapter,1500)):ge(document.querySelector(".activity"),"error"," Hint: Robot brains use IF-THEN-ELSE logic! Think of it like this: IF (something happens)  THEN (do this)  ELSE (do that instead). Example: IF the robot sees a wall  THEN turn right  ELSE keep going forward. Drag at least 3 blocks: one IF condition, one THEN action, and one ELSE action. That's how ALL robots make decisions! ")};window.rb5Drop=function(s,n){s.el.dataset.value===n.dataset.answer&&(n.innerHTML=`<span class="drag-zone-label" style="color:var(--green)"> ${s.el.textContent}</span>`,n.style.borderColor="var(--green)",n.style.borderStyle="solid",s.el.classList.add("placed"),window.rb5Matched++,addPoints(8),window.rb5Matched>=4&&(ge(document.querySelectorAll(".activity")[1],"success"," All matched! Each type of robot is specially designed for its job!"),setTimeout(completeChapter,1e3)))};window.rb6Drop=function(s,n){const l=n.dataset?.bucket||n.closest(".bucket")?.dataset?.bucket;if(!l)return;const r=s.el.dataset.value===l;window.rb6Total++,r&&window.rb6Correct++,vs(s,n,null,"rb6");const u=Math.round(window.rb6Correct/window.rb6Total*100);document.getElementById("rb6-accuracy").textContent=u+"%",document.getElementById("rb6-acc-fill").style.width=u+"%",r&&addPoints(5),window.rb6Total>=6&&(ge(document.querySelector(".activity"),"success",` Your robot's AI is ${u}% accurate! With more training data, AI gets even smarter. This is machine learning in action!`),setTimeout(completeChapter,1500))};window.save=()=>{};window.showFeedback=ge;window.initDrag=Qe;window.startDrag=vp;window.moveDrag=lu;window.endDrag=ru;window.handleBucketDrop=vs;function W0(){const{state:s,navigate:n,completeChapter:l,addPoints:r,notifications:u,toggleNotifPanel:d,showNotifPanel:f}=ps(),{isLoggedIn:m,isDemoMode:g}=Ci(),v=s.currentCourse,b=mr?.[v],[w,x]=N.useState(s.currentChapter||0),_=N.useRef(null),A=b?.chapters||[],E=A.length,R=A.filter((Q,G)=>s.completed?.[`${v}_${G}`]).length,z=E?Math.round(R/E*100):0,L=N.useCallback(()=>{const Q=s.points||0;return Q>=500?{icon:"",name:"Creator",next:""}:Q>=250?{icon:"",name:"Builder",next:500}:{icon:"",name:"Explorer",next:250}},[s.points]),M=N.useCallback(Q=>!(Q===0||g||s.purchases?.fullAccess||s.purchases?.familyPlan||s.purchases?.[v]),[g,s.purchases,v]),V=N.useCallback(Q=>{M(Q)||(x(Q),s.currentChapter!==Q&&(s.currentChapter=Q),window.scrollTo(0,0))},[M,s]);if(N.useEffect(()=>{if(!_.current||!v||M(w))return;const Q=qm[v]?.[w];if(Q&&(window.STATE={currentCourse:v,currentChapter:w,name:s.name||"",points:s.points||0,completed:s.completed||{},parentEmail:s.parentEmail||""},window.addPoints=G=>r(G),window.gsap=window.gsap||{to:()=>{},fromTo:()=>{}},window._reactLoadChapter=G=>{x(G)},window.completeChapter=()=>{l(v,w);const G=_.current;if(G&&!G.querySelector(".chapter-complete")){const ne=document.createElement("div");ne.className="chapter-complete show",ne.innerHTML=`
            <span class="emoji"></span>
            <h3>Chapter Complete!</h3>
            <p>+25 XP earned! Great job${s.name?", "+s.name:""}!</p>
            ${w<7?`<button class="btn btn-primary" onclick="window._reactLoadChapter(${w+1})">Next Chapter </button>`:`<button class="btn btn-gold" onclick="window.location.hash='#badges'"> View Badges</button>`}
          `,G.appendChild(ne),ne.scrollIntoView({behavior:"smooth",block:"center"})}},_.current.innerHTML="",Q(_.current),!s.completed?.[`${v}_${w}`])){const G=document.createElement("div");G.style.cssText="text-align:center;margin:24px 0;",G.innerHTML='<button class="btn-next" style="display:inline-flex" onclick="window.completeChapter()">Complete & Continue </button>',_.current.appendChild(G)}},[w,v,r,l,s,M]),!b)return h.jsxs("div",{style:{padding:"60px 20px",textAlign:"center"},children:[h.jsx("h2",{children:"Course not found"}),h.jsx("button",{className:"btn btn-primary",onClick:()=>n("landing"),children:" Back Home"})]});const F=L(),Z=A[w],Y=s.completed?.[`${v}_${w}`],K=M(w),P=(u||[]).filter(Q=>!Q.read).length;return h.jsxs("div",{id:"course-view",style:{display:"block",minHeight:"100vh",position:"relative",zIndex:1},children:[h.jsxs("div",{className:"course-header",children:[h.jsx("button",{className:"btn btn-back",onClick:()=>n("landing"),children:" Courses"}),h.jsx("h2",{style:{flex:1},children:b.title}),h.jsx("div",{className:"progress-bar",style:{flex:1,maxWidth:"200px"},children:h.jsx("div",{className:"progress-fill",style:{width:`${z}%`}})}),h.jsxs("span",{className:"progress-text",children:[z,"%"]}),h.jsxs("span",{className:"points-display",children:[" ",s.points||0]}),h.jsxs("div",{className:"notif-bell",onClick:d,style:{position:"relative"},children:["",P>0&&h.jsx("span",{className:"notif-count",children:P})]})]}),f&&h.jsxs("div",{className:"notif-panel show",children:[h.jsx("h4",{children:" Notifications"}),!u||u.length===0?h.jsx("div",{className:"notif-empty",children:"No notifications yet!"}):u.slice(0,10).map((Q,G)=>h.jsxs("div",{className:"notif-item",children:[h.jsx("span",{className:"notif-icon",children:Q.icon||""}),h.jsx("span",{className:"notif-text",children:Q.text}),h.jsx("span",{className:"notif-time",children:Q.time||""})]},G))]}),h.jsxs("div",{className:"course-body",children:[h.jsxs("div",{className:"chapter-sidebar",children:[h.jsxs("div",{className:"level-display",children:[h.jsx("span",{className:"level-icon",children:F.icon}),h.jsx("span",{className:"level-name",children:F.name}),h.jsxs("span",{className:"level-xp",children:[s.points||0," / ",F.next," XP"]})]}),A.map((Q,G)=>{const ne=`${v}_${G}`,Pe=s.completed?.[ne],X=G===w,I=M(G);return h.jsxs("div",{className:`chapter-item${X?" active":""}${Pe?" completed":""}${I?" locked":""}`,onClick:()=>V(G),children:[h.jsx("div",{className:"ch-num",children:Pe?"":I?"":G+1}),h.jsxs("div",{className:"ch-title",children:[Q.emoji," ",Q.title,I&&h.jsx("div",{className:"chapter-lock",children:" Locked"})]})]},G)})]}),h.jsx("div",{className:"lesson-area",ref:_,children:K?h.jsxs("div",{className:"unlock-banner",children:[h.jsx("h3",{children:" Chapter Locked"}),h.jsx("p",{children:"This chapter requires a subscription. Unlock it to continue your adventure!"}),h.jsx("button",{className:"btn btn-primary",onClick:()=>n("landing","#pricing"),children:"View Plans "})]}):h.jsxs(h.Fragment,{children:[!qm[v]?.[w]&&h.jsxs(h.Fragment,{children:[h.jsxs("h2",{children:[Z?.emoji," ",Z?.title]}),h.jsx("p",{className:"lesson-desc",children:"Coming soon! This chapter is being built."})]}),Y&&h.jsxs("div",{className:"chapter-complete show",children:[h.jsx("span",{className:"emoji",children:""}),h.jsx("h3",{children:"Chapter Complete!"}),h.jsxs("p",{children:["+25 XP earned! Great job",s.name?`, ${s.name}`:"","!"]}),w<E-1?h.jsx("button",{className:"btn btn-primary",onClick:()=>V(w+1),children:"Next Chapter "}):h.jsx("button",{className:"btn btn-gold",onClick:()=>n("badges"),children:" View Badges"})]})]})})]})]})}function F0(){const s=[];for(const[n,l]of Object.entries(mr||{}))(l.chapters||[]).forEach((r,u)=>{s.push({id:`${n}_${u}`,emoji:r.emoji,name:r.title,course:n})});return s}function ew(){const{state:s,navigate:n}=ps(),l=F0();return h.jsx("div",{id:"badge-gallery",style:{display:"block",padding:"40px 20px",position:"relative",zIndex:1},children:h.jsxs("div",{className:"container",children:[h.jsx("button",{className:"btn btn-back",onClick:()=>n("landing"),children:" Back Home"}),h.jsx("h2",{style:{textAlign:"center",margin:"20px 0",fontSize:"2rem"},children:" Badge Gallery"}),h.jsx("p",{style:{textAlign:"center",color:"var(--text2)",marginBottom:"8px"},children:"Complete chapters to earn badges!"}),h.jsx("div",{className:"badges-grid",children:l.map(r=>{const u=s.completed?.[r.id];return h.jsxs("div",{className:`badge ${u?"earned":"locked"}`,children:[h.jsx("span",{className:"emoji",children:r.emoji}),h.jsx("div",{className:"name",children:r.name})]},r.id)})})]})})}const ar={ai:{title:" AI Adventures",chapters:[{title:"What is AI?"},{title:"How AI Learns"},{title:"Smart vs Wise"},{title:"AI in Your World"},{title:"Asking Better Questions"},{title:"When AI Gets It Wrong"},{title:"AI Ethics & Fairness"},{title:"Be the AI Boss"}]},space:{title:" Space Explorers",chapters:[{title:"Our Solar System"},{title:"Life of a Star"},{title:"Rockets & Launch Science"},{title:"Mission to Mars"},{title:"Gravity & Orbits"},{title:"Space AI"},{title:"Astronaut Training"},{title:"Design Your Space Mission"}]},robotics:{title:" Robotics Lab",chapters:[{title:"What is a Robot?"},{title:"Robot Senses"},{title:"Robot Brain"},{title:"Robot Movement"},{title:"Types of Robots"},{title:"Robots & AI Together"},{title:"Robot Ethics"},{title:"Design Your Robot"}]}},tw={"What is AI?":'Ask: "Can you explain what AI is to me? Where do we use AI at home?"',"How AI Learns":'Ask: "How does AI learn new things? Is it like how you learn?"',"Smart vs Wise":`Ask: "What's the difference between being smart and being wise?"`,"Our Solar System":'Ask: "Which planet is your favorite and why?"',"Rockets & Launch Science":'Ask: "What does it take to launch a rocket into space?"',"What is a Robot?":'Ask: "What makes something a robot vs just a machine?"',"Robot Ethics":'Ask: "Should robots make important decisions for us? Why or why not?"'};function $m(){return{name:localStorage.getItem("ngs_name")||"",points:parseInt(localStorage.getItem("ngs_points"))||0,completed:JSON.parse(localStorage.getItem("ngs_completed")||"{}"),parentEmail:localStorage.getItem("ngs_parent_email")||"",activeDays:JSON.parse(localStorage.getItem("ngs_active_days")||"[]"),timeSpent:parseInt(localStorage.getItem("ngs_time_spent"))||0}}function aw(s){const n=[...s].sort().reverse();let l=0;const r=new Date;for(let u=0;u<365;u++){const d=new Date(r);d.setDate(d.getDate()-u);const f=d.toISOString().split("T")[0];if(n.includes(f))l++;else break}return l}function Hm(s){const n=localStorage.getItem("ngs_name")||"Student",l=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});if(typeof window.jspdf<"u"&&window.jspdf.jsPDF){const r=new window.jspdf.jsPDF("landscape");r.setFillColor(10,10,46),r.rect(0,0,297,210,"F"),r.setDrawColor(6,182,212),r.setLineWidth(3),r.rect(10,10,277,190,"S"),r.setDrawColor(139,92,246),r.setLineWidth(1),r.rect(15,15,267,180,"S"),r.setTextColor(251,191,36),r.setFontSize(36),r.text("Certificate of Completion",148.5,50,{align:"center"}),r.setTextColor(226,232,240),r.setFontSize(16),r.text("This certifies that",148.5,75,{align:"center"}),r.setTextColor(6,182,212),r.setFontSize(28),r.text(n,148.5,95,{align:"center"}),r.setTextColor(226,232,240),r.setFontSize(16),r.text("has successfully completed",148.5,115,{align:"center"}),r.setTextColor(139,92,246),r.setFontSize(22),r.text(s,148.5,135,{align:"center"}),r.setTextColor(226,232,240),r.setFontSize(14),r.text("at NextGen School  Mind Over Machines",148.5,155,{align:"center"}),r.setTextColor(148,163,184),r.setFontSize(12),r.text(l,148.5,175,{align:"center"}),r.save(`NextGenSchool_Certificate_${n.replace(/\s/g,"_")}.pdf`)}else Pt(async()=>{const{jsPDF:r}=await import("./pdf-S5HbmSVd.js").then(u=>u.j);return{jsPDF:r}},[]).then(({jsPDF:r})=>{const u=new r("landscape");u.setFillColor(10,10,46),u.rect(0,0,297,210,"F"),u.setDrawColor(6,182,212),u.setLineWidth(3),u.rect(10,10,277,190,"S"),u.setDrawColor(139,92,246),u.setLineWidth(1),u.rect(15,15,267,180,"S"),u.setTextColor(251,191,36),u.setFontSize(36),u.text("Certificate of Completion",148.5,50,{align:"center"}),u.setTextColor(226,232,240),u.setFontSize(16),u.text("This certifies that",148.5,75,{align:"center"}),u.setTextColor(6,182,212),u.setFontSize(28),u.text(n,148.5,95,{align:"center"}),u.setTextColor(226,232,240),u.setFontSize(16),u.text("has successfully completed",148.5,115,{align:"center"}),u.setTextColor(139,92,246),u.setFontSize(22),u.text(s,148.5,135,{align:"center"}),u.setTextColor(226,232,240),u.setFontSize(14),u.text("at NextGen School  Mind Over Machines",148.5,155,{align:"center"}),u.setTextColor(148,163,184),u.setFontSize(12),u.text(l,148.5,175,{align:"center"}),u.save(`NextGenSchool_Certificate_${n.replace(/\s/g,"_")}.pdf`)}).catch(()=>{alert("Certificate generation requires jsPDF. Please try again.")})}function nw({onBack:s}){const n=Ci(),l=n?.isLoggedIn&&!n?.isDemoMode&&n?.currentUser?.role==="parent",[r,u]=N.useState(l),[d,f]=N.useState(()=>localStorage.getItem("ngs_parent_email")||""),[m,g]=N.useState(l?$m():null),[v,b]=N.useState(!1),w=()=>{if(n?.openAuthModal){n.openAuthModal("login");return}const Q=localStorage.getItem("ngs_parent_email")||"";d.trim()&&(d===Q||Q===""?(localStorage.setItem("ngs_parent_email",d),g($m()),u(!0)):alert("Email does not match. Please use the email from signup."))},x=()=>{s?s():window.location.hash="#home"},_=()=>{if(b(!0),"YOUR_EMAILJS_SERVICE_ID".startsWith("YOUR_")){alert("EmailJS not configured. Set up your service ID to send reports."),b(!1);return}b(!1)};if(!r)return h.jsx("div",{id:"parent-dashboard",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"pd-header",children:[h.jsx("button",{className:"btn btn-back",onClick:x,children:" Back Home"}),h.jsx("h2",{style:{flex:1,fontSize:"1.4rem"},children:" Parent Dashboard"})]}),h.jsxs("div",{id:"pd-login",style:{textAlign:"center",padding:"60px 20px"},children:[h.jsx("span",{style:{fontSize:"4rem",display:"block",marginBottom:16},children:""}),h.jsx("h3",{style:{marginBottom:12},children:"Parent Portal"}),h.jsx("p",{style:{color:"var(--text2)",marginBottom:20},children:"Enter the email you provided during signup"}),h.jsx("input",{className:"wizard-input",placeholder:"parent@email.com",type:"email",style:{maxWidth:400,margin:"0 auto 16px"},value:d,onChange:Q=>f(Q.target.value),onKeyDown:Q=>Q.key==="Enter"&&w()}),h.jsx("br",{}),h.jsx("button",{className:"btn btn-primary",onClick:w,children:"Access Dashboard "})]})]})});const{name:A,points:E,completed:R,activeDays:z,timeSpent:L}=m,M=Object.keys(R).length,V=Math.round((L+(Date.now()-Date.now()))/36e5*10)/10||Math.round(L/36e5*10)/10,F=aw(z),Z=Object.keys(R).pop();let Y="Ask your child what they learned today!";if(Z){const[Q,G]=Z.split("_"),ne=ar[Q]?.chapters[parseInt(G)];ne&&(Y=tw[ne.title]||`Ask your child about "${ne.title}"  what did they learn?`)}const K=new Date,P=[];for(let Q=27;Q>=0;Q--){const G=new Date(K);G.setDate(G.getDate()-Q);const ne=G.toISOString().split("T")[0];P.push({date:ne,active:z.includes(ne),isToday:Q===0})}return h.jsx("div",{id:"parent-dashboard",children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"pd-header",children:[h.jsx("button",{className:"btn btn-back",onClick:x,children:" Back Home"}),h.jsx("h2",{style:{flex:1,fontSize:"1.4rem"},children:" Parent Dashboard"})]}),h.jsxs("div",{id:"pd-content",children:[h.jsxs("div",{className:"pd-stats",children:[h.jsxs("div",{className:"pd-stat",children:[h.jsx("div",{className:"stat-value",children:A||"Explorer"}),h.jsx("div",{className:"stat-label",children:"Student"})]}),h.jsxs("div",{className:"pd-stat",children:[h.jsxs("div",{className:"stat-value",children:[M,"/24"]}),h.jsx("div",{className:"stat-label",children:"Chapters Done"})]}),h.jsxs("div",{className:"pd-stat",children:[h.jsx("div",{className:"stat-value",children:M}),h.jsx("div",{className:"stat-label",children:"Badges Earned"})]}),h.jsxs("div",{className:"pd-stat",children:[h.jsxs("div",{className:"stat-value",children:[V,"h"]}),h.jsx("div",{className:"stat-label",children:"Time Learning"})]}),h.jsxs("div",{className:"pd-stat",children:[h.jsxs("div",{className:"stat-value",children:[F,""]}),h.jsx("div",{className:"stat-label",children:"Day Streak"})]}),h.jsxs("div",{className:"pd-stat",children:[h.jsxs("div",{className:"stat-value",children:[E,""]}),h.jsx("div",{className:"stat-label",children:"Total XP"})]})]}),h.jsx("div",{id:"pd-courses",children:["ai","space","robotics"].map(Q=>{const G=ar[Q];let ne=0;for(let X=0;X<8;X++)R[`${Q}_${X}`]&&ne++;const Pe=Math.round(ne/8*100);return h.jsxs("div",{className:"pd-course-card",children:[h.jsx("h4",{children:G.title}),h.jsx("div",{className:"progress-bar",style:{maxWidth:"100%",margin:"8px 0"},children:h.jsx("div",{className:"progress-fill",style:{width:`${Pe}%`}})}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:".85rem",color:"var(--text2)"},children:[h.jsxs("span",{children:[ne,"/8 chapters"]}),h.jsxs("span",{children:[Pe,"%"]})]}),ne===8&&h.jsx("button",{className:"cert-btn",style:{marginTop:12},onClick:()=>Hm(G.title),children:" Download Certificate"})]},Q)})}),h.jsxs("div",{style:{textAlign:"center",margin:"30px 0"},children:[h.jsx("h3",{style:{marginBottom:12},children:" Learning Streak"}),h.jsxs("div",{className:"pd-streak-cal",children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7,1fr)",gap:2,fontSize:".6rem",color:"var(--text3)",marginBottom:4},children:[h.jsx("span",{children:"M"}),h.jsx("span",{children:"T"}),h.jsx("span",{children:"W"}),h.jsx("span",{children:"T"}),h.jsx("span",{children:"F"}),h.jsx("span",{children:"S"}),h.jsx("span",{children:"S"})]}),P.map(({date:Q,active:G,isToday:ne})=>h.jsx("div",{className:`pd-streak-day ${G?"active":""} ${ne?"today":""}`,title:Q},Q))]})]}),h.jsxs("div",{className:"pd-conversation",children:[h.jsx("h4",{children:" Talk to Your Child About..."}),h.jsx("p",{children:Y})]}),h.jsx("div",{style:{textAlign:"center",margin:"20px 0"},children:h.jsx("button",{className:"btn btn-primary",onClick:_,disabled:v,children:v?"Sending...":" Send Progress Report"})}),h.jsxs("div",{style:{marginTop:20},children:[h.jsx("h3",{style:{marginBottom:12},children:" Certificates"}),["ai","space","robotics"].map(Q=>{let G=0;for(let ne=0;ne<8;ne++)R[`${Q}_${ne}`]&&G++;return G!==8?null:h.jsxs("button",{className:"cert-btn",onClick:()=>Hm(ar[Q].title),children:[" ",ar[Q].title]},Q)})]})]})]})})}Gm.register(Vm,Ym,Km,Gv,Vv,Yv,Pm,Jm,Xm,Kv);let vn;Pt(()=>import("./admin.service-C5Ucx-A9.js"),__vite__mapDeps([0,1,2,3])).then(s=>{vn=s}).catch(()=>{vn=null});const sw=[{key:"totalFamilies",label:"Families",icon:"",color:"#8b5cf6"},{key:"totalChildren",label:"Children",icon:"",color:"#06b6d4"},{key:"totalRevenue",label:"Revenue",icon:"",color:"#10b981",prefix:"$"},{key:"totalPurchases",label:"Transactions",icon:"",color:"#f59e0b"},{key:"chaptersCompleted",label:"Chapters Done",icon:"",color:"#ec4899"},{key:"failedPayments",label:"Failed Payments",icon:"",color:"#ef4444"}];function yp(){const[s,n]=N.useState(null),[l,r]=N.useState(null),[u,d]=N.useState(null),[f,m]=N.useState(null),[g,v]=N.useState(!0);N.useEffect(()=>{b()},[]);async function b(){v(!0);try{if(!vn)throw new Error("Service not ready");const[z,L,M,V]=await Promise.all([vn.getStats(),vn.getRevenueByDay(7),vn.getEnrollmentsByDay(7),vn.getCourseCompletion()]);z.data&&n(z.data),L.data&&r(L.data),M.data&&d(M.data),V.data&&m(V.data)}catch{}v(!1)}const w={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255,255,255,0.7)",font:{family:"Nunito"}}}},scales:{x:{ticks:{color:"rgba(255,255,255,0.5)"},grid:{color:"rgba(255,255,255,0.04)"}},y:{ticks:{color:"rgba(255,255,255,0.5)"},grid:{color:"rgba(255,255,255,0.04)"}}}},x=Array.from({length:7},(z,L)=>new Date(Date.now()-(6-L)*864e5).toISOString().slice(0,10)),_=x.map(z=>z.slice(5)),A={labels:_,datasets:[{label:"Revenue ($)",data:x.map(z=>l?.[z]||0),backgroundColor:"rgba(139,92,246,0.6)",borderColor:"#8b5cf6",borderWidth:2,borderRadius:6}]},E={labels:_,datasets:[{label:"Enrollments",data:x.map(z=>u?.[z]||0),borderColor:"#06b6d4",backgroundColor:"rgba(6,182,212,0.1)",fill:!0,tension:.4,pointBackgroundColor:"#06b6d4"}]},R=f?{labels:f.map(z=>z.title||z.courseId),datasets:[{data:f.map(z=>z.completionPct),backgroundColor:["#8b5cf6","#06b6d4","#ec4899","#10b981","#f59e0b"],borderWidth:0}]}:null;return h.jsxs("div",{className:"admin-dashboard",children:[h.jsx("div",{className:"admin-stats-grid",children:sw.map(z=>h.jsxs("div",{className:"admin-stat-card glass-card",children:[h.jsx("div",{className:"admin-stat-icon",children:z.icon}),h.jsx("div",{className:"admin-stat-value",style:{color:z.color},children:g?"...":`${z.prefix||""}${s?.[z.key]?.toLocaleString()??0}`}),h.jsx("div",{className:"admin-stat-label",children:z.label})]},z.key))}),h.jsxs("div",{className:"admin-charts-row",children:[h.jsxs("div",{className:"glass-card admin-chart-card",children:[h.jsx("h3",{className:"admin-chart-title",children:"Revenue (7 days)"}),h.jsx("div",{className:"admin-chart-wrap",children:h.jsx(Qm,{data:A,options:w})})]}),h.jsxs("div",{className:"glass-card admin-chart-card",children:[h.jsx("h3",{className:"admin-chart-title",children:"Enrollments (7 days)"}),h.jsx("div",{className:"admin-chart-wrap",children:h.jsx(Pv,{data:E,options:w})})]})]}),R&&h.jsxs("div",{className:"glass-card admin-chart-card",style:{maxWidth:400,margin:"24px auto"},children:[h.jsx("h3",{className:"admin-chart-title",children:"Course Completion %"}),h.jsx("div",{className:"admin-chart-wrap",style:{height:260},children:h.jsx(Jv,{data:R,options:{...w,scales:void 0}})})]})]})}function ys({columns:s=[],data:n=[],total:l=0,page:r=1,pageSize:u=20,onPageChange:d,onSort:f,sortKey:m,sortDir:g,searchValue:v="",onSearch:b,searchPlaceholder:w="Search...",onRowClick:x,selectable:_=!1,selectedIds:A=new Set,onSelectionChange:E,loading:R=!1,emptyMessage:z="No data found",actions:L,bulkActions:M=[],filters:V=[],headerExtra:F,onPageSizeChange:Z}){const Y=Math.max(1,Math.ceil(l/u)),K=l===0?0:(r-1)*u+1,P=Math.min(r*u,l),Q=n.length>0&&n.every(I=>A.has(I.id)),G=()=>{if(E)if(Q){const I=new Set(A);n.forEach(T=>I.delete(T.id)),E(I)}else{const I=new Set(A);n.forEach(T=>I.add(T.id)),E(I)}},ne=I=>{if(!E)return;const T=new Set(A);T.has(I)?T.delete(I):T.add(I),E(T)},Pe=N.useMemo(()=>{const I=[];let q=Math.max(1,r-Math.floor(2.5)),J=Math.min(Y,q+5-1);J-q<4&&(q=Math.max(1,J-5+1));for(let ie=q;ie<=J;ie++)I.push(ie);return I},[r,Y]),X=I=>{if(!I.sortable||!f)return;const T=m===I.key&&g==="asc"?"desc":"asc";f(I.key,T)};return h.jsxs("div",{className:"dg-container",children:[h.jsxs("div",{className:"dg-header",children:[h.jsxs("div",{className:"dg-header-left",children:[b&&h.jsxs("div",{className:"dg-search",children:[h.jsx("span",{className:"dg-search-icon",children:""}),h.jsx("input",{type:"text",value:v,onChange:I=>b(I.target.value),placeholder:w,className:"dg-search-input"})]}),V.map(I=>h.jsx("div",{className:"dg-filter-group",children:I.options.map(T=>h.jsxs("button",{className:`dg-filter-pill ${I.value===T.value?"active":""}`,onClick:()=>I.onChange(T.value),children:[T.label,T.count!=null&&h.jsx("span",{className:"dg-filter-count",children:T.count})]},T.value))},I.key))]}),h.jsxs("div",{className:"dg-header-right",children:[_&&A.size>0&&M.map((I,T)=>h.jsxs("button",{className:`dg-bulk-btn ${I.variant||""}`,onClick:()=>I.onClick(A),children:[I.icon&&h.jsx("span",{children:I.icon})," ",I.label]},T)),F]})]}),h.jsx("div",{className:"dg-table-wrap",children:h.jsxs("table",{className:"dg-table",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[_&&h.jsx("th",{className:"dg-th dg-th-check",children:h.jsxs("label",{className:"dg-checkbox",children:[h.jsx("input",{type:"checkbox",checked:Q,onChange:G}),h.jsx("span",{className:"dg-checkmark"})]})}),s.map(I=>h.jsxs("th",{className:`dg-th ${I.sortable?"sortable":""}`,style:I.width?{width:I.width}:void 0,onClick:()=>X(I),children:[h.jsx("span",{children:I.label}),I.sortable&&m===I.key&&h.jsx("span",{className:"dg-sort-icon",children:g==="asc"?"":""})]},I.key)),L&&h.jsx("th",{className:"dg-th dg-th-actions",children:"Actions"})]})}),h.jsx("tbody",{children:R?Array.from({length:u>5?5:u}).map((I,T)=>h.jsxs("tr",{className:"dg-row dg-skeleton-row",children:[_&&h.jsx("td",{className:"dg-td",children:h.jsx("div",{className:"dg-skeleton",style:{width:18,height:18}})}),s.map(q=>h.jsx("td",{className:"dg-td",children:h.jsx("div",{className:"dg-skeleton",style:{width:`${60+Math.random()*30}%`,height:14}})},q.key)),L&&h.jsx("td",{className:"dg-td",children:h.jsx("div",{className:"dg-skeleton",style:{width:60,height:14}})})]},`skel-${T}`)):n.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:s.length+(_?1:0)+(L?1:0),className:"dg-empty",children:h.jsxs("div",{className:"dg-empty-inner",children:[h.jsx("span",{className:"dg-empty-icon",children:""}),h.jsx("p",{children:z})]})})}):n.map((I,T)=>h.jsxs("tr",{className:`dg-row ${T%2===0?"dg-row-even":""} ${x?"clickable":""} ${A.has(I.id)?"selected":""}`,onClick:()=>x&&x(I),children:[_&&h.jsx("td",{className:"dg-td dg-td-check",onClick:q=>q.stopPropagation(),children:h.jsxs("label",{className:"dg-checkbox",children:[h.jsx("input",{type:"checkbox",checked:A.has(I.id),onChange:()=>ne(I.id)}),h.jsx("span",{className:"dg-checkmark"})]})}),s.map(q=>h.jsx("td",{className:"dg-td",children:q.render?q.render(I[q.key],I):I[q.key]??""},q.key)),L&&h.jsx("td",{className:"dg-td dg-td-actions",onClick:q=>q.stopPropagation(),children:L(I)})]},I.id||T))})]})}),l>0&&h.jsxs("div",{className:"dg-pagination",children:[h.jsxs("div",{className:"dg-pagination-info",children:["Showing ",K,"",P," of ",l,Z&&h.jsx("select",{className:"dg-pagesize-select",value:u,onChange:I=>Z(Number(I.target.value)),children:[10,20,50,100].map(I=>h.jsxs("option",{value:I,children:[I," / page"]},I))})]}),h.jsxs("div",{className:"dg-pagination-buttons",children:[h.jsx("button",{className:"dg-page-btn",disabled:r<=1,onClick:()=>d(r-1),children:""}),Pe.map(I=>h.jsx("button",{className:`dg-page-btn ${I===r?"active":""}`,onClick:()=>d(I),children:I},I)),h.jsx("button",{className:"dg-page-btn",disabled:r>=Y,onClick:()=>d(r+1),children:""})]})]})]})}function Ai({status:s}){const l={active:"#10b981",success:"#10b981",completed:"#10b981",failed:"#ef4444",error:"#ef4444",pending:"#f59e0b",processing:"#f59e0b",deactivated:"#6b7280",inactive:"#6b7280",expired:"#6b7280",depleted:"#6b7280",refunded:"#8b5cf6"}[(s||"").toLowerCase()]||"#6b7280";return h.jsx("span",{className:"dg-status-badge",style:{"--badge-color":l},children:s})}function Ya({icon:s,title:n,onClick:l,variant:r}){return h.jsx("button",{className:`dg-action-btn ${r||""}`,title:n,onClick:l,children:s})}let lr;Pt(()=>import("./admin.service-C5Ucx-A9.js"),__vite__mapDeps([0,1,2,3])).then(s=>{lr=s}).catch(()=>{lr=null});const iw=[{key:"name",label:"Parent Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"children",label:"Children",render:(s,n)=>(n.children||[]).map(l=>`${l.name} (${l.age})`).join(", ")||""},{key:"created_at",label:"Joined",sortable:!0,render:s=>s?new Date(s).toLocaleDateString():""}];function lw(){const[s,n]=N.useState([]),[l,r]=N.useState(0),[u,d]=N.useState(1),[f,m]=N.useState(20),[g,v]=N.useState(""),[b,w]=N.useState(!0),x=N.useCallback(async()=>{w(!0);try{if(!lr)throw new Error("not ready");const{data:_,count:A}=await lr.getEnrollments({page:u,pageSize:f,search:g});n(_||[]),r(A||0)}catch{n([]),r(0)}w(!1)},[u,f,g]);return N.useEffect(()=>{x()},[x]),h.jsxs("div",{children:[h.jsx("h2",{className:"admin-section-title",style:{fontFamily:"Fredoka, sans-serif"},children:"Enrollments"}),h.jsx(ys,{columns:iw,data:s,total:l,page:u,pageSize:f,onPageChange:d,onPageSizeChange:_=>{m(_),d(1)},searchValue:g,onSearch:_=>{v(_),d(1)},searchPlaceholder:"Search by name or email...",loading:b,emptyMessage:"No enrollments yet"})]})}let rr;Pt(()=>import("./admin.service-C5Ucx-A9.js"),__vite__mapDeps([0,1,2,3])).then(s=>{rr=s}).catch(()=>{rr=null});const rw=[{value:"",label:"All"},{value:"completed",label:"Success"},{value:"failed",label:"Failed"},{value:"pending",label:"Pending"},{value:"refunded",label:"Refunded"}],ow=[{key:"id",label:"ID",width:"80px",render:s=>h.jsx("span",{style:{fontFamily:"monospace",fontSize:12,opacity:.6},children:String(s).slice(0,8)})},{key:"parent",label:"Parent",render:(s,n)=>n.profiles?.name||""},{key:"plan",label:"Plan",render:(s,n)=>n.plan||n.course_id||""},{key:"amount",label:"Amount",sortable:!0,render:s=>`$${Number(s||0).toFixed(2)}`},{key:"method",label:"Method",render:(s,n)=>{const l=n.payment_method||"stripe";return h.jsx("span",{className:`dg-method-badge ${l}`,children:l})}},{key:"status",label:"Status",render:s=>h.jsx(Ai,{status:s||"pending"})},{key:"coupon_code",label:"Coupon",render:s=>s||""},{key:"created_at",label:"Date",sortable:!0,render:s=>s?new Date(s).toLocaleDateString():""}];function cw(){const[s,n]=N.useState([]),[l,r]=N.useState(0),[u,d]=N.useState(1),[f,m]=N.useState(20),[g,v]=N.useState(""),[b,w]=N.useState(!0),[x,_]=N.useState(0),A=N.useCallback(async()=>{w(!0);try{if(!rr)throw new Error("not ready");const{data:E,count:R}=await rr.getPayments({page:u,pageSize:f,status:g});if(n(E||[]),r(R||0),!g){const z=(E||[]).filter(L=>L.status==="failed").length;_(z)}}catch{n([]),r(0)}w(!1)},[u,f,g]);return N.useEffect(()=>{A()},[A]),h.jsxs("div",{children:[h.jsx("h2",{className:"admin-section-title",style:{fontFamily:"Fredoka, sans-serif"},children:"Payments"}),x>0&&h.jsxs("div",{className:"admin-alert-banner danger",children:[" ",x," failed payment",x>1?"s":""," require attention"]}),h.jsx(ys,{columns:ow,data:s,total:l,page:u,pageSize:f,onPageChange:d,onPageSizeChange:E=>{m(E),d(1)},loading:b,emptyMessage:"No payments found",filters:[{key:"status",label:"Status",options:rw,value:g,onChange:E=>{v(E),d(1)}}],actions:E=>h.jsxs(h.Fragment,{children:[h.jsx(Ya,{icon:"",title:"View details",onClick:()=>alert(JSON.stringify(E,null,2))}),E.status==="completed"&&h.jsx(Ya,{icon:"",title:"Refund",onClick:()=>{},variant:"danger"})]})})]})}Gm.register(Vm,Ym,Km,Pm,Jm,Xm);let yi;Pt(()=>import("./admin.service-C5Ucx-A9.js"),__vite__mapDeps([0,1,2,3])).then(s=>{yi=s}).catch(()=>{yi=null});function uw(){const[s,n]=N.useState(null),[l,r]=N.useState([]),[u,d]=N.useState(!0);N.useEffect(()=>{(async()=>{d(!0);try{if(!yi)throw new Error("not ready");const[w,x]=await Promise.all([yi.getAnalytics(),yi.getStudentProgress()]);w.data&&n(w.data),x.data&&r(x.data)}catch{}d(!1)})()},[]);const f=l.map(w=>({id:w.id,name:w.name,age:w.age,parent:w.profiles?.name||"",chapters:(w.progress||[]).length,courses:new Set((w.progress||[]).map(x=>x.course_id)).size})).sort((w,x)=>x.chapters-w.chapters).slice(0,10).map((w,x)=>({...w,rank:x+1})),m=s?.completionFunnel||[],g={labels:m.map(w=>w.title||w.courseId),datasets:[{label:"Started",data:m.map(w=>w.started),backgroundColor:"#8b5cf6",borderRadius:4},{label:"Completed",data:m.map(w=>w.completed),backgroundColor:"#10b981",borderRadius:4}]},b=[{label:"Avg Chapters/Student",value:l.length>0?(l.reduce((w,x)=>w+(x.progress||[]).length,0)/l.length).toFixed(1):0,icon:"",color:"#8b5cf6"},{label:"Active Students",value:l.length,icon:"",color:"#06b6d4"},{label:"Top Course",value:s?.popularCourses?.[0]?.title||"",icon:"",color:"#f59e0b"},{label:"Courses Tracked",value:m.length,icon:"",color:"#ec4899"}];return h.jsxs("div",{children:[h.jsx("h2",{className:"admin-section-title",style:{fontFamily:"Fredoka, sans-serif"},children:"Analytics"}),h.jsx("div",{className:"admin-stats-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:b.map(w=>h.jsxs("div",{className:"admin-stat-card glass-card",children:[h.jsx("div",{className:"admin-stat-icon",children:w.icon}),h.jsx("div",{className:"admin-stat-value",style:{color:w.color,fontSize:typeof w.value=="string"&&w.value.length>5?18:28},children:u?"...":w.value}),h.jsx("div",{className:"admin-stat-label",children:w.label})]},w.label))}),m.length>0&&h.jsxs("div",{className:"glass-card admin-chart-card",style:{marginTop:24},children:[h.jsx("h3",{className:"admin-chart-title",children:"Completion Funnel"}),h.jsx("div",{className:"admin-chart-wrap",children:h.jsx(Qm,{data:g,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255,255,255,0.7)"}}},scales:{x:{ticks:{color:"rgba(255,255,255,0.5)"},grid:{color:"rgba(255,255,255,0.04)"}},y:{ticks:{color:"rgba(255,255,255,0.5)"},grid:{color:"rgba(255,255,255,0.04)"}}}}})})]}),h.jsxs("div",{style:{marginTop:24},children:[h.jsx("h3",{className:"admin-chart-title",style:{marginBottom:12},children:" Top Students"}),h.jsx(ys,{columns:[{key:"rank",label:"#",width:"50px"},{key:"name",label:"Name"},{key:"age",label:"Age",width:"60px"},{key:"chapters",label:"Chapters",sortable:!0},{key:"courses",label:"Courses"}],data:f,total:f.length,page:1,pageSize:10,loading:u,emptyMessage:"No student data yet"})]})]})}let Ga;Pt(()=>import("./admin.service-C5Ucx-A9.js"),__vite__mapDeps([0,1,2,3])).then(s=>{Ga=s}).catch(()=>{Ga=null});const dw={ai:"",space:"",robotics:""},hw={ai:"#8b5cf6",space:"#06b6d4",robotics:"#ec4899"};function fw(){const[s,n]=N.useState([]),[l,r]=N.useState([]),[u,d]=N.useState(0),[f,m]=N.useState(1),[g,v]=N.useState(!0),[b,w]=N.useState(""),[x,_]=N.useState([]),[A,E]=N.useState(null),[R,z]=N.useState(""),[L,M]=N.useState(""),[V,F]=N.useState(!1),Z=N.useRef(null);N.useEffect(()=>{Y()},[f]);async function Y(){v(!0);try{if(!Ga)throw new Error("not ready");const[G,ne]=await Promise.all([Ga.getCourseOverview(),Ga.getCourseAccessLog({page:f})]);G.data&&n(G.data),ne.data&&r(ne.data),d(ne.count||0)}catch{}v(!1)}const K=N.useCallback(G=>{if(w(G),E(null),Z.current&&clearTimeout(Z.current),G.length<2){_([]);return}Z.current=setTimeout(async()=>{try{const{data:ne}=await Ga.getEnrollments({search:G,pageSize:5});_(ne||[])}catch{_([])}},300)},[]);async function P(){if(!(!A||!R)){F(!0);try{await Ga.grantCourseAccess(A.id,R,L),E(null),w(""),M(""),z(""),Y()}catch{}F(!1)}}async function Q(G){if(confirm("Revoke this access?"))try{await Ga.revokeCourseAccess(G),Y()}catch{}}return h.jsxs("div",{children:[h.jsx("h2",{className:"admin-section-title",style:{fontFamily:"Fredoka, sans-serif"},children:"Course Management"}),h.jsx("div",{className:"admin-course-cards",children:s.map(G=>{const ne=(G.title||"").toLowerCase(),Pe=Object.entries(dw).find(([I])=>ne.includes(I))?.[1]||"",X=Object.entries(hw).find(([I])=>ne.includes(I))?.[1]||"#8b5cf6";return h.jsxs("div",{className:"glass-card admin-course-card",children:[h.jsxs("div",{className:"admin-course-card-header",children:[h.jsx("span",{style:{fontSize:28},children:Pe}),h.jsx("h3",{style:{color:X,fontFamily:"Fredoka, sans-serif",margin:0},children:G.title})]}),h.jsxs("div",{className:"admin-course-stats",children:[h.jsxs("div",{children:[h.jsx("span",{className:"admin-course-stat-num",children:G.students}),h.jsx("span",{className:"admin-course-stat-label",children:"Students"})]}),h.jsxs("div",{children:[h.jsxs("span",{className:"admin-course-stat-num",children:[G.completionPct,"%"]}),h.jsx("span",{className:"admin-course-stat-label",children:"Completion"})]}),h.jsxs("div",{children:[h.jsxs("span",{className:"admin-course-stat-num",children:["$",G.revenue]}),h.jsx("span",{className:"admin-course-stat-label",children:"Revenue"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"admin-course-stat-num",children:G.chaptersDone}),h.jsx("span",{className:"admin-course-stat-label",children:"Chapters"})]})]}),h.jsx("div",{className:"admin-course-progress-bar",children:h.jsx("div",{className:"admin-course-progress-fill",style:{width:`${G.completionPct}%`,background:X}})})]},G.id)})}),h.jsxs("div",{className:"glass-card",style:{padding:24,marginTop:24},children:[h.jsx("h3",{className:"admin-chart-title",children:"Grant Course Access"}),h.jsxs("div",{className:"admin-grant-form",children:[h.jsxs("div",{className:"admin-grant-field",style:{position:"relative"},children:[h.jsx("label",{children:"User"}),h.jsx("input",{type:"text",value:A?A.name:b,onChange:G=>K(G.target.value),placeholder:"Search user by name or email...",className:"admin-input"}),x.length>0&&!A&&h.jsx("div",{className:"admin-autocomplete",children:x.map(G=>h.jsxs("div",{className:"admin-autocomplete-item",onClick:()=>{E(G),_([])},children:[h.jsx("strong",{children:G.name})," ",h.jsx("span",{style:{opacity:.6},children:G.email})]},G.id))})]}),h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Course"}),h.jsxs("select",{value:R,onChange:G=>z(G.target.value),className:"admin-input",children:[h.jsx("option",{value:"",children:"Select course..."}),s.map(G=>h.jsx("option",{value:G.id,children:G.title},G.id))]})]}),h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Reason"}),h.jsx("input",{type:"text",value:L,onChange:G=>M(G.target.value),placeholder:"Optional reason...",className:"admin-input"})]}),h.jsx("button",{className:"admin-btn primary",onClick:P,disabled:!A||!R||V,children:V?"Granting...":"Grant Access"})]})]}),h.jsxs("div",{style:{marginTop:24},children:[h.jsx("h3",{className:"admin-chart-title",style:{marginBottom:12},children:"Access Log"}),h.jsx(ys,{columns:[{key:"user",label:"User",render:(G,ne)=>ne.profiles?.name||""},{key:"course_id",label:"Course"},{key:"reason",label:"Reason",render:G=>G||""},{key:"granted_at",label:"Granted",render:G=>G?new Date(G).toLocaleDateString():""},{key:"active",label:"Status",render:G=>h.jsx(Ai,{status:G===!1?"Revoked":"Active"})}],data:l,total:u,page:f,pageSize:20,onPageChange:m,loading:g,emptyMessage:"No access grants yet",actions:G=>G.active!==!1&&h.jsx(Ya,{icon:"",title:"Revoke",onClick:()=>Q(G.id),variant:"danger"})})]})]})}let or;Pt(()=>import("./admin.service-C5Ucx-A9.js"),__vite__mapDeps([0,1,2,3])).then(s=>{or=s}).catch(()=>{or=null});function mw(){const[s,n]=N.useState([]),[l,r]=N.useState(0),[u,d]=N.useState(1),[f,m]=N.useState(20),[g,v]=N.useState(""),[b,w]=N.useState(""),[x,_]=N.useState(new Set),[A,E]=N.useState(!0),[R,z]=N.useState(null),[L,M]=N.useState(!1),[V,F]=N.useState({name:"",email:"",password:"",role:"parent"}),Z=N.useCallback(async()=>{E(!0);try{if(!or)throw new Error("not ready");const{data:P,count:Q}=await or.getEnrollments({page:u,pageSize:f,search:g});n((P||[]).map(G=>({...G,status:G.deactivated_at?"deactivated":"active",role:G.role||"parent"}))),r(Q||0)}catch{n([]),r(0)}E(!1)},[u,f,g]);N.useEffect(()=>{Z()},[Z]);const Y=b?s.filter(P=>P.status===b):s,K=[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"role",label:"Role",render:P=>h.jsx("span",{className:`dg-role-badge ${P}`,children:P})},{key:"children",label:"Children",render:(P,Q)=>(Q.children||[]).length},{key:"status",label:"Status",render:P=>h.jsx(Ai,{status:P})}];return h.jsxs("div",{children:[h.jsx("h2",{className:"admin-section-title",style:{fontFamily:"Fredoka, sans-serif"},children:"Users"}),h.jsx(ys,{columns:K,data:Y,total:l,page:u,pageSize:f,onPageChange:d,onPageSizeChange:P=>{m(P),d(1)},searchValue:g,onSearch:P=>{v(P),d(1)},searchPlaceholder:"Search users...",loading:A,emptyMessage:"No users found",selectable:!0,selectedIds:x,onSelectionChange:_,onRowClick:P=>z(P),filters:[{key:"status",label:"Status",options:[{value:"",label:"All"},{value:"active",label:"Active"},{value:"deactivated",label:"Deactivated"}],value:b,onChange:w}],bulkActions:[{label:"Deactivate",icon:"",onClick:P=>alert(`Deactivate ${P.size} users`),variant:"warning"},{label:"Delete",icon:"",onClick:P=>alert(`Delete ${P.size} users`),variant:"danger"}],headerExtra:h.jsx("button",{className:"admin-btn primary",onClick:()=>M(!0),children:"+ Create User"}),actions:P=>h.jsxs(h.Fragment,{children:[h.jsx(Ya,{icon:"",title:"View",onClick:()=>z(P)}),h.jsx(Ya,{icon:"",title:"Edit",onClick:()=>{}}),h.jsx(Ya,{icon:"",title:"Delete",onClick:()=>{},variant:"danger"})]})}),R&&h.jsx("div",{className:"admin-modal-overlay",onClick:()=>z(null),children:h.jsxs("div",{className:"admin-modal glass-card",onClick:P=>P.stopPropagation(),children:[h.jsxs("div",{className:"admin-modal-header",children:[h.jsx("h3",{style:{fontFamily:"Fredoka, sans-serif",margin:0},children:R.name}),h.jsx("button",{className:"admin-modal-close",onClick:()=>z(null),children:""})]}),h.jsxs("div",{className:"admin-modal-body",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Email:"})," ",R.email]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Role:"})," ",R.role]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Status:"})," ",h.jsx(Ai,{status:R.status})]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Joined:"})," ",R.created_at?new Date(R.created_at).toLocaleDateString():""]}),h.jsx("h4",{children:"Children"}),(R.children||[]).length===0?h.jsx("p",{style:{opacity:.5},children:"No children"}):(R.children||[]).map(P=>h.jsxs("div",{className:"admin-child-card glass-card",style:{padding:12,marginBottom:8},children:[h.jsx("strong",{children:P.name}),"  Age ",P.age]},P.id))]})]})}),L&&h.jsx("div",{className:"admin-modal-overlay",onClick:()=>M(!1),children:h.jsxs("div",{className:"admin-modal glass-card",onClick:P=>P.stopPropagation(),children:[h.jsxs("div",{className:"admin-modal-header",children:[h.jsx("h3",{style:{fontFamily:"Fredoka, sans-serif",margin:0},children:"Create User"}),h.jsx("button",{className:"admin-modal-close",onClick:()=>M(!1),children:""})]}),h.jsxs("div",{className:"admin-modal-body",children:[["name","email","password"].map(P=>h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{style:{textTransform:"capitalize"},children:P}),h.jsx("input",{type:P==="password"?"password":"text",value:V[P],onChange:Q=>F(G=>({...G,[P]:Q.target.value})),className:"admin-input"})]},P)),h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Role"}),h.jsxs("select",{value:V.role,onChange:P=>F(Q=>({...Q,role:P.target.value})),className:"admin-input",children:[h.jsx("option",{value:"parent",children:"Parent"}),h.jsx("option",{value:"admin",children:"Admin"})]})]}),h.jsx("button",{className:"admin-btn primary",style:{marginTop:16},onClick:()=>{alert("Create user: "+JSON.stringify(V)),M(!1)},children:"Create"})]})]})})]})}let cr;Pt(()=>import("./admin.service-C5Ucx-A9.js"),__vite__mapDeps([0,1,2,3])).then(s=>{cr=s}).catch(()=>{cr=null});function pw(){const[s,n]=N.useState([]),[l,r]=N.useState(""),[u,d]=N.useState(""),[f,m]=N.useState(1),[g,v]=N.useState(!0),b=12;N.useEffect(()=>{(async()=>{v(!0);try{if(!cr)throw new Error("not ready");const{data:E}=await cr.getStudentProgress();n(E||[])}catch{}v(!1)})()},[]);const w=N.useMemo(()=>{const E=new Set;return s.forEach(R=>(R.progress||[]).forEach(z=>E.add(z.course_id))),[...E]},[s]),x=N.useMemo(()=>{let E=s;return l&&(E=E.filter(R=>(R.name||"").toLowerCase().includes(l.toLowerCase()))),u&&(E=E.filter(R=>(R.progress||[]).some(z=>z.course_id===u))),E},[s,l,u]),_=x.slice((f-1)*b,f*b),A=Math.ceil(x.length/b);return h.jsxs("div",{children:[h.jsx("h2",{className:"admin-section-title",style:{fontFamily:"Fredoka, sans-serif"},children:"Student Progress"}),h.jsxs("div",{className:"dg-header",style:{marginBottom:16},children:[h.jsxs("div",{className:"dg-header-left",children:[h.jsxs("div",{className:"dg-search",children:[h.jsx("span",{className:"dg-search-icon",children:""}),h.jsx("input",{type:"text",value:l,onChange:E=>{r(E.target.value),m(1)},placeholder:"Search students...",className:"dg-search-input"})]}),h.jsxs("select",{value:u,onChange:E=>{d(E.target.value),m(1)},className:"admin-input",style:{width:"auto",minWidth:140},children:[h.jsx("option",{value:"",children:"All Courses"}),w.map(E=>h.jsx("option",{value:E,children:E},E))]})]}),h.jsxs("div",{className:"dg-pagination-info",children:[x.length," student",x.length!==1?"s":""]})]}),g?h.jsx("div",{className:"admin-students-grid",children:Array.from({length:6}).map((E,R)=>h.jsxs("div",{className:"glass-card admin-student-card",children:[h.jsx("div",{className:"dg-skeleton",style:{width:"60%",height:18,marginBottom:8}}),h.jsx("div",{className:"dg-skeleton",style:{width:"40%",height:14}})]},R))}):_.length===0?h.jsxs("div",{className:"dg-empty-inner",style:{padding:60},children:[h.jsx("span",{className:"dg-empty-icon",children:""}),h.jsx("p",{children:"No students found"})]}):h.jsx("div",{className:"admin-students-grid",children:_.map(E=>{const R=E.progress||[],z={};return R.forEach(L=>{z[L.course_id]||(z[L.course_id]=[]),z[L.course_id].push(L.chapter_index)}),h.jsxs("div",{className:"glass-card admin-student-card",children:[h.jsxs("div",{className:"admin-student-header",children:[h.jsx("h4",{style:{margin:0,color:"#fff",fontFamily:"Fredoka, sans-serif"},children:E.name}),h.jsxs("span",{style:{opacity:.5,fontSize:13},children:["Age ",E.age]})]}),h.jsxs("p",{style:{margin:"4px 0 12px",opacity:.5,fontSize:13},children:["Parent: ",E.profiles?.name||""]}),Object.entries(z).map(([L,M])=>h.jsxs("div",{className:"admin-student-progress",children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,marginBottom:4},children:[h.jsx("span",{style:{opacity:.7},children:L}),h.jsxs("span",{style:{color:"#8b5cf6"},children:[M.length," ch"]})]}),h.jsx("div",{className:"admin-course-progress-bar",children:h.jsx("div",{className:"admin-course-progress-fill",style:{width:`${Math.min(100,M.length/8*100)}%`}})})]},L)),Object.keys(z).length===0&&h.jsx("p",{style:{opacity:.4,fontSize:13},children:"No progress yet"})]},E.id)})}),A>1&&h.jsxs("div",{className:"dg-pagination",style:{marginTop:20},children:[h.jsxs("div",{className:"dg-pagination-info",children:["Page ",f," of ",A]}),h.jsxs("div",{className:"dg-pagination-buttons",children:[h.jsx("button",{className:"dg-page-btn",disabled:f<=1,onClick:()=>m(E=>E-1),children:""}),h.jsx("button",{className:"dg-page-btn",disabled:f>=A,onClick:()=>m(E=>E+1),children:""})]})]})]})}let Kt=null;Pt(()=>import("./coupon.service-Bglzh4Rk.js"),__vite__mapDeps([4,1,2,3])).then(s=>{Kt=s.default||s}).catch(()=>{Kt=null});function Kc(s=""){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l=Array.from({length:8},()=>n[Math.floor(Math.random()*n.length)]).join("");return s?`${s}-${l}`:l}function gw(){const[s,n]=N.useState({active:0,redeemed:0,revenueImpact:0}),[l,r]=N.useState([]),[u,d]=N.useState(0),[f,m]=N.useState(1),[g,v]=N.useState(20),[b,w]=N.useState(""),[x,_]=N.useState(""),[A,E]=N.useState(!0),[R,z]=N.useState("single"),[L,M]=N.useState({code:"",course:"",type:"percentage",value:10,maxUses:100,expiry:"",prefix:"",count:10}),[V,F]=N.useState([]),[Z,Y]=N.useState(!1),K=N.useCallback(async()=>{E(!0);try{if(!Kt)throw new Error("not ready");const[X,I]=await Promise.all([Kt.getCouponStats?.()||{data:null},Kt.getCoupons?.({page:f,pageSize:g,search:b,status:x})||{data:null,count:0}]);X.data&&n(X.data),I.data&&r(I.data),d(I.count||0)}catch{}E(!1)},[f,g,b,x]);N.useEffect(()=>{K()},[K]);async function P(){Y(!0);try{if(R==="single"){const X=L.code||Kc();Kt?.createCoupon&&await Kt.createCoupon({...L,code:X}),F([X])}else{const X=Array.from({length:L.count},()=>Kc(L.prefix));Kt?.createBulkCoupons&&await Kt.createBulkCoupons(X.map(I=>({...L,code:I}))),F(X)}K()}catch{}Y(!1)}function Q(){navigator.clipboard.writeText(V.join(`
`))}async function G(X){try{await Kt?.deactivateCoupon?.(X),K()}catch{}}const ne=[{label:"Active Coupons",value:s.active,icon:"",color:"#10b981"},{label:"Total Redeemed",value:s.redeemed,icon:"",color:"#8b5cf6"},{label:"Revenue Impact",value:`$${s.revenueImpact||0}`,icon:"",color:"#ec4899"}],Pe=[{key:"code",label:"Code",render:X=>h.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[h.jsx("code",{className:"admin-coupon-code",children:X}),h.jsx("button",{className:"dg-action-btn",title:"Copy",onClick:()=>navigator.clipboard.writeText(X),style:{fontSize:12},children:""})]})},{key:"course_id",label:"Course",render:X=>X?h.jsx("span",{className:"dg-role-badge",children:X}):h.jsx("span",{style:{opacity:.5},children:"All"})},{key:"type",label:"Type"},{key:"value",label:"Value",render:(X,I)=>I.type==="percentage"?`${X}%`:`$${X}`},{key:"uses",label:"Uses",render:(X,I)=>{const T=I.used_count||0,q=I.max_uses||0,J=q>0?T/q*100:0;return h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[h.jsxs("span",{style:{fontSize:12,whiteSpace:"nowrap"},children:[T,"/",q]}),h.jsx("div",{className:"admin-course-progress-bar",style:{flex:1,height:6},children:h.jsx("div",{className:"admin-course-progress-fill",style:{width:`${J}%`,background:J>=100?"#ef4444":"#8b5cf6"}})})]})}},{key:"expires_at",label:"Expires",render:X=>X?new Date(X).toLocaleDateString():"Never"},{key:"status",label:"Status",render:(X,I)=>{const T=I.active===!1?"Depleted":I.expires_at&&new Date(I.expires_at)<new Date?"Expired":"Active";return h.jsx(Ai,{status:T})}}];return h.jsxs("div",{children:[h.jsx("h2",{className:"admin-section-title",style:{fontFamily:"Fredoka, sans-serif"},children:"Coupon Management"}),h.jsx("div",{className:"admin-stats-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:ne.map(X=>h.jsxs("div",{className:"admin-stat-card glass-card",children:[h.jsx("div",{className:"admin-stat-icon",children:X.icon}),h.jsx("div",{className:"admin-stat-value",style:{color:X.color},children:X.value}),h.jsx("div",{className:"admin-stat-label",children:X.label})]},X.label))}),h.jsxs("div",{className:"glass-card",style:{padding:24,marginTop:24},children:[h.jsx("h3",{className:"admin-chart-title",children:"Generate Coupons"}),h.jsxs("div",{className:"admin-mode-toggle",children:[h.jsx("button",{className:`dg-filter-pill ${R==="single"?"active":""}`,onClick:()=>z("single"),children:"Single"}),h.jsx("button",{className:`dg-filter-pill ${R==="bulk"?"active":""}`,onClick:()=>z("bulk"),children:"Bulk Generate"})]}),h.jsxs("div",{className:"admin-grant-form",style:{marginTop:16},children:[R==="single"?h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Code"}),h.jsxs("div",{style:{display:"flex",gap:8},children:[h.jsx("input",{type:"text",value:L.code,onChange:X=>M(I=>({...I,code:X.target.value})),placeholder:"Auto-generate if empty",className:"admin-input",style:{flex:1}}),h.jsx("button",{className:"admin-btn",onClick:()=>M(X=>({...X,code:Kc()})),children:""})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Prefix"}),h.jsx("input",{type:"text",value:L.prefix,onChange:X=>M(I=>({...I,prefix:X.target.value})),placeholder:"e.g. LAUNCH",className:"admin-input"})]}),h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Count"}),h.jsx("input",{type:"number",value:L.count,onChange:X=>M(I=>({...I,count:Number(X.target.value)})),className:"admin-input",min:1,max:500})]})]}),h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Type"}),h.jsxs("select",{value:L.type,onChange:X=>M(I=>({...I,type:X.target.value})),className:"admin-input",children:[h.jsx("option",{value:"percentage",children:"Percentage"}),h.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Value"}),h.jsx("input",{type:"number",value:L.value,onChange:X=>M(I=>({...I,value:Number(X.target.value)})),className:"admin-input"})]}),h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Max Uses"}),h.jsx("input",{type:"number",value:L.maxUses,onChange:X=>M(I=>({...I,maxUses:Number(X.target.value)})),className:"admin-input"})]}),h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Expiry Date"}),h.jsx("input",{type:"date",value:L.expiry,onChange:X=>M(I=>({...I,expiry:X.target.value})),className:"admin-input"})]}),h.jsx("button",{className:"admin-btn primary",onClick:P,disabled:Z,children:Z?"Generating...":R==="single"?"Create Coupon":`Generate ${L.count} Coupons`})]}),V.length>0&&h.jsxs("div",{className:"admin-generated-codes",style:{marginTop:16},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[h.jsxs("span",{style:{color:"#10b981",fontWeight:600},children:[" Generated ",V.length," code",V.length>1?"s":""]}),h.jsx("button",{className:"admin-btn",onClick:Q,children:" Copy All"})]}),h.jsx("div",{className:"admin-codes-list",children:V.map(X=>h.jsx("code",{className:"admin-coupon-code",children:X},X))})]})]}),h.jsx("div",{style:{marginTop:24},children:h.jsx(ys,{columns:Pe,data:l,total:u,page:f,pageSize:g,onPageChange:m,onPageSizeChange:X=>{v(X),m(1)},searchValue:b,onSearch:X=>{w(X),m(1)},searchPlaceholder:"Search by code...",loading:A,emptyMessage:"No coupons yet",filters:[{key:"status",label:"Status",options:[{value:"",label:"All"},{value:"active",label:"Active"},{value:"expired",label:"Expired"},{value:"depleted",label:"Depleted"}],value:x,onChange:X=>{_(X),m(1)}}],actions:X=>h.jsxs(h.Fragment,{children:[h.jsx(Ya,{icon:"",title:"Deactivate",onClick:()=>G(X.id),variant:"danger"}),h.jsx(Ya,{icon:"",title:"Copy code",onClick:()=>navigator.clipboard.writeText(X.code)})]})})})]})}function vw(){const[s,n]=N.useState({demoMode:!0,pricing:{singleCourse:19,fullAccess:39,familyPlan:59},stripeKey:"",razorpayKey:""}),[l,r]=N.useState({current:"",new:"",confirm:""}),[u,d]=N.useState(!1),[f,m]=N.useState(!1),[g,v]=N.useState("checking");N.useEffect(()=>{try{const _=JSON.parse(localStorage.getItem("ngs_db_settings")||"null");_&&n(A=>({...A,..._}))}catch{}Pt(()=>Promise.resolve().then(()=>D0),void 0).then(_=>{const A=_.default;A?A.from("profiles").select("id",{count:"exact",head:!0}).then(({error:E})=>v(E?"error":"connected")).catch(()=>v("error")):v("error")}).catch(()=>v("error"))},[]);function b(_,A){n(E=>{const R={...E},z=_.split(".");let L=R;for(let M=0;M<z.length-1;M++)L[z[M]]={...L[z[M]]},L=L[z[M]];return L[z[z.length-1]]=A,R})}async function w(){d(!0);try{localStorage.setItem("ngs_db_settings",JSON.stringify(s)),m(!0),setTimeout(()=>m(!1),2e3)}catch{}d(!1)}const x={connected:"#10b981",error:"#ef4444",checking:"#f59e0b"};return h.jsxs("div",{children:[h.jsx("h2",{className:"admin-section-title",style:{fontFamily:"Fredoka, sans-serif"},children:"Settings"}),h.jsxs("div",{className:"admin-settings-grid",children:[h.jsxs("div",{className:"glass-card admin-settings-section",children:[h.jsx("h3",{className:"admin-chart-title",children:"General"}),h.jsxs("div",{className:"admin-setting-row",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Demo Mode"}),h.jsx("p",{style:{opacity:.5,fontSize:13,margin:"4px 0 0"},children:"Use mock data instead of real database"})]}),h.jsxs("label",{className:"admin-toggle",children:[h.jsx("input",{type:"checkbox",checked:s.demoMode,onChange:_=>b("demoMode",_.target.checked)}),h.jsx("span",{className:"admin-toggle-slider"})]})]}),h.jsxs("div",{className:"admin-setting-row",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Supabase Connection"}),h.jsx("p",{style:{opacity:.5,fontSize:13,margin:"4px 0 0"},children:"Database status"})]}),h.jsx("span",{className:"admin-status-dot",style:{"--dot-color":x[g]},children:g})]})]}),h.jsxs("div",{className:"glass-card admin-settings-section",children:[h.jsx("h3",{className:"admin-chart-title",children:"Pricing"}),[{key:"pricing.singleCourse",label:"Single Course ($)"},{key:"pricing.fullAccess",label:"Full Access ($)"},{key:"pricing.familyPlan",label:"Family Plan ($)"}].map(_=>h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:_.label}),h.jsx("input",{type:"number",value:_.key.split(".").reduce((A,E)=>A?.[E],s)||0,onChange:A=>b(_.key,Number(A.target.value)),className:"admin-input"})]},_.key))]}),h.jsxs("div",{className:"glass-card admin-settings-section",children:[h.jsx("h3",{className:"admin-chart-title",children:"Payment Gateways"}),h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Stripe Key"}),h.jsx("input",{type:"password",value:s.stripeKey,onChange:_=>b("stripeKey",_.target.value),className:"admin-input",placeholder:"sk_..."})]}),h.jsxs("div",{className:"admin-grant-field",children:[h.jsx("label",{children:"Razorpay Key"}),h.jsx("input",{type:"password",value:s.razorpayKey,onChange:_=>b("razorpayKey",_.target.value),className:"admin-input",placeholder:"rzp_..."})]})]}),h.jsxs("div",{className:"glass-card admin-settings-section",children:[h.jsx("h3",{className:"admin-chart-title",children:"Admin Password"}),["current","new","confirm"].map(_=>h.jsxs("div",{className:"admin-grant-field",children:[h.jsxs("label",{style:{textTransform:"capitalize"},children:[_," Password"]}),h.jsx("input",{type:"password",value:l[_],onChange:A=>r(E=>({...E,[_]:A.target.value})),className:"admin-input"})]},_))]})]}),h.jsxs("div",{style:{marginTop:24,display:"flex",alignItems:"center",gap:12},children:[h.jsx("button",{className:"admin-btn primary",onClick:w,disabled:u,children:u?"Saving...":"Save Settings"}),f&&h.jsx("span",{style:{color:"#10b981",fontWeight:600},children:" Saved!"})]})]})}function yw(){try{const s=m=>{try{return JSON.parse(localStorage.getItem("ngs_db_"+m)||"null")}catch{return null}},n=s("users")||[],l=s("children")||[],r=s("purchases")||[];let u=`Type,Name,Email,Children,Plan,Amount,Status,Date
`;n.forEach(m=>{const g=l.filter(b=>b.parentId===m.id).map(b=>b.name).join("; "),v=r.filter(b=>b.userId===m.id);v.length?v.forEach(b=>{u+=`Parent,"${m.name}","${m.email}","${g}",${b.plan},$${b.amount},${b.status},${b.date?.split("T")[0]||""}
`}):u+=`Parent,"${m.name}","${m.email}","${g}",,,,${m.createdAt?.split("T")[0]||""}
`});const d=new Blob([u],{type:"text/csv"}),f=document.createElement("a");f.href=URL.createObjectURL(d),f.download=`nextgen-school-export-${new Date().toISOString().split("T")[0]}.csv`,f.click()}catch(s){console.error("CSV export failed:",s),alert("Export failed. Check console for details.")}}const Im=[{id:"dashboard",label:" Dashboard",component:yp},{id:"enrollments",label:" Enrollments",component:lw},{id:"payments",label:" Payments",component:cw},{id:"analytics",label:" Analytics",component:uw},{id:"courses",label:" Courses",component:fw},{id:"users",label:" Users",component:mw},{id:"students",label:" Students",component:pw},{id:"coupons",label:" Coupons",component:gw},{id:"settings",label:" Settings",component:vw}];function bw({onBack:s}){const[n,l]=N.useState(!1),[r,u]=N.useState(""),[d,f]=N.useState("dashboard"),[m,g]=N.useState(!1),v=()=>{r==="admin123"?(l(!0),g(!1)):g(!0)},b=_=>{_.key==="Enter"&&v()},w=()=>{s?s():window.location.hash="#home"},x=Im.find(_=>_.id===d)?.component||yp;return h.jsx("div",{id:"admin-panel",style:{display:"block"},children:h.jsxs("div",{className:"container",children:[h.jsxs("div",{className:"admin-header",children:[h.jsx("button",{className:"btn btn-back",onClick:w,children:" Back"}),h.jsx("h2",{children:" Admin Dashboard"}),h.jsx("button",{className:"btn btn-back",onClick:yw,children:" Export CSV"})]}),n?h.jsxs("div",{id:"admin-content",className:"admin-layout",children:[h.jsxs("aside",{className:"admin-sidebar",children:[h.jsx("div",{className:"admin-sidebar-title",children:" Admin"}),Im.map(_=>h.jsx("button",{className:`admin-sidebar-item${d===_.id?" active":""}`,onClick:()=>f(_.id),children:_.label},_.id))]}),h.jsx("div",{id:"admin-tab-content",className:"admin-main",children:h.jsx(x,{})})]}):h.jsxs("div",{className:"admin-password",id:"admin-password-gate",children:[h.jsx("span",{style:{fontSize:"4rem"},children:""}),h.jsx("h3",{children:"Admin Access Required"}),h.jsx("input",{className:"auth-input",placeholder:"Enter admin password",type:"password",style:{maxWidth:300},value:r,onChange:_=>u(_.target.value),onKeyDown:b}),m&&h.jsx("p",{style:{color:"var(--red)",fontSize:".85rem"},children:"Invalid password"}),h.jsx("button",{className:"btn btn-primary",onClick:v,children:"Access "})]})]})})}function ww({onComplete:s}){const{state:n,setState:l,save:r}=ps(),[u,d]=N.useState(1),[f,m]=N.useState(""),[g,v]=N.useState(""),[b,w]=N.useState(!1),x=()=>{if(!f.trim()){w(!0);return}w(!1),d(2)},_=()=>{d(1)},A=()=>{const E=f.trim();E&&(l&&l(R=>({...R,name:E,parentEmail:g.trim()||R.parentEmail})),r&&r(),s&&s(E,g.trim()))};return h.jsx("div",{id:"onboarding",className:"show",style:{position:"fixed",inset:0,zIndex:1e4,background:"rgba(5,5,16,0.95)",backdropFilter:"blur(20px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:h.jsxs("div",{className:"wizard-card glass",style:{maxWidth:"500px",width:"100%",padding:"40px",textAlign:"center"},children:[u===1&&h.jsxs("div",{children:[h.jsx("span",{style:{fontSize:"4rem",display:"block",marginBottom:"16px"},children:""}),h.jsx("h2",{children:"Welcome to NextGen School!"}),h.jsx("p",{style:{color:"var(--text2)",marginBottom:"24px"},children:"Ready to explore AI, space, and robotics? Let's set up your profile!"}),h.jsx("input",{className:"wizard-input",placeholder:"What's your name, explorer?",maxLength:20,value:f,onChange:E=>{m(E.target.value),w(!1)},style:b?{borderColor:"var(--red)"}:{}}),h.jsxs("div",{className:"wizard-dots",children:[h.jsx("span",{className:"wizard-dot active"}),h.jsx("span",{className:"wizard-dot"})]}),h.jsx("button",{className:"btn btn-primary",onClick:x,style:{width:"100%"},children:"Next "})]}),u===2&&h.jsxs("div",{children:[h.jsx("span",{style:{fontSize:"4rem",display:"block",marginBottom:"16px"},children:""}),h.jsx("h2",{children:"Parent's Email (Optional)"}),h.jsx("p",{style:{color:"var(--text2)",marginBottom:"24px"},children:"We'll send progress reports and certificates to your parent!"}),h.jsx("input",{className:"wizard-input",placeholder:"parent@email.com",type:"email",value:g,onChange:E=>v(E.target.value)}),h.jsxs("div",{className:"wizard-dots",children:[h.jsx("span",{className:"wizard-dot"}),h.jsx("span",{className:"wizard-dot active"})]}),h.jsx("button",{className:"btn btn-primary",onClick:A,style:{width:"100%"},children:"Let's Go! "}),h.jsx("button",{className:"btn btn-back",onClick:_,style:{width:"100%",marginTop:"8px"},children:" Back"})]})]})})}function Sw(){const{authModalType:s,closeAuthModal:n,openAuthModal:l,doSignup:r,doLogin:u,doChildLogin:d,enableDemoMode:f}=Ci(),[m,g]=N.useState("parent"),[v,b]=N.useState({name:"",email:"",password:"",childName:"",childAge:"",childPin:""}),[w,x]=N.useState({email:"",password:""}),[_,A]=N.useState(""),[E,R]=N.useState(""),z=N.useCallback(()=>{R(""),A(""),g("parent")},[]);if(!s)return null;const L=()=>{z(),n()};if(s==="signup"){const M=async()=>{R("");const{name:V,email:F,password:Z,childName:Y,childAge:K,childPin:P}=v;if(!V||!F||!Z){R("Please fill in all required fields");return}if(Z.length<6){R("Password must be at least 6 characters");return}try{await r({name:V,email:F,password:Z,childName:Y,childAge:K,childPin:P}),L()}catch(Q){R(Q.message||"Signup failed")}};return h.jsx("div",{className:"auth-overlay show",children:h.jsxs("div",{className:"auth-modal",children:[h.jsx("button",{className:"close-btn",onClick:L,children:""}),h.jsx("span",{style:{fontSize:"3rem",display:"block",textAlign:"center",marginBottom:"8px"},children:""}),h.jsx("h2",{children:"Create Parent Account"}),h.jsx("p",{style:{textAlign:"center",color:"var(--text2)",marginBottom:"24px",fontSize:".95rem"},children:"Set up your family's learning journey"}),E&&h.jsx("div",{className:"auth-error",style:{display:"block"},children:E}),h.jsx("input",{className:"auth-input",placeholder:"Your full name",maxLength:50,value:v.name,onChange:V=>b(F=>({...F,name:V.target.value}))}),h.jsx("input",{className:"auth-input",placeholder:"Email address",type:"email",value:v.email,onChange:V=>b(F=>({...F,email:V.target.value}))}),h.jsx("input",{className:"auth-input",placeholder:"Password (min 6 chars)",type:"password",value:v.password,onChange:V=>b(F=>({...F,password:V.target.value}))}),h.jsx("input",{className:"auth-input",placeholder:"Child's name",value:v.childName,onChange:V=>b(F=>({...F,childName:V.target.value}))}),h.jsx("input",{className:"auth-input",placeholder:"Child's age (9-13)",type:"number",min:9,max:13,value:v.childAge,onChange:V=>b(F=>({...F,childAge:V.target.value}))}),h.jsx("input",{className:"auth-input",placeholder:"Child's 4-digit PIN (for child login)",type:"password",maxLength:4,value:v.childPin,onChange:V=>b(F=>({...F,childPin:V.target.value}))}),h.jsx("button",{className:"btn btn-primary",onClick:M,style:{width:"100%"},children:"Create Account "}),h.jsxs("div",{className:"auth-switch",children:["Already have an account? ",h.jsx("a",{onClick:()=>{z(),l("login")},children:"Log in"})]})]})})}if(s==="login"){const M=async()=>{if(R(""),!w.email||!w.password){R("Please fill in all fields");return}try{await u(w.email,w.password),L()}catch(K){R(K.message||"Login failed")}},V=K=>{_.length>=4||A(P=>P+K)},F=()=>{A(K=>K.slice(0,-1))},Z=async()=>{if(_.length===4){R("");try{await d(_),L()}catch(K){R(K.message||"Invalid PIN"),A("")}}},Y=()=>{f&&f(),L()};return h.jsx("div",{className:"auth-overlay show",children:h.jsxs("div",{className:"auth-modal",children:[h.jsx("button",{className:"close-btn",onClick:L,children:""}),h.jsx("span",{style:{fontSize:"3rem",display:"block",textAlign:"center",marginBottom:"8px"},children:""}),h.jsx("h2",{children:"Welcome Back"}),h.jsx("p",{style:{textAlign:"center",color:"var(--text2)",marginBottom:"24px",fontSize:".95rem"},children:"Log in to your account"}),h.jsxs("div",{className:"auth-tabs",children:[h.jsx("button",{className:`auth-tab${m==="parent"?" active":""}`,onClick:()=>{g("parent"),R("")},children:" Parent"}),h.jsx("button",{className:`auth-tab${m==="child"?" active":""}`,onClick:()=>{g("child"),R(""),A("")},children:" Child PIN"})]}),E&&h.jsx("div",{className:"auth-error",style:{display:"block"},children:E}),m==="parent"&&h.jsxs("div",{children:[h.jsx("input",{className:"auth-input",placeholder:"Email address",type:"email",value:w.email,onChange:K=>x(P=>({...P,email:K.target.value}))}),h.jsx("input",{className:"auth-input",placeholder:"Password",type:"password",value:w.password,onChange:K=>x(P=>({...P,password:K.target.value}))}),h.jsx("button",{className:"btn btn-primary",onClick:M,style:{width:"100%"},children:"Log In "})]}),m==="child"&&h.jsxs("div",{children:[h.jsx("p",{style:{textAlign:"center",color:"var(--text2)",fontSize:".9rem",marginBottom:"8px"},children:"Enter your 4-digit PIN"}),h.jsx("div",{className:"pin-dots",children:[0,1,2,3].map(K=>h.jsx("div",{className:`pin-dot${K<_.length?" filled":""}`},K))}),h.jsxs("div",{className:"child-pin-grid",children:[[1,2,3,4,5,6,7,8,9].map(K=>h.jsx("button",{className:"child-pin-btn",onClick:()=>V(String(K)),children:K},K)),h.jsx("button",{className:"child-pin-btn",onClick:F,children:""}),h.jsx("button",{className:"child-pin-btn",onClick:()=>V("0"),children:"0"}),h.jsx("button",{className:"child-pin-btn",onClick:Z,children:""})]})]}),h.jsx("div",{style:{textAlign:"center",margin:"16px 0"},children:h.jsx("button",{className:"btn btn-back",onClick:Y,style:{fontSize:".85rem"},children:" Try Demo Mode"})}),h.jsxs("div",{className:"auth-switch",children:["Don't have an account? ",h.jsx("a",{onClick:()=>{z(),l("signup")},children:"Sign up"})]})]})})}return null}function _w(){const{state:s,setCurrentView:n}=ps();N.useEffect(()=>{function r(){const u=window.location.hash.replace("#","")||"home";["home","courses","badges","parent","admin","onboarding"].includes(u)?n(u):n("home")}return r(),window.addEventListener("hashchange",r),()=>window.removeEventListener("hashchange",r)},[n]);const{currentView:l}=s;return h.jsxs(h.Fragment,{children:[h.jsx(Y0,{}),h.jsxs("div",{style:{display:"flex",minHeight:"100vh",overflow:"hidden",maxWidth:"100vw"},children:[h.jsx(P0,{}),h.jsxs("main",{className:"main-content",children:[l==="home"&&h.jsx(Z0,{}),l==="courses"&&h.jsx(W0,{}),l==="badges"&&h.jsx(ew,{}),l==="parent"&&h.jsx(nw,{}),l==="admin"&&h.jsx(bw,{}),l==="onboarding"&&h.jsx(ww,{})]})]}),h.jsx(Sw,{})]})}function xw(){return h.jsx(ty,{children:h.jsx(V0,{children:h.jsx(_w,{})})})}ey.createRoot(document.getElementById("root")).render(h.jsx(N.StrictMode,{children:h.jsx(xw,{})}));export{fe as s};
